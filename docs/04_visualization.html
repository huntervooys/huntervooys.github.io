<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>hunterr_2024 - 4&nbsp; Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./0R_references.html" rel="next">
<link href="./03_r_101.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "/"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualization</span></h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">hunterr_2024</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/huntervooys/hunterr_2024" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">R and Friends</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_lore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">The Lore</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_r_and_friends.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R and Friends</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_r_101.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R 101</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_visualization.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualization</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Statistics</span></span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0R_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0A_resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Getting Help</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">on this page</h2>
   
  <ul>
  <li><a href="#plotting-basics" id="toc-plotting-basics" class="nav-link active" data-scroll-target="#plotting-basics"><span class="header-section-number">4.1</span> Plotting Basics</a>
  <ul class="collapse">
  <li><a href="#geoms" id="toc-geoms" class="nav-link" data-scroll-target="#geoms"><span class="header-section-number">4.1.1</span> Geoms</a></li>
  <li><a href="#faceting" id="toc-faceting" class="nav-link" data-scroll-target="#faceting"><span class="header-section-number">4.1.2</span> Faceting</a></li>
  </ul></li>
  <li><a href="#plot-styling" id="toc-plot-styling" class="nav-link" data-scroll-target="#plot-styling"><span class="header-section-number">4.2</span> Plot Styling</a>
  <ul class="collapse">
  <li><a href="#labels" id="toc-labels" class="nav-link" data-scroll-target="#labels"><span class="header-section-number">4.2.1</span> Labels</a></li>
  <li><a href="#scales-and-coordinates" id="toc-scales-and-coordinates" class="nav-link" data-scroll-target="#scales-and-coordinates"><span class="header-section-number">4.2.2</span> Scales and Coordinates</a></li>
  <li><a href="#themes" id="toc-themes" class="nav-link" data-scroll-target="#themes"><span class="header-section-number">4.2.3</span> Themes</a></li>
  <li><a href="#guides-legends-and-text" id="toc-guides-legends-and-text" class="nav-link" data-scroll-target="#guides-legends-and-text"><span class="header-section-number">4.2.4</span> Guides, Legends, and Text</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/huntervooys/hunterr_2024/edit/main/04_visualization.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/huntervooys/hunterr_2024/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualization</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Tidy data has the following characteristics:</p>
<ul>
<li><p>every column represents one variable</p></li>
<li><p>every row represents one observation</p></li>
<li><p>every cell has one value</p></li>
</ul>
<p>We will soon return to the process of “tidying” non-tidy data, but we will begin with tidy data as a given. This chapter is definitely inspired by and roughly based on other chapters, specifically <span class="citation" data-cites="wickhamDataVisualization2017">(<a href="0R_references.html#ref-wickhamDataVisualization2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span> and <span class="citation" data-cites="wickhamDataVisualization2023">(<a href="0R_references.html#ref-wickhamDataVisualization2023" role="doc-biblioref">Wickham, Çetinkaya-Rundel, and Grolemund 2023</a>)</span>. If you would like to solidify the lessons from this chapter, I strongly suggest reviewing (and writing out the code from) those two chapters, as well; they contain the same ideas, but make use of different data.</p>
<p>We will be looking at <a href="https://stats.oecd.org/Index.aspx?DataSetCode=TIME_USE">data from the OECD</a>about how people in 33 countries spend their time. We will making plots with this data, but first I have to explain what it is.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">glimpse</span>(time_use)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 165
Columns: 5
$ country      &lt;chr&gt; "Australia", "Austria", "Belgium", "Canada", "Denmark", "…
$ activity     &lt;chr&gt; "Unpaid work", "Unpaid work", "Unpaid work", "Unpaid work…
$ time_spent   &lt;dbl&gt; 243.1689, 202.0000, 191.8202, 186.0000, 216.6273, 196.877…
$ women_to_men &lt;dbl&gt; 1.812398, 1.989696, 1.646106, 1.509785, 1.304469, 1.49728…
$ continent    &lt;chr&gt; "Oceania", "Europe", "Europe", "North America", "Europe",…</code></pre>
</div>
</div>
<p>The data contains five variables (columns). <code>country</code>, <code>continent</code>, and <code>activity</code> are relatively self explanatory, as is <code>women_to_men</code> which is the ratio of how much time women spend on the <code>activity</code> to how much time men spend. <code>time_spent</code> is the number of minutes the average person in <code>country</code> spends, per minutes per day, on the <code>activity</code>.</p>
<p>Categorical data, like <code>activity</code>, <code>country</code>, or <code>continent</code>, are likely to spawn different questions than numerical data, like <code>time_spent</code>, or <code>women_to_men</code>. The first question I have about this data is what activities are represented? We can use the <code>distinct</code> function to answer this question</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">distinct</span>(time_use, activity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["activity"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Unpaid work"},{"1":"Personal care"},{"1":"Leisure"},{"1":"Other"},{"1":"Paid work or study"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>We can similarly determine which countries are in our data, noting that this data does not represent the entire global population.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">distinct</span>(time_use, country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Australia"},{"1":"Austria"},{"1":"Belgium"},{"1":"Canada"},{"1":"Denmark"},{"1":"Finland"},{"1":"France"},{"1":"Germany"},{"1":"Greece"},{"1":"Hungary"},{"1":"Ireland"},{"1":"Italy"},{"1":"Japan"},{"1":"South Korea"},{"1":"Mexico"},{"1":"Netherlands"},{"1":"New Zealand"},{"1":"Norway"},{"1":"Poland"},{"1":"Portugal"},{"1":"Spain"},{"1":"Sweden"},{"1":"Turkey"},{"1":"United Kingdom"},{"1":"United States"},{"1":"China"},{"1":"Estonia"},{"1":"India"},{"1":"Latvia"},{"1":"Slovenia"},{"1":"South Africa"},{"1":"Luxembourg"},{"1":"Lithuania"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>If we look at the continents, we can see that there is even an entire continent omitted from our data: South America.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">distinct</span>(time_use, continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["continent"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Oceania"},{"1":"Europe"},{"1":"North America"},{"1":"Asia"},{"1":"Africa"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Our end goal is the following plot:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This plot shows the amount of time the average person in each OECD country spends in each of 5 activities. On the y, axis is the ratio of how much time women spend on that activity to how much time men spend on that activity (on average). There is a dashed, horizontal line at <span class="math inline">\(y=1\)</span> that indicates parity between the two genders. Each plot is a scatter plot with a black regression line and each point is colored and shaped according to the continent of the country it represents. The slope of the regression time tells us whether gender parity increases or decreases with increases in the time spent on the activity. For example, countries in which people do more unpaid work seem to have more gender parity in the amount of unpaid work men and women do.</p>
<section id="plotting-basics" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="plotting-basics"><span class="header-section-number">4.1</span> Plotting Basics</h2>
<p>The first step to making any plot is calling the <code>ggplot</code> function. If you look at the help page for the <code>ggplot</code> function (by typing <code>?ggplot</code> into an R console) , you will find that it takes 2 arguments: <code>data</code> and <code>mapping</code>. Ggplot expects that the <code>data</code> argument is going to be a data frame with tidy data in.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As you can see, <code>ggplot</code> creates an empty plot. Next, we will add a <code>mapping</code> argument. The mapping will tell ggplot which aesthetics (like the x-axis, y-axis, color, shape, etc.) will be represented by which variables in the data. In this case, we want the <code>time_spent</code> variable on the x-axis and the <code>women_to_men</code> variable on the y-axis, as they appear in the reference plot. When we call the <code>ggplot</code> while providing a <code>data</code> and a <code>mapping</code> argument, R will create a blank plot with axes.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As with any function in R, we do not need to write all of the arguments on a single line. We can separate the arguments onto different lines, as long as we make sure each line ends with a comma or the end parenthesis (i.e., the end of the function call). You may find that the following two code snippets are more readable than the one above, even though all three would produce the same output.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb8-2"><a href="#cb8-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="at">x =</span> time_spent,</span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="at">y =</span> women_to_men</span>
<span id="cb9-6"><a href="#cb9-6"></a>  )</span>
<span id="cb9-7"><a href="#cb9-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>To R, it does not matter whether you type this function call out in 1 line or in 7; it is the same arguments being passed to the same function and thus produces the same result.</p>
<section id="geoms" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="geoms"><span class="header-section-number">4.1.1</span> Geoms</h3>
<p>Our plot is missing something: can you spot it? There is no data on our plot! We represent data in a <code>ggplot</code> by using a <code>geom</code> function. Almost all of these functions start with <code>geom_</code> (like <code>geom_bar</code> or <code>geom_smooth</code>) or <code>stat_</code> (like <code>stat_count</code>). You can see a fuller list of the geom functions available on the <a href="https://www.maths.usyd.edu.au/u/UG/SM/STAT3022/r/current/Misc/data-visualization-2.1.pdf">ggplot2 cheat sheet</a>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb10-2"><a href="#cb10-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We add a geom by literally adding it (with the <code>+</code> operator) to the <code>ggplot</code> function call. The <code>+</code> always has to go at the end of the line. You can separate the functions by as many empty or commented lines as you’d like. You can also do this within function calls. So, this code will run:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb11-2"><a href="#cb11-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  </span>
<span id="cb11-4"><a href="#cb11-4"></a>  </span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="co"># this is a comment</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>  </span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>as will this code:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb12-2"><a href="#cb12-2"></a>       </span>
<span id="cb12-3"><a href="#cb12-3"></a>       <span class="co"># this is a comment</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>and if you wanted to be really verbose, you could even do something like this:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># create ggplot</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">ggplot</span>(</span>
<span id="cb13-3"><a href="#cb13-3"></a>  </span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="co"># add data to plot</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb13-6"><a href="#cb13-6"></a>  </span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="co"># create mapping</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb13-9"><a href="#cb13-9"></a>    <span class="co"># map x-axis</span></span>
<span id="cb13-10"><a href="#cb13-10"></a>    <span class="at">x =</span> time_spent,</span>
<span id="cb13-11"><a href="#cb13-11"></a>    <span class="co"># map y-axis</span></span>
<span id="cb13-12"><a href="#cb13-12"></a>    <span class="at">y =</span> women_to_men</span>
<span id="cb13-13"><a href="#cb13-13"></a>  )</span>
<span id="cb13-14"><a href="#cb13-14"></a>) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15"></a>  </span>
<span id="cb13-16"><a href="#cb13-16"></a>  <span class="co"># add scatterplot</span></span>
<span id="cb13-17"><a href="#cb13-17"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>What is the difference between a mapping and a style? A mapping connects one aesthetic to a variable, but a style just sets the aesthetic. For example, styling our scatter plot might mean turning all the points blue, whereas a mapping would match each activity to a color based on a scale. This is a graph that uses color as a style:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb14-2"><a href="#cb14-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>and this is a plot that uses color as a map:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb15-2"><a href="#cb15-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> activity))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You can put mappings in the <code>ggplot</code> function, or in any <code>geom</code> function. In the above code, the mapping for x and y is in the <code>ggplot</code> function, and the mapping for color is in the <code>geom_point</code> function.</p>
<p>Every geom will <strong>inherit</strong> the mapping from the <code>ggplot</code> function. If we added another geom to the plot, we could see this. In the plot below, I added the <code>geom_smooth</code>, and - as you can see - it inherits the x and the y aesthetic from the <code>ggplot</code> function, but it does not inherit the color argument from the <code>geom_point</code> function.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb16-2"><a href="#cb16-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> activity)) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If you wanted R to make differently colored smooth lines in this plot, you could add a color aesthetic to the <code>geom_smooth</code> function, or you could move the color aesthetic from the <code>geom_point</code> function to the <code>ggplot</code> function, thereby allowing the <code>geom_smooth</code> function to inherit a color aesthetic.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb18-2"><a href="#cb18-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, </span>
<span id="cb18-3"><a href="#cb18-3"></a>                     <span class="at">y =</span> women_to_men,</span>
<span id="cb18-4"><a href="#cb18-4"></a>                     <span class="at">color =</span> activity)) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s do a little investigating with just the <code>geom_smooth</code> function.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb20-2"><a href="#cb20-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We used the <code>color</code> aesthetic to make separate lines above, but we didn’t need to. We can also use the <code>group</code> or <code>linetype</code> arguments to create separate lines</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb22-2"><a href="#cb22-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> activity))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb24-2"><a href="#cb24-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">linetype =</span> activity))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can change the data supplied to <code>geom_smooth</code> to draw only one line:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb26-2"><a href="#cb26-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(time_use, activity <span class="sc">==</span> <span class="st">"Unpaid work"</span>),</span>
<span id="cb26-5"><a href="#cb26-5"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> activity))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You should use the help page (<code>?geom_smooth</code>) to read more about the aesthetics and arguments the function can take. I will only highlight two more: <code>method</code>, and <code>se</code>. I frequently find myself favoring a linear regression line (rather than the default which uses the <a href="https://en.wikipedia.org/wiki/Local_regression">LOESS smoothing function</a> (a type of local, polynomial regression). You can get a straight line by changing the <code>method</code> argument to “lm”. The <code>se</code> argument can be set to <code>T</code> or <code>TRUE</code> or <code>F</code> or <code>FALSE</code>, and it controls whether the plot includes an gray error area.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb28-2"><a href="#cb28-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> activity), </span>
<span id="cb28-4"><a href="#cb28-4"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb28-5"><a href="#cb28-5"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>On a completely separate note, you use a very similar process of setting the <code>data</code> and <code>mapping</code> arguments to make a bar chart. Ggplot makes a distinction between a bar chart and a column chart (even though they can appear to be identical). A bar chart has a single, discrete aesthetic mapping (like one that maps x to continent).</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">distinct</span>(time_use, country, continent),</span>
<span id="cb30-2"><a href="#cb30-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent)) <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A column chart takes 2 mappings: a discrete <code>x</code> aesthetic (like <code>activity</code>) and a continuous <code>y</code> aesthetic (like <code>time_spent</code>).</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, </span>
<span id="cb31-4"><a href="#cb31-4"></a>                <span class="at">y =</span> time_spent,</span>
<span id="cb31-5"><a href="#cb31-5"></a>                <span class="at">color =</span> activity)</span>
<span id="cb31-6"><a href="#cb31-6"></a>) <span class="sc">+</span></span>
<span id="cb31-7"><a href="#cb31-7"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Bar charts are a great example of the difference between the <code>color</code> and the <code>fill</code> aesthetics. Points and lines have only colors, but bars and columns (and other geoms, like density plots) have fills, as well. Let’s fix the last plot.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb32-3"><a href="#cb32-3"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, </span>
<span id="cb32-4"><a href="#cb32-4"></a>                <span class="at">y =</span> time_spent,</span>
<span id="cb32-5"><a href="#cb32-5"></a>                <span class="at">fill =</span> activity)</span>
<span id="cb32-6"><a href="#cb32-6"></a>) <span class="sc">+</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This plot does not provide a helpful comparison of the time use in OECD countries across various continents because all of the columns have a different height. In reality, we would like all of the columns to be the same height so we can compare proportions. We can do this using the <code>position</code> argument</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, </span>
<span id="cb33-4"><a href="#cb33-4"></a>                <span class="at">y =</span> time_spent,</span>
<span id="cb33-5"><a href="#cb33-5"></a>                <span class="at">fill =</span> activity)</span>
<span id="cb33-6"><a href="#cb33-6"></a>) <span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"fill"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This is a better plot to view the differences in OECD time use across continents. However, there is (again) very limited data for several continents which are either missed (i.e., most of Africa, Oceania, South America, and Asia) or have only very few countries (i.e., North America)</p>
</section>
<section id="faceting" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="faceting"><span class="header-section-number">4.1.2</span> Faceting</h3>
<p>Using just the <code>ggplot</code> function and a few <code>geom</code> functions, we can get damn near the reference plots we started with.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co"># initialize plot and axes</span></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb34-3"><a href="#cb34-3"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb34-4"><a href="#cb34-4"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5"></a>  </span>
<span id="cb34-6"><a href="#cb34-6"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb34-7"><a href="#cb34-7"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb34-8"><a href="#cb34-8"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb34-9"><a href="#cb34-9"></a>  </span>
<span id="cb34-10"><a href="#cb34-10"></a>  <span class="co"># add black regression line</span></span>
<span id="cb34-11"><a href="#cb34-11"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb34-12"><a href="#cb34-12"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb34-13"><a href="#cb34-13"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb34-14"><a href="#cb34-14"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb34-15"><a href="#cb34-15"></a>  </span>
<span id="cb34-16"><a href="#cb34-16"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb34-17"><a href="#cb34-17"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb34-18"><a href="#cb34-18"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Faceting is tricky to explain in words, but it’s very easy to understand if you can see it.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="co"># initialize plot and axes</span></span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb36-3"><a href="#cb36-3"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb36-4"><a href="#cb36-4"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5"></a>  </span>
<span id="cb36-6"><a href="#cb36-6"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb36-7"><a href="#cb36-7"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb36-8"><a href="#cb36-8"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb36-9"><a href="#cb36-9"></a>  </span>
<span id="cb36-10"><a href="#cb36-10"></a>  <span class="co"># add black regression line</span></span>
<span id="cb36-11"><a href="#cb36-11"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb36-12"><a href="#cb36-12"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb36-13"><a href="#cb36-13"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb36-14"><a href="#cb36-14"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-15"><a href="#cb36-15"></a>  </span>
<span id="cb36-16"><a href="#cb36-16"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb36-17"><a href="#cb36-17"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb36-18"><a href="#cb36-18"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb36-19"><a href="#cb36-19"></a>  </span>
<span id="cb36-20"><a href="#cb36-20"></a>  <span class="co"># add a facet - activity</span></span>
<span id="cb36-21"><a href="#cb36-21"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>activity, </span>
<span id="cb36-22"><a href="#cb36-22"></a>             <span class="at">nrow =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are two faceting functions: <code>facet_wrap</code> and <code>facet_grid</code>. Both have a <code>scales</code> argument, which is set as “fixed” by default. You can change it to:</p>
<ul>
<li><p>“free_x” to allow the x axes to have different limits in the different plots</p></li>
<li><p>“free_y” to do the same for the y axes</p></li>
<li><p>“free” to have both axes take different limits for each separate plot</p></li>
</ul>
<p>In this case, we’ll just set the <code>scales</code> argument to <code>"free"</code> so that all of the data aren’t packed so tightly.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># initialize plot and axes</span></span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb38-3"><a href="#cb38-3"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb38-4"><a href="#cb38-4"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5"></a>  </span>
<span id="cb38-6"><a href="#cb38-6"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb38-7"><a href="#cb38-7"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb38-8"><a href="#cb38-8"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb38-9"><a href="#cb38-9"></a>  </span>
<span id="cb38-10"><a href="#cb38-10"></a>  <span class="co"># add black regression line</span></span>
<span id="cb38-11"><a href="#cb38-11"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb38-12"><a href="#cb38-12"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb38-13"><a href="#cb38-13"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb38-14"><a href="#cb38-14"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb38-15"><a href="#cb38-15"></a>  </span>
<span id="cb38-16"><a href="#cb38-16"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb38-17"><a href="#cb38-17"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb38-18"><a href="#cb38-18"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb38-19"><a href="#cb38-19"></a>  </span>
<span id="cb38-20"><a href="#cb38-20"></a>  <span class="co"># add a facet - activity</span></span>
<span id="cb38-21"><a href="#cb38-21"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>activity, </span>
<span id="cb38-22"><a href="#cb38-22"></a>             <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb38-23"><a href="#cb38-23"></a>             <span class="at">scales =</span> <span class="st">"free"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>facet_grid</code> is helpful if you would like to facet on two (discrete!) variables at once (like activity and continent in the plot below).</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="co"># initialize plot and axes</span></span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb40-3"><a href="#cb40-3"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb40-4"><a href="#cb40-4"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5"></a>  </span>
<span id="cb40-6"><a href="#cb40-6"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb40-7"><a href="#cb40-7"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb40-8"><a href="#cb40-8"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb40-9"><a href="#cb40-9"></a>  </span>
<span id="cb40-10"><a href="#cb40-10"></a>  <span class="co"># add black regression line</span></span>
<span id="cb40-11"><a href="#cb40-11"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb40-12"><a href="#cb40-12"></a>              <span class="at">size =</span> <span class="fl">0.5</span>,</span>
<span id="cb40-13"><a href="#cb40-13"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb40-14"><a href="#cb40-14"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb40-15"><a href="#cb40-15"></a>  </span>
<span id="cb40-16"><a href="#cb40-16"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb40-17"><a href="#cb40-17"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb40-18"><a href="#cb40-18"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb40-19"><a href="#cb40-19"></a>  </span>
<span id="cb40-20"><a href="#cb40-20"></a>  <span class="co"># add a facet - activity</span></span>
<span id="cb40-21"><a href="#cb40-21"></a>  <span class="fu">facet_grid</span>(continent <span class="sc">~</span> activity, </span>
<span id="cb40-22"><a href="#cb40-22"></a>             <span class="at">scales =</span> <span class="st">"free"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>With so few data, such extensive faceting is neither informative nor helpful, so we’ll stick with just one facet: <code>activity</code>.</p>
</section>
</section>
<section id="plot-styling" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="plot-styling"><span class="header-section-number">4.2</span> Plot Styling</h2>
<p>Our current plot is beginning to look very similar to the reference plot we were attempting to recreate. We have written 23 lines so far. To save space, I am going to save the plot that we currently have under the name <code>p</code>. When we call <code>p</code>, R will make the plot. We can also add things to <code>p</code>, just as we added them to the <code>ggplot</code> function.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="co"># save ggplot object under the name "p"</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb42-3"><a href="#cb42-3"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb42-4"><a href="#cb42-4"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb42-5"><a href="#cb42-5"></a>  </span>
<span id="cb42-6"><a href="#cb42-6"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb42-7"><a href="#cb42-7"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb42-8"><a href="#cb42-8"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9"></a>  </span>
<span id="cb42-10"><a href="#cb42-10"></a>  <span class="co"># add black regression line</span></span>
<span id="cb42-11"><a href="#cb42-11"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb42-12"><a href="#cb42-12"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb42-13"><a href="#cb42-13"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb42-14"><a href="#cb42-14"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb42-15"><a href="#cb42-15"></a>  </span>
<span id="cb42-16"><a href="#cb42-16"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb42-17"><a href="#cb42-17"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb42-18"><a href="#cb42-18"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb42-19"><a href="#cb42-19"></a>  </span>
<span id="cb42-20"><a href="#cb42-20"></a>  <span class="co"># add a facet - activity</span></span>
<span id="cb42-21"><a href="#cb42-21"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>activity, </span>
<span id="cb42-22"><a href="#cb42-22"></a>             <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb42-23"><a href="#cb42-23"></a>             <span class="at">scales =</span> <span class="st">"free"</span>)</span>
<span id="cb42-24"><a href="#cb42-24"></a></span>
<span id="cb42-25"><a href="#cb42-25"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="labels" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="labels"><span class="header-section-number">4.2.1</span> Labels</h3>
<p>By default, <code>ggplot</code> does not create a title or subtitle for the plot, and it uses the names of the variables for the axes and scales (i.e., color scale in our plot). The <code>labs</code> function allows you to update various text elements in the plot.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Gender Parity in Time Spent in OECD Nations"</span>,</span>
<span id="cb44-2"><a href="#cb44-2"></a>         <span class="at">subtitle =</span> <span class="st">"ATTN: all plots on different axes"</span>,</span>
<span id="cb44-3"><a href="#cb44-3"></a>         <span class="at">x =</span> <span class="st">"time spent (minutes per day)"</span>,</span>
<span id="cb44-4"><a href="#cb44-4"></a>         <span class="at">y =</span> <span class="st">"ratio of women's time spent to men's"</span>)</span>
<span id="cb44-5"><a href="#cb44-5"></a></span>
<span id="cb44-6"><a href="#cb44-6"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Adding labels to the outside of your plot is as simple as that. You could also use labels as a geom using the <code>geom_text</code> function. It takes an additional aesthetic, <code>label</code> that we have not yet seen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">filter</span>(time_use, activity <span class="sc">==</span> <span class="st">"Unpaid work"</span>),</span>
<span id="cb46-2"><a href="#cb46-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb46-3"><a href="#cb46-3"></a>                     <span class="at">y =</span> women_to_men,</span>
<span id="cb46-4"><a href="#cb46-4"></a>                     <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb46-5"><a href="#cb46-5"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> country))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scales-and-coordinates" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="scales-and-coordinates"><span class="header-section-number">4.2.2</span> Scales and Coordinates</h3>
<p>Our plot is different from the reference plot in which colors it uses. The reference plot uses black, orange, blue, green, and yellow; but, ours uses red, beige, green, blue, and purple. What gives? The reference plot uses a different color scale than does our plot. The color scale is the part of the plot that matches each continent to a unique color. The reference plot uses a color scale from the <code>ggthemes</code> package that is colorblind friendly.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>()</span>
<span id="cb47-2"><a href="#cb47-2"></a></span>
<span id="cb47-3"><a href="#cb47-3"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>scales also control the x and y axes, specifically continuous scales. We can use a <code>scale</code> function to set the limits or breaks for the axes. In our case, this allows us to demonstrate how much larger the gender disparity appears to be for unpaid work rather than for any of the other (measured) uses of time.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>p <span class="sc">+</span> </span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">7</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">3.5</span>, <span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>we can use scale functions to add transformations, as well. There are functions like <code>scale_x_sqrt</code> and <code>scale_x_log10</code> that put the data on square root or log axes. Our time use data is not a great example of the utility of these types of axes. Instead, look at this data about coffee production:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>coffee_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> coffee,</span>
<span id="cb51-2"><a href="#cb51-2"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> pounds,</span>
<span id="cb51-3"><a href="#cb51-3"></a>                     <span class="at">y =</span> pop_2019)) <span class="sc">+</span></span>
<span id="cb51-4"><a href="#cb51-4"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> country)) <span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"pounds of coffee produced in 2019"</span>,</span>
<span id="cb51-6"><a href="#cb51-6"></a>       <span class="at">y =</span> <span class="st">"population in 2019"</span>) <span class="sc">+</span></span>
<span id="cb51-7"><a href="#cb51-7"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span>
<span id="cb51-8"><a href="#cb51-8"></a></span>
<span id="cb51-9"><a href="#cb51-9"></a>coffee_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The coffee data is dominated by small producers - with many populations and productions below 10 million people and pounds. The relationship between the variables is obscured by the clumping of data, which is caused by the massive outliers of Brazil (massive production) and India (massive population). A log-log plot (with log axes on the x and y) reveals a different perspective on this data. You must be careful, however, because log axes are not incredibly easy for most people to read, and the essentially everyone (including those that can read log-log scales) expects the scales on a plot to be linear unless explicitly warned otherwise.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>coffee_plot <span class="sc">+</span> </span>
<span id="cb53-2"><a href="#cb53-2"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3"></a>  <span class="fu">scale_y_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are many more transformations the <code>scale</code> functions can perform (like a boxcox, or logit transform), and you can see a fuller list in the documentation of the <code>scale_x_continuous</code> function (or any of the continuous scale functions). Okay; bye, coffee data!</p>
<p>We can finally use <code>scales</code> functions to control the labels on the axes. I find this is particularly helpful if you have percentages on one axis. We have a proportion, which can be represented as a percentage.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>())</span>
<span id="cb55-2"><a href="#cb55-2"></a></span>
<span id="cb55-3"><a href="#cb55-3"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="themes" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="themes"><span class="header-section-number">4.2.3</span> Themes</h3>
<p>The plot we have still doesn’t look quite like the reference plot we aimed toward. This can be explained by a difference in theme. The reference plot uses the minimal theme, whereas ours uses the default theme. We can “fix” that by using the <code>theme_minimal</code> function.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a>p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You can see the other default themes by seeing the help page for <code>theme_minimal</code> (i.e., <code>?theme_minimal</code>, which is also the help page for the other built-in ggplot themes). My other favorite is <code>theme_classic</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>p <span class="sc">+</span> <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I also use <code>theme_void</code>, but typically only when making pie charts. <code>theme_void</code> removes most of the elements in the plot, including the x and y axes and gridlines.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a>p <span class="sc">+</span> <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="guides-legends-and-text" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="guides-legends-and-text"><span class="header-section-number">4.2.4</span> Guides, Legends, and Text</h3>
<p>Although it makes no sense not to have it in this case, there are some cases in which you would like to remove the legend, which appears to the right of the plot by default. There are two ways to do this, using <code>guides</code> or using <code>theme</code>.</p>
<p><code>guides</code> is a function that is occasionally helpful for specifying which type of scale variables should be mapped to. You could set the guide to the color and/or shape arguments to “none” to remove one or both aspects of the legend.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>p <span class="sc">+</span> <span class="fu">guides</span>(</span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="at">color =</span> <span class="st">"none"</span></span>
<span id="cb64-3"><a href="#cb64-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You could also remove the legend, instead of removing variables from the legend. You would do this using the <code>legend.position</code> argument in the <code>theme</code> function.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You could also move the legend around using the <code>legend.position</code> argument.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb68-2"><a href="#cb68-2"></a></span>
<span id="cb68-3"><a href="#cb68-3"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Finally, you can use the <code>theme</code> function to make really specific changes to the plot, like changing the angle of the numbers of the y-axis</p>
<div class="cell">
<details open="" class="code-fold">
<summary>show code for this result</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">30</span>),</span>
<span id="cb70-2"><a href="#cb70-2"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04_visualization_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-wickhamDataVisualization2023" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. 2023. <span>“Data Visualization.”</span> In <em>R for <span>Data Science</span></em>, 2nd ed. <a href="https://r4ds.hadley.nz/data-visualize">https://r4ds.hadley.nz/data-visualize</a>.
</div>
<div id="ref-wickhamDataVisualization2017" class="csl-entry" role="listitem">
Wickham, Hadley, and Garrett Grolemund. 2017. <span>“Data Visualization.”</span> In <em>R for <span>Data Science</span></em>, 1st ed. <a href="https://r4ds.had.co.nz/data-visualisation.html">https://r4ds.had.co.nz/data-visualisation.html</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03_r_101.html" class="pagination-link" aria-label="R 101">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R 101</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./0R_references.html" class="pagination-link" aria-label="References">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb72" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb72-1"><a href="#cb72-1"></a><span class="fu"># Visualization</span></span>
<span id="cb72-2"><a href="#cb72-2"></a></span>
<span id="cb72-3"><a href="#cb72-3"></a><span class="in">```{r setup}</span></span>
<span id="cb72-4"><a href="#cb72-4"></a><span class="in">#| echo: FALSE</span></span>
<span id="cb72-5"><a href="#cb72-5"></a><span class="in">#| include: FALSE</span></span>
<span id="cb72-6"><a href="#cb72-6"></a></span>
<span id="cb72-7"><a href="#cb72-7"></a><span class="in">library(tidyverse)</span></span>
<span id="cb72-8"><a href="#cb72-8"></a></span>
<span id="cb72-9"><a href="#cb72-9"></a><span class="in">knitr::opts_chunk$set(warning = FALSE)</span></span>
<span id="cb72-10"><a href="#cb72-10"></a></span>
<span id="cb72-11"><a href="#cb72-11"></a><span class="in">iris &lt;- iris |&gt; janitor::clean_names()</span></span>
<span id="cb72-12"><a href="#cb72-12"></a></span>
<span id="cb72-13"><a href="#cb72-13"></a><span class="in">time_use &lt;- read_csv("data/time_use_cleaned.csv")</span></span>
<span id="cb72-14"><a href="#cb72-14"></a></span>
<span id="cb72-15"><a href="#cb72-15"></a><span class="in"># from wikimedia: https://en.wikipedia.org/wiki/List_of_countries_by_coffee_production</span></span>
<span id="cb72-16"><a href="#cb72-16"></a><span class="in">coffee &lt;- read_csv("data/countries_by_coffee_production.csv") |&gt; </span></span>
<span id="cb72-17"><a href="#cb72-17"></a><span class="in">  select(Country, Pounds) |&gt; </span></span>
<span id="cb72-18"><a href="#cb72-18"></a><span class="in">  janitor::clean_names()</span></span>
<span id="cb72-19"><a href="#cb72-19"></a></span>
<span id="cb72-20"><a href="#cb72-20"></a><span class="in"># from worldbank: https://databank.worldbank.org/reports.aspx?source=2&amp;series=SP.POP.TOTL&amp;country=WLD#</span></span>
<span id="cb72-21"><a href="#cb72-21"></a><span class="in">pop &lt;- read_csv("data/2019_world_bank_pop.csv") |&gt; </span></span>
<span id="cb72-22"><a href="#cb72-22"></a><span class="in">  select(`Country Name`, `2019 [YR2019]`) |&gt; </span></span>
<span id="cb72-23"><a href="#cb72-23"></a><span class="in">  rename(country = `Country Name`,</span></span>
<span id="cb72-24"><a href="#cb72-24"></a><span class="in">         pop_2019 = `2019 [YR2019]`)</span></span>
<span id="cb72-25"><a href="#cb72-25"></a></span>
<span id="cb72-26"><a href="#cb72-26"></a><span class="in">coffee &lt;- inner_join(coffee, pop, by = "country") |&gt; </span></span>
<span id="cb72-27"><a href="#cb72-27"></a><span class="in">  mutate(pop_2019 = as.integer(pop_2019))</span></span>
<span id="cb72-28"><a href="#cb72-28"></a><span class="in">```</span></span>
<span id="cb72-29"><a href="#cb72-29"></a></span>
<span id="cb72-30"><a href="#cb72-30"></a>Tidy data has the following characteristics:</span>
<span id="cb72-31"><a href="#cb72-31"></a></span>
<span id="cb72-32"><a href="#cb72-32"></a><span class="ss">-   </span>every column represents one variable</span>
<span id="cb72-33"><a href="#cb72-33"></a></span>
<span id="cb72-34"><a href="#cb72-34"></a><span class="ss">-   </span>every row represents one observation</span>
<span id="cb72-35"><a href="#cb72-35"></a></span>
<span id="cb72-36"><a href="#cb72-36"></a><span class="ss">-   </span>every cell has one value</span>
<span id="cb72-37"><a href="#cb72-37"></a></span>
<span id="cb72-38"><a href="#cb72-38"></a>We will soon return to the process of "tidying" non-tidy data, but we will begin with tidy data as a given. This chapter is definitely inspired by and roughly based on other chapters, specifically <span class="co">[</span><span class="ot">@wickhamDataVisualization2017</span><span class="co">]</span> and <span class="co">[</span><span class="ot">@wickhamDataVisualization2023</span><span class="co">]</span>. If you would like to solidify the lessons from this chapter, I strongly suggest reviewing (and writing out the code from) those two chapters, as well; they contain the same ideas, but make use of different data.</span>
<span id="cb72-39"><a href="#cb72-39"></a></span>
<span id="cb72-40"><a href="#cb72-40"></a>We will be looking at <span class="co">[</span><span class="ot">data from the OECD</span><span class="co">](https://stats.oecd.org/Index.aspx?DataSetCode=TIME_USE)</span>about how people in 33 countries spend their time. We will making plots with this data, but first I have to explain what it is.</span>
<span id="cb72-41"><a href="#cb72-41"></a></span>
<span id="cb72-44"><a href="#cb72-44"></a><span class="in">```{r}</span></span>
<span id="cb72-45"><a href="#cb72-45"></a><span class="fu">glimpse</span>(time_use)</span>
<span id="cb72-46"><a href="#cb72-46"></a><span class="in">```</span></span>
<span id="cb72-47"><a href="#cb72-47"></a></span>
<span id="cb72-48"><a href="#cb72-48"></a>The data contains five variables (columns). <span class="in">`country`</span>, <span class="in">`continent`</span>, and <span class="in">`activity`</span> are relatively self explanatory, as is <span class="in">`women_to_men`</span> which is the ratio of how much time women spend on the <span class="in">`activity`</span> to how much time men spend. <span class="in">`time_spent`</span> is the number of minutes the average person in <span class="in">`country`</span> spends, per minutes per day, on the <span class="in">`activity`</span>.</span>
<span id="cb72-49"><a href="#cb72-49"></a></span>
<span id="cb72-50"><a href="#cb72-50"></a>Categorical data, like <span class="in">`activity`</span>, <span class="in">`country`</span>, or <span class="in">`continent`</span>, are likely to spawn different questions than numerical data, like <span class="in">`time_spent`</span>, or <span class="in">`women_to_men`</span>. The first question I have about this data is what activities are represented? We can use the <span class="in">`distinct`</span> function to answer this question</span>
<span id="cb72-51"><a href="#cb72-51"></a></span>
<span id="cb72-54"><a href="#cb72-54"></a><span class="in">```{r}</span></span>
<span id="cb72-55"><a href="#cb72-55"></a><span class="fu">distinct</span>(time_use, activity)</span>
<span id="cb72-56"><a href="#cb72-56"></a><span class="in">```</span></span>
<span id="cb72-57"><a href="#cb72-57"></a></span>
<span id="cb72-58"><a href="#cb72-58"></a>We can similarly determine which countries are in our data, noting that this data does not represent the entire global population.</span>
<span id="cb72-59"><a href="#cb72-59"></a></span>
<span id="cb72-62"><a href="#cb72-62"></a><span class="in">```{r}</span></span>
<span id="cb72-63"><a href="#cb72-63"></a><span class="fu">distinct</span>(time_use, country)</span>
<span id="cb72-64"><a href="#cb72-64"></a><span class="in">```</span></span>
<span id="cb72-65"><a href="#cb72-65"></a></span>
<span id="cb72-66"><a href="#cb72-66"></a>If we look at the continents, we can see that there is even an entire continent omitted from our data: South America.</span>
<span id="cb72-67"><a href="#cb72-67"></a></span>
<span id="cb72-70"><a href="#cb72-70"></a><span class="in">```{r}</span></span>
<span id="cb72-71"><a href="#cb72-71"></a><span class="fu">distinct</span>(time_use, continent)</span>
<span id="cb72-72"><a href="#cb72-72"></a><span class="in">```</span></span>
<span id="cb72-73"><a href="#cb72-73"></a></span>
<span id="cb72-74"><a href="#cb72-74"></a>Our end goal is the following plot:</span>
<span id="cb72-75"><a href="#cb72-75"></a></span>
<span id="cb72-78"><a href="#cb72-78"></a><span class="in">```{r}</span></span>
<span id="cb72-79"><a href="#cb72-79"></a><span class="co">#| warning: FALSE</span></span>
<span id="cb72-80"><a href="#cb72-80"></a><span class="co">#| echo: FALSE</span></span>
<span id="cb72-81"><a href="#cb72-81"></a><span class="fu">ggplot</span>(</span>
<span id="cb72-82"><a href="#cb72-82"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb72-83"><a href="#cb72-83"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb72-84"><a href="#cb72-84"></a>                <span class="at">y =</span> women_to_men)</span>
<span id="cb72-85"><a href="#cb72-85"></a>) <span class="sc">+</span></span>
<span id="cb72-86"><a href="#cb72-86"></a>  <span class="co"># add data</span></span>
<span id="cb72-87"><a href="#cb72-87"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb72-88"><a href="#cb72-88"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-89"><a href="#cb72-89"></a>  <span class="co"># add regression line</span></span>
<span id="cb72-90"><a href="#cb72-90"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> activity),</span>
<span id="cb72-91"><a href="#cb72-91"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb72-92"><a href="#cb72-92"></a>              <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb72-93"><a href="#cb72-93"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb72-94"><a href="#cb72-94"></a>              <span class="at">se=</span>F) <span class="sc">+</span></span>
<span id="cb72-95"><a href="#cb72-95"></a>  <span class="co"># add line to indicate gender parity</span></span>
<span id="cb72-96"><a href="#cb72-96"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb72-97"><a href="#cb72-97"></a>  <span class="co"># separate plots by activity</span></span>
<span id="cb72-98"><a href="#cb72-98"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> activity,</span>
<span id="cb72-99"><a href="#cb72-99"></a>             <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb72-100"><a href="#cb72-100"></a>             <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb72-101"><a href="#cb72-101"></a>  <span class="co"># add labels</span></span>
<span id="cb72-102"><a href="#cb72-102"></a>  <span class="fu">labs</span>(</span>
<span id="cb72-103"><a href="#cb72-103"></a>    <span class="at">title =</span> <span class="st">"Gender Parity in Time Spent in OECD Nations"</span>,</span>
<span id="cb72-104"><a href="#cb72-104"></a>    <span class="at">subtitle =</span> <span class="st">"ATTN: all plots on different axes"</span>,</span>
<span id="cb72-105"><a href="#cb72-105"></a>    <span class="at">x =</span> <span class="st">"time spent (minutes per day)"</span>,</span>
<span id="cb72-106"><a href="#cb72-106"></a>    <span class="at">y =</span> <span class="st">"ratio of women's time spent to men's"</span></span>
<span id="cb72-107"><a href="#cb72-107"></a>  ) <span class="sc">+</span></span>
<span id="cb72-108"><a href="#cb72-108"></a>  <span class="co"># add friendly colorscale</span></span>
<span id="cb72-109"><a href="#cb72-109"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb72-110"><a href="#cb72-110"></a>  <span class="co"># add theme</span></span>
<span id="cb72-111"><a href="#cb72-111"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb72-112"><a href="#cb72-112"></a><span class="in">```</span></span>
<span id="cb72-113"><a href="#cb72-113"></a></span>
<span id="cb72-114"><a href="#cb72-114"></a>This plot shows the amount of time the average person in each OECD country spends in each of 5 activities. On the y, axis is the ratio of how much time women spend on that activity to how much time men spend on that activity (on average). There is a dashed, horizontal line at $y=1$ that indicates parity between the two genders. Each plot is a scatter plot with a black regression line and each point is colored and shaped according to the continent of the country it represents. The slope of the regression time tells us whether gender parity increases or decreases with increases in the time spent on the activity. For example, countries in which people do more unpaid work seem to have more gender parity in the amount of unpaid work men and women do.</span>
<span id="cb72-115"><a href="#cb72-115"></a></span>
<span id="cb72-116"><a href="#cb72-116"></a><span class="fu">## Plotting Basics</span></span>
<span id="cb72-117"><a href="#cb72-117"></a></span>
<span id="cb72-118"><a href="#cb72-118"></a>The first step to making any plot is calling the <span class="in">`ggplot`</span> function. If you look at the help page for the <span class="in">`ggplot`</span> function (by typing <span class="in">`?ggplot`</span> into an R console) , you will find that it takes 2 arguments: <span class="in">`data`</span> and <span class="in">`mapping`</span>. Ggplot expects that the <span class="in">`data`</span> argument is going to be a data frame with tidy data in.</span>
<span id="cb72-119"><a href="#cb72-119"></a></span>
<span id="cb72-122"><a href="#cb72-122"></a><span class="in">```{r}</span></span>
<span id="cb72-123"><a href="#cb72-123"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use)</span>
<span id="cb72-124"><a href="#cb72-124"></a><span class="in">```</span></span>
<span id="cb72-125"><a href="#cb72-125"></a></span>
<span id="cb72-126"><a href="#cb72-126"></a>As you can see, <span class="in">`ggplot`</span> creates an empty plot. Next, we will add a <span class="in">`mapping`</span> argument. The mapping will tell ggplot which aesthetics (like the x-axis, y-axis, color, shape, etc.) will be represented by which variables in the data. In this case, we want the <span class="in">`time_spent`</span> variable on the x-axis and the <span class="in">`women_to_men`</span> variable on the y-axis, as they appear in the reference plot. When we call the <span class="in">`ggplot`</span> while providing a <span class="in">`data`</span> and a <span class="in">`mapping`</span> argument, R will create a blank plot with axes.</span>
<span id="cb72-127"><a href="#cb72-127"></a></span>
<span id="cb72-130"><a href="#cb72-130"></a><span class="in">```{r}</span></span>
<span id="cb72-131"><a href="#cb72-131"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men))</span>
<span id="cb72-132"><a href="#cb72-132"></a><span class="in">```</span></span>
<span id="cb72-133"><a href="#cb72-133"></a></span>
<span id="cb72-134"><a href="#cb72-134"></a>As with any function in R, we do not need to write all of the arguments on a single line. We can separate the arguments onto different lines, as long as we make sure each line ends with a comma or the end parenthesis (i.e., the end of the function call). You may find that the following two code snippets are more readable than the one above, even though all three would produce the same output.</span>
<span id="cb72-135"><a href="#cb72-135"></a></span>
<span id="cb72-138"><a href="#cb72-138"></a><span class="in">```{r}</span></span>
<span id="cb72-139"><a href="#cb72-139"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb72-140"><a href="#cb72-140"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-141"><a href="#cb72-141"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men))</span>
<span id="cb72-142"><a href="#cb72-142"></a><span class="in">```</span></span>
<span id="cb72-143"><a href="#cb72-143"></a></span>
<span id="cb72-146"><a href="#cb72-146"></a><span class="in">```{r}</span></span>
<span id="cb72-147"><a href="#cb72-147"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb72-148"><a href="#cb72-148"></a><span class="fu">ggplot</span>(</span>
<span id="cb72-149"><a href="#cb72-149"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb72-150"><a href="#cb72-150"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb72-151"><a href="#cb72-151"></a>    <span class="at">x =</span> time_spent,</span>
<span id="cb72-152"><a href="#cb72-152"></a>    <span class="at">y =</span> women_to_men</span>
<span id="cb72-153"><a href="#cb72-153"></a>  )</span>
<span id="cb72-154"><a href="#cb72-154"></a>)</span>
<span id="cb72-155"><a href="#cb72-155"></a><span class="in">```</span></span>
<span id="cb72-156"><a href="#cb72-156"></a></span>
<span id="cb72-157"><a href="#cb72-157"></a>To R, it does not matter whether you type this function call out in 1 line or in 7; it is the same arguments being passed to the same function and thus produces the same result.</span>
<span id="cb72-158"><a href="#cb72-158"></a></span>
<span id="cb72-159"><a href="#cb72-159"></a><span class="fu">### Geoms</span></span>
<span id="cb72-160"><a href="#cb72-160"></a></span>
<span id="cb72-161"><a href="#cb72-161"></a>Our plot is missing something: can you spot it? There is no data on our plot! We represent data in a <span class="in">`ggplot`</span> by using a <span class="in">`geom`</span> function. Almost all of these functions start with <span class="in">`geom_`</span> (like <span class="in">`geom_bar`</span> or <span class="in">`geom_smooth`</span>) or <span class="in">`stat_`</span> (like <span class="in">`stat_count`</span>). You can see a fuller list of the geom functions available on the <span class="co">[</span><span class="ot">ggplot2 cheat sheet</span><span class="co">](https://www.maths.usyd.edu.au/u/UG/SM/STAT3022/r/current/Misc/data-visualization-2.1.pdf)</span>.</span>
<span id="cb72-162"><a href="#cb72-162"></a></span>
<span id="cb72-165"><a href="#cb72-165"></a><span class="in">```{r}</span></span>
<span id="cb72-166"><a href="#cb72-166"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-167"><a href="#cb72-167"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-168"><a href="#cb72-168"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb72-169"><a href="#cb72-169"></a><span class="in">```</span></span>
<span id="cb72-170"><a href="#cb72-170"></a></span>
<span id="cb72-171"><a href="#cb72-171"></a>We add a geom by literally adding it (with the <span class="in">`+`</span> operator) to the <span class="in">`ggplot`</span> function call. The <span class="in">`+`</span> always has to go at the end of the line. You can separate the functions by as many empty or commented lines as you'd like. You can also do this within function calls. So, this code will run:</span>
<span id="cb72-172"><a href="#cb72-172"></a></span>
<span id="cb72-175"><a href="#cb72-175"></a><span class="in">```{r}</span></span>
<span id="cb72-176"><a href="#cb72-176"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-177"><a href="#cb72-177"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-178"><a href="#cb72-178"></a>  </span>
<span id="cb72-179"><a href="#cb72-179"></a>  </span>
<span id="cb72-180"><a href="#cb72-180"></a>  <span class="co"># this is a comment</span></span>
<span id="cb72-181"><a href="#cb72-181"></a>  </span>
<span id="cb72-182"><a href="#cb72-182"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb72-183"><a href="#cb72-183"></a><span class="in">```</span></span>
<span id="cb72-184"><a href="#cb72-184"></a></span>
<span id="cb72-185"><a href="#cb72-185"></a>as will this code:</span>
<span id="cb72-186"><a href="#cb72-186"></a></span>
<span id="cb72-189"><a href="#cb72-189"></a><span class="in">```{r}</span></span>
<span id="cb72-190"><a href="#cb72-190"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-191"><a href="#cb72-191"></a>       </span>
<span id="cb72-192"><a href="#cb72-192"></a>       <span class="co"># this is a comment</span></span>
<span id="cb72-193"><a href="#cb72-193"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-194"><a href="#cb72-194"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb72-195"><a href="#cb72-195"></a><span class="in">```</span></span>
<span id="cb72-196"><a href="#cb72-196"></a></span>
<span id="cb72-197"><a href="#cb72-197"></a>and if you wanted to be really verbose, you could even do something like this:</span>
<span id="cb72-198"><a href="#cb72-198"></a></span>
<span id="cb72-201"><a href="#cb72-201"></a><span class="in">```{r}</span></span>
<span id="cb72-202"><a href="#cb72-202"></a><span class="co"># create ggplot</span></span>
<span id="cb72-203"><a href="#cb72-203"></a><span class="fu">ggplot</span>(</span>
<span id="cb72-204"><a href="#cb72-204"></a>  </span>
<span id="cb72-205"><a href="#cb72-205"></a>  <span class="co"># add data to plot</span></span>
<span id="cb72-206"><a href="#cb72-206"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb72-207"><a href="#cb72-207"></a>  </span>
<span id="cb72-208"><a href="#cb72-208"></a>  <span class="co"># create mapping</span></span>
<span id="cb72-209"><a href="#cb72-209"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb72-210"><a href="#cb72-210"></a>    <span class="co"># map x-axis</span></span>
<span id="cb72-211"><a href="#cb72-211"></a>    <span class="at">x =</span> time_spent,</span>
<span id="cb72-212"><a href="#cb72-212"></a>    <span class="co"># map y-axis</span></span>
<span id="cb72-213"><a href="#cb72-213"></a>    <span class="at">y =</span> women_to_men</span>
<span id="cb72-214"><a href="#cb72-214"></a>  )</span>
<span id="cb72-215"><a href="#cb72-215"></a>) <span class="sc">+</span></span>
<span id="cb72-216"><a href="#cb72-216"></a>  </span>
<span id="cb72-217"><a href="#cb72-217"></a>  <span class="co"># add scatterplot</span></span>
<span id="cb72-218"><a href="#cb72-218"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb72-219"><a href="#cb72-219"></a><span class="in">```</span></span>
<span id="cb72-220"><a href="#cb72-220"></a></span>
<span id="cb72-221"><a href="#cb72-221"></a>What is the difference between a mapping and a style? A mapping connects one aesthetic to a variable, but a style just sets the aesthetic. For example, styling our scatter plot might mean turning all the points blue, whereas a mapping would match each activity to a color based on a scale. This is a graph that uses color as a style:</span>
<span id="cb72-222"><a href="#cb72-222"></a></span>
<span id="cb72-225"><a href="#cb72-225"></a><span class="in">```{r}</span></span>
<span id="cb72-226"><a href="#cb72-226"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-227"><a href="#cb72-227"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-228"><a href="#cb72-228"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>)</span>
<span id="cb72-229"><a href="#cb72-229"></a><span class="in">```</span></span>
<span id="cb72-230"><a href="#cb72-230"></a></span>
<span id="cb72-231"><a href="#cb72-231"></a>and this is a plot that uses color as a map:</span>
<span id="cb72-232"><a href="#cb72-232"></a></span>
<span id="cb72-235"><a href="#cb72-235"></a><span class="in">```{r}</span></span>
<span id="cb72-236"><a href="#cb72-236"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-237"><a href="#cb72-237"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-238"><a href="#cb72-238"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> activity))</span>
<span id="cb72-239"><a href="#cb72-239"></a><span class="in">```</span></span>
<span id="cb72-240"><a href="#cb72-240"></a></span>
<span id="cb72-241"><a href="#cb72-241"></a>You can put mappings in the <span class="in">`ggplot`</span> function, or in any <span class="in">`geom`</span> function. In the above code, the mapping for x and y is in the <span class="in">`ggplot`</span> function, and the mapping for color is in the <span class="in">`geom_point`</span> function.</span>
<span id="cb72-242"><a href="#cb72-242"></a></span>
<span id="cb72-243"><a href="#cb72-243"></a>Every geom will **inherit** the mapping from the <span class="in">`ggplot`</span> function. If we added another geom to the plot, we could see this. In the plot below, I added the <span class="in">`geom_smooth`</span>, and - as you can see - it inherits the x and the y aesthetic from the <span class="in">`ggplot`</span> function, but it does not inherit the color argument from the <span class="in">`geom_point`</span> function.</span>
<span id="cb72-244"><a href="#cb72-244"></a></span>
<span id="cb72-247"><a href="#cb72-247"></a><span class="in">```{r}</span></span>
<span id="cb72-248"><a href="#cb72-248"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-249"><a href="#cb72-249"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-250"><a href="#cb72-250"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> activity)) <span class="sc">+</span></span>
<span id="cb72-251"><a href="#cb72-251"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb72-252"><a href="#cb72-252"></a><span class="in">```</span></span>
<span id="cb72-253"><a href="#cb72-253"></a></span>
<span id="cb72-254"><a href="#cb72-254"></a>If you wanted R to make differently colored smooth lines in this plot, you could add a color aesthetic to the <span class="in">`geom_smooth`</span> function, or you could move the color aesthetic from the <span class="in">`geom_point`</span> function to the <span class="in">`ggplot`</span> function, thereby allowing the <span class="in">`geom_smooth`</span> function to inherit a color aesthetic.</span>
<span id="cb72-255"><a href="#cb72-255"></a></span>
<span id="cb72-258"><a href="#cb72-258"></a><span class="in">```{r}</span></span>
<span id="cb72-259"><a href="#cb72-259"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-260"><a href="#cb72-260"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, </span>
<span id="cb72-261"><a href="#cb72-261"></a>                     <span class="at">y =</span> women_to_men,</span>
<span id="cb72-262"><a href="#cb72-262"></a>                     <span class="at">color =</span> activity)) <span class="sc">+</span></span>
<span id="cb72-263"><a href="#cb72-263"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb72-264"><a href="#cb72-264"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb72-265"><a href="#cb72-265"></a><span class="in">```</span></span>
<span id="cb72-266"><a href="#cb72-266"></a></span>
<span id="cb72-267"><a href="#cb72-267"></a>Let's do a little investigating with just the <span class="in">`geom_smooth`</span> function.</span>
<span id="cb72-268"><a href="#cb72-268"></a></span>
<span id="cb72-271"><a href="#cb72-271"></a><span class="in">```{r}</span></span>
<span id="cb72-272"><a href="#cb72-272"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-273"><a href="#cb72-273"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-274"><a href="#cb72-274"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb72-275"><a href="#cb72-275"></a><span class="in">```</span></span>
<span id="cb72-276"><a href="#cb72-276"></a></span>
<span id="cb72-277"><a href="#cb72-277"></a>We used the <span class="in">`color`</span> aesthetic to make separate lines above, but we didn't need to. We can also use the <span class="in">`group`</span> or <span class="in">`linetype`</span> arguments to create separate lines</span>
<span id="cb72-278"><a href="#cb72-278"></a></span>
<span id="cb72-281"><a href="#cb72-281"></a><span class="in">```{r}</span></span>
<span id="cb72-282"><a href="#cb72-282"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-283"><a href="#cb72-283"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-284"><a href="#cb72-284"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> activity))</span>
<span id="cb72-285"><a href="#cb72-285"></a><span class="in">```</span></span>
<span id="cb72-286"><a href="#cb72-286"></a></span>
<span id="cb72-289"><a href="#cb72-289"></a><span class="in">```{r}</span></span>
<span id="cb72-290"><a href="#cb72-290"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-291"><a href="#cb72-291"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-292"><a href="#cb72-292"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">linetype =</span> activity))</span>
<span id="cb72-293"><a href="#cb72-293"></a><span class="in">```</span></span>
<span id="cb72-294"><a href="#cb72-294"></a></span>
<span id="cb72-295"><a href="#cb72-295"></a>We can change the data supplied to <span class="in">`geom_smooth`</span> to draw only one line:</span>
<span id="cb72-296"><a href="#cb72-296"></a></span>
<span id="cb72-299"><a href="#cb72-299"></a><span class="in">```{r}</span></span>
<span id="cb72-300"><a href="#cb72-300"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-301"><a href="#cb72-301"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-302"><a href="#cb72-302"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-303"><a href="#cb72-303"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(time_use, activity <span class="sc">==</span> <span class="st">"Unpaid work"</span>),</span>
<span id="cb72-304"><a href="#cb72-304"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> activity))</span>
<span id="cb72-305"><a href="#cb72-305"></a><span class="in">```</span></span>
<span id="cb72-306"><a href="#cb72-306"></a></span>
<span id="cb72-307"><a href="#cb72-307"></a>You should use the help page (<span class="in">`?geom_smooth`</span>) to read more about the aesthetics and arguments the function can take. I will only highlight two more: <span class="in">`method`</span>, and <span class="in">`se`</span>. I frequently find myself favoring a linear regression line (rather than the default which uses the <span class="co">[</span><span class="ot">LOESS smoothing function</span><span class="co">](https://en.wikipedia.org/wiki/Local_regression)</span> (a type of local, polynomial regression). You can get a straight line by changing the <span class="in">`method`</span> argument to "lm". The <span class="in">`se`</span> argument can be set to <span class="in">`T`</span> or <span class="in">`TRUE`</span> or <span class="in">`F`</span> or <span class="in">`FALSE`</span>, and it controls whether the plot includes an gray error area.</span>
<span id="cb72-308"><a href="#cb72-308"></a></span>
<span id="cb72-311"><a href="#cb72-311"></a><span class="in">```{r}</span></span>
<span id="cb72-312"><a href="#cb72-312"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-313"><a href="#cb72-313"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent, <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-314"><a href="#cb72-314"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> activity), </span>
<span id="cb72-315"><a href="#cb72-315"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb72-316"><a href="#cb72-316"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span>
<span id="cb72-317"><a href="#cb72-317"></a><span class="in">```</span></span>
<span id="cb72-318"><a href="#cb72-318"></a></span>
<span id="cb72-319"><a href="#cb72-319"></a>On a completely separate note, you use a very similar process of setting the <span class="in">`data`</span> and <span class="in">`mapping`</span> arguments to make a bar chart. Ggplot makes a distinction between a bar chart and a column chart (even though they can appear to be identical). A bar chart has a single, discrete aesthetic mapping (like one that maps x to continent).</span>
<span id="cb72-320"><a href="#cb72-320"></a></span>
<span id="cb72-323"><a href="#cb72-323"></a><span class="in">```{r}</span></span>
<span id="cb72-324"><a href="#cb72-324"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">distinct</span>(time_use, country, continent),</span>
<span id="cb72-325"><a href="#cb72-325"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-326"><a href="#cb72-326"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb72-327"><a href="#cb72-327"></a><span class="in">```</span></span>
<span id="cb72-328"><a href="#cb72-328"></a></span>
<span id="cb72-329"><a href="#cb72-329"></a>A column chart takes 2 mappings: a discrete <span class="in">`x`</span> aesthetic (like <span class="in">`activity`</span>) and a continuous <span class="in">`y`</span> aesthetic (like <span class="in">`time_spent`</span>).</span>
<span id="cb72-330"><a href="#cb72-330"></a></span>
<span id="cb72-333"><a href="#cb72-333"></a><span class="in">```{r}</span></span>
<span id="cb72-334"><a href="#cb72-334"></a><span class="fu">ggplot</span>(</span>
<span id="cb72-335"><a href="#cb72-335"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb72-336"><a href="#cb72-336"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, </span>
<span id="cb72-337"><a href="#cb72-337"></a>                <span class="at">y =</span> time_spent,</span>
<span id="cb72-338"><a href="#cb72-338"></a>                <span class="at">color =</span> activity)</span>
<span id="cb72-339"><a href="#cb72-339"></a>) <span class="sc">+</span></span>
<span id="cb72-340"><a href="#cb72-340"></a>  <span class="fu">geom_col</span>()</span>
<span id="cb72-341"><a href="#cb72-341"></a></span>
<span id="cb72-342"><a href="#cb72-342"></a><span class="in">```</span></span>
<span id="cb72-343"><a href="#cb72-343"></a></span>
<span id="cb72-344"><a href="#cb72-344"></a>Bar charts are a great example of the difference between the <span class="in">`color`</span> and the <span class="in">`fill`</span> aesthetics. Points and lines have only colors, but bars and columns (and other geoms, like density plots) have fills, as well. Let's fix the last plot.</span>
<span id="cb72-345"><a href="#cb72-345"></a></span>
<span id="cb72-348"><a href="#cb72-348"></a><span class="in">```{r}</span></span>
<span id="cb72-349"><a href="#cb72-349"></a><span class="fu">ggplot</span>(</span>
<span id="cb72-350"><a href="#cb72-350"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb72-351"><a href="#cb72-351"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, </span>
<span id="cb72-352"><a href="#cb72-352"></a>                <span class="at">y =</span> time_spent,</span>
<span id="cb72-353"><a href="#cb72-353"></a>                <span class="at">fill =</span> activity)</span>
<span id="cb72-354"><a href="#cb72-354"></a>) <span class="sc">+</span></span>
<span id="cb72-355"><a href="#cb72-355"></a>  <span class="fu">geom_col</span>()</span>
<span id="cb72-356"><a href="#cb72-356"></a><span class="in">```</span></span>
<span id="cb72-357"><a href="#cb72-357"></a></span>
<span id="cb72-358"><a href="#cb72-358"></a>This plot does not provide a helpful comparison of the time use in OECD countries across various continents because all of the columns have a different height. In reality, we would like all of the columns to be the same height so we can compare proportions. We can do this using the <span class="in">`position`</span> argument</span>
<span id="cb72-359"><a href="#cb72-359"></a></span>
<span id="cb72-362"><a href="#cb72-362"></a><span class="in">```{r}</span></span>
<span id="cb72-363"><a href="#cb72-363"></a><span class="fu">ggplot</span>(</span>
<span id="cb72-364"><a href="#cb72-364"></a>  <span class="at">data =</span> time_use,</span>
<span id="cb72-365"><a href="#cb72-365"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, </span>
<span id="cb72-366"><a href="#cb72-366"></a>                <span class="at">y =</span> time_spent,</span>
<span id="cb72-367"><a href="#cb72-367"></a>                <span class="at">fill =</span> activity)</span>
<span id="cb72-368"><a href="#cb72-368"></a>) <span class="sc">+</span></span>
<span id="cb72-369"><a href="#cb72-369"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"fill"</span>)</span>
<span id="cb72-370"><a href="#cb72-370"></a><span class="in">```</span></span>
<span id="cb72-371"><a href="#cb72-371"></a></span>
<span id="cb72-372"><a href="#cb72-372"></a>This is a better plot to view the differences in OECD time use across continents. However, there is (again) very limited data for several continents which are either missed (i.e., most of Africa, Oceania, South America, and Asia) or have only very few countries (i.e., North America)</span>
<span id="cb72-373"><a href="#cb72-373"></a></span>
<span id="cb72-374"><a href="#cb72-374"></a><span class="fu">### Faceting</span></span>
<span id="cb72-375"><a href="#cb72-375"></a></span>
<span id="cb72-376"><a href="#cb72-376"></a>Using just the <span class="in">`ggplot`</span> function and a few <span class="in">`geom`</span> functions, we can get damn near the reference plots we started with.</span>
<span id="cb72-377"><a href="#cb72-377"></a></span>
<span id="cb72-380"><a href="#cb72-380"></a><span class="in">```{r}</span></span>
<span id="cb72-381"><a href="#cb72-381"></a><span class="co"># initialize plot and axes</span></span>
<span id="cb72-382"><a href="#cb72-382"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-383"><a href="#cb72-383"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb72-384"><a href="#cb72-384"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-385"><a href="#cb72-385"></a>  </span>
<span id="cb72-386"><a href="#cb72-386"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb72-387"><a href="#cb72-387"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb72-388"><a href="#cb72-388"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-389"><a href="#cb72-389"></a>  </span>
<span id="cb72-390"><a href="#cb72-390"></a>  <span class="co"># add black regression line</span></span>
<span id="cb72-391"><a href="#cb72-391"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb72-392"><a href="#cb72-392"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb72-393"><a href="#cb72-393"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb72-394"><a href="#cb72-394"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb72-395"><a href="#cb72-395"></a>  </span>
<span id="cb72-396"><a href="#cb72-396"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb72-397"><a href="#cb72-397"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb72-398"><a href="#cb72-398"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>)</span>
<span id="cb72-399"><a href="#cb72-399"></a><span class="in">```</span></span>
<span id="cb72-400"><a href="#cb72-400"></a></span>
<span id="cb72-401"><a href="#cb72-401"></a>Faceting is tricky to explain in words, but it's very easy to understand if you can see it.</span>
<span id="cb72-402"><a href="#cb72-402"></a></span>
<span id="cb72-405"><a href="#cb72-405"></a><span class="in">```{r}</span></span>
<span id="cb72-406"><a href="#cb72-406"></a><span class="co"># initialize plot and axes</span></span>
<span id="cb72-407"><a href="#cb72-407"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-408"><a href="#cb72-408"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb72-409"><a href="#cb72-409"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-410"><a href="#cb72-410"></a>  </span>
<span id="cb72-411"><a href="#cb72-411"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb72-412"><a href="#cb72-412"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb72-413"><a href="#cb72-413"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-414"><a href="#cb72-414"></a>  </span>
<span id="cb72-415"><a href="#cb72-415"></a>  <span class="co"># add black regression line</span></span>
<span id="cb72-416"><a href="#cb72-416"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb72-417"><a href="#cb72-417"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb72-418"><a href="#cb72-418"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb72-419"><a href="#cb72-419"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb72-420"><a href="#cb72-420"></a>  </span>
<span id="cb72-421"><a href="#cb72-421"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb72-422"><a href="#cb72-422"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb72-423"><a href="#cb72-423"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb72-424"><a href="#cb72-424"></a>  </span>
<span id="cb72-425"><a href="#cb72-425"></a>  <span class="co"># add a facet - activity</span></span>
<span id="cb72-426"><a href="#cb72-426"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>activity, </span>
<span id="cb72-427"><a href="#cb72-427"></a>             <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb72-428"><a href="#cb72-428"></a><span class="in">```</span></span>
<span id="cb72-429"><a href="#cb72-429"></a></span>
<span id="cb72-430"><a href="#cb72-430"></a>There are two faceting functions: <span class="in">`facet_wrap`</span> and <span class="in">`facet_grid`</span>. Both have a <span class="in">`scales`</span> argument, which is set as "fixed" by default. You can change it to:</span>
<span id="cb72-431"><a href="#cb72-431"></a></span>
<span id="cb72-432"><a href="#cb72-432"></a><span class="ss">-   </span>"free_x" to allow the x axes to have different limits in the different plots</span>
<span id="cb72-433"><a href="#cb72-433"></a></span>
<span id="cb72-434"><a href="#cb72-434"></a><span class="ss">-   </span>"free_y" to do the same for the y axes</span>
<span id="cb72-435"><a href="#cb72-435"></a></span>
<span id="cb72-436"><a href="#cb72-436"></a><span class="ss">-   </span>"free" to have both axes take different limits for each separate plot</span>
<span id="cb72-437"><a href="#cb72-437"></a></span>
<span id="cb72-438"><a href="#cb72-438"></a>In this case, we'll just set the <span class="in">`scales`</span> argument to <span class="in">`"free"`</span> so that all of the data aren't packed so tightly.</span>
<span id="cb72-439"><a href="#cb72-439"></a></span>
<span id="cb72-442"><a href="#cb72-442"></a><span class="in">```{r}</span></span>
<span id="cb72-443"><a href="#cb72-443"></a><span class="co"># initialize plot and axes</span></span>
<span id="cb72-444"><a href="#cb72-444"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-445"><a href="#cb72-445"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb72-446"><a href="#cb72-446"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-447"><a href="#cb72-447"></a>  </span>
<span id="cb72-448"><a href="#cb72-448"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb72-449"><a href="#cb72-449"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb72-450"><a href="#cb72-450"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-451"><a href="#cb72-451"></a>  </span>
<span id="cb72-452"><a href="#cb72-452"></a>  <span class="co"># add black regression line</span></span>
<span id="cb72-453"><a href="#cb72-453"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb72-454"><a href="#cb72-454"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb72-455"><a href="#cb72-455"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb72-456"><a href="#cb72-456"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb72-457"><a href="#cb72-457"></a>  </span>
<span id="cb72-458"><a href="#cb72-458"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb72-459"><a href="#cb72-459"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb72-460"><a href="#cb72-460"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb72-461"><a href="#cb72-461"></a>  </span>
<span id="cb72-462"><a href="#cb72-462"></a>  <span class="co"># add a facet - activity</span></span>
<span id="cb72-463"><a href="#cb72-463"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>activity, </span>
<span id="cb72-464"><a href="#cb72-464"></a>             <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb72-465"><a href="#cb72-465"></a>             <span class="at">scales =</span> <span class="st">"free"</span>)</span>
<span id="cb72-466"><a href="#cb72-466"></a><span class="in">```</span></span>
<span id="cb72-467"><a href="#cb72-467"></a></span>
<span id="cb72-468"><a href="#cb72-468"></a><span class="in">`facet_grid`</span> is helpful if you would like to facet on two (discrete!) variables at once (like activity and continent in the plot below).</span>
<span id="cb72-469"><a href="#cb72-469"></a></span>
<span id="cb72-472"><a href="#cb72-472"></a><span class="in">```{r}</span></span>
<span id="cb72-473"><a href="#cb72-473"></a><span class="co"># initialize plot and axes</span></span>
<span id="cb72-474"><a href="#cb72-474"></a><span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-475"><a href="#cb72-475"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb72-476"><a href="#cb72-476"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-477"><a href="#cb72-477"></a>  </span>
<span id="cb72-478"><a href="#cb72-478"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb72-479"><a href="#cb72-479"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb72-480"><a href="#cb72-480"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-481"><a href="#cb72-481"></a>  </span>
<span id="cb72-482"><a href="#cb72-482"></a>  <span class="co"># add black regression line</span></span>
<span id="cb72-483"><a href="#cb72-483"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb72-484"><a href="#cb72-484"></a>              <span class="at">size =</span> <span class="fl">0.5</span>,</span>
<span id="cb72-485"><a href="#cb72-485"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb72-486"><a href="#cb72-486"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb72-487"><a href="#cb72-487"></a>  </span>
<span id="cb72-488"><a href="#cb72-488"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb72-489"><a href="#cb72-489"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb72-490"><a href="#cb72-490"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb72-491"><a href="#cb72-491"></a>  </span>
<span id="cb72-492"><a href="#cb72-492"></a>  <span class="co"># add a facet - activity</span></span>
<span id="cb72-493"><a href="#cb72-493"></a>  <span class="fu">facet_grid</span>(continent <span class="sc">~</span> activity, </span>
<span id="cb72-494"><a href="#cb72-494"></a>             <span class="at">scales =</span> <span class="st">"free"</span>)</span>
<span id="cb72-495"><a href="#cb72-495"></a><span class="in">```</span></span>
<span id="cb72-496"><a href="#cb72-496"></a></span>
<span id="cb72-497"><a href="#cb72-497"></a>With so few data, such extensive faceting is neither informative nor helpful, so we'll stick with just one facet: <span class="in">`activity`</span>.</span>
<span id="cb72-498"><a href="#cb72-498"></a></span>
<span id="cb72-499"><a href="#cb72-499"></a><span class="fu">## Plot Styling</span></span>
<span id="cb72-500"><a href="#cb72-500"></a></span>
<span id="cb72-501"><a href="#cb72-501"></a>Our current plot is beginning to look very similar to the reference plot we were attempting to recreate. We have written 23 lines so far. To save space, I am going to save the plot that we currently have under the name <span class="in">`p`</span>. When we call <span class="in">`p`</span>, R will make the plot. We can also add things to <span class="in">`p`</span>, just as we added them to the <span class="in">`ggplot`</span> function.</span>
<span id="cb72-502"><a href="#cb72-502"></a></span>
<span id="cb72-505"><a href="#cb72-505"></a><span class="in">```{r}</span></span>
<span id="cb72-506"><a href="#cb72-506"></a><span class="co"># save ggplot object under the name "p"</span></span>
<span id="cb72-507"><a href="#cb72-507"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> time_use,</span>
<span id="cb72-508"><a href="#cb72-508"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb72-509"><a href="#cb72-509"></a>                     <span class="at">y =</span> women_to_men)) <span class="sc">+</span></span>
<span id="cb72-510"><a href="#cb72-510"></a>  </span>
<span id="cb72-511"><a href="#cb72-511"></a>  <span class="co"># add scatter plot</span></span>
<span id="cb72-512"><a href="#cb72-512"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> continent,</span>
<span id="cb72-513"><a href="#cb72-513"></a>                           <span class="at">shape =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-514"><a href="#cb72-514"></a>  </span>
<span id="cb72-515"><a href="#cb72-515"></a>  <span class="co"># add black regression line</span></span>
<span id="cb72-516"><a href="#cb72-516"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb72-517"><a href="#cb72-517"></a>              <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb72-518"><a href="#cb72-518"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb72-519"><a href="#cb72-519"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb72-520"><a href="#cb72-520"></a>  </span>
<span id="cb72-521"><a href="#cb72-521"></a>  <span class="co"># add dashed parity line (y = 1)</span></span>
<span id="cb72-522"><a href="#cb72-522"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, </span>
<span id="cb72-523"><a href="#cb72-523"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb72-524"><a href="#cb72-524"></a>  </span>
<span id="cb72-525"><a href="#cb72-525"></a>  <span class="co"># add a facet - activity</span></span>
<span id="cb72-526"><a href="#cb72-526"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>activity, </span>
<span id="cb72-527"><a href="#cb72-527"></a>             <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb72-528"><a href="#cb72-528"></a>             <span class="at">scales =</span> <span class="st">"free"</span>)</span>
<span id="cb72-529"><a href="#cb72-529"></a></span>
<span id="cb72-530"><a href="#cb72-530"></a>p</span>
<span id="cb72-531"><a href="#cb72-531"></a><span class="in">```</span></span>
<span id="cb72-532"><a href="#cb72-532"></a></span>
<span id="cb72-533"><a href="#cb72-533"></a><span class="fu">### Labels</span></span>
<span id="cb72-534"><a href="#cb72-534"></a></span>
<span id="cb72-535"><a href="#cb72-535"></a>By default, <span class="in">`ggplot`</span> does not create a title or subtitle for the plot, and it uses the names of the variables for the axes and scales (i.e., color scale in our plot). The <span class="in">`labs`</span> function allows you to update various text elements in the plot.</span>
<span id="cb72-536"><a href="#cb72-536"></a></span>
<span id="cb72-539"><a href="#cb72-539"></a><span class="in">```{r}</span></span>
<span id="cb72-540"><a href="#cb72-540"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Gender Parity in Time Spent in OECD Nations"</span>,</span>
<span id="cb72-541"><a href="#cb72-541"></a>         <span class="at">subtitle =</span> <span class="st">"ATTN: all plots on different axes"</span>,</span>
<span id="cb72-542"><a href="#cb72-542"></a>         <span class="at">x =</span> <span class="st">"time spent (minutes per day)"</span>,</span>
<span id="cb72-543"><a href="#cb72-543"></a>         <span class="at">y =</span> <span class="st">"ratio of women's time spent to men's"</span>)</span>
<span id="cb72-544"><a href="#cb72-544"></a></span>
<span id="cb72-545"><a href="#cb72-545"></a>p</span>
<span id="cb72-546"><a href="#cb72-546"></a><span class="in">```</span></span>
<span id="cb72-547"><a href="#cb72-547"></a></span>
<span id="cb72-548"><a href="#cb72-548"></a>Adding labels to the outside of your plot is as simple as that. You could also use labels as a geom using the <span class="in">`geom_text`</span> function. It takes an additional aesthetic, <span class="in">`label`</span> that we have not yet seen.</span>
<span id="cb72-549"><a href="#cb72-549"></a></span>
<span id="cb72-552"><a href="#cb72-552"></a><span class="in">```{r}</span></span>
<span id="cb72-553"><a href="#cb72-553"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">filter</span>(time_use, activity <span class="sc">==</span> <span class="st">"Unpaid work"</span>),</span>
<span id="cb72-554"><a href="#cb72-554"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time_spent,</span>
<span id="cb72-555"><a href="#cb72-555"></a>                     <span class="at">y =</span> women_to_men,</span>
<span id="cb72-556"><a href="#cb72-556"></a>                     <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb72-557"><a href="#cb72-557"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> country))</span>
<span id="cb72-558"><a href="#cb72-558"></a><span class="in">```</span></span>
<span id="cb72-559"><a href="#cb72-559"></a></span>
<span id="cb72-560"><a href="#cb72-560"></a><span class="fu">### Scales and Coordinates</span></span>
<span id="cb72-561"><a href="#cb72-561"></a></span>
<span id="cb72-562"><a href="#cb72-562"></a>Our plot is different from the reference plot in which colors it uses. The reference plot uses black, orange, blue, green, and yellow; but, ours uses red, beige, green, blue, and purple. What gives? The reference plot uses a different color scale than does our plot. The color scale is the part of the plot that matches each continent to a unique color. The reference plot uses a color scale from the <span class="in">`ggthemes`</span> package that is colorblind friendly.</span>
<span id="cb72-563"><a href="#cb72-563"></a></span>
<span id="cb72-566"><a href="#cb72-566"></a><span class="in">```{r}</span></span>
<span id="cb72-567"><a href="#cb72-567"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>()</span>
<span id="cb72-568"><a href="#cb72-568"></a></span>
<span id="cb72-569"><a href="#cb72-569"></a>p</span>
<span id="cb72-570"><a href="#cb72-570"></a><span class="in">```</span></span>
<span id="cb72-571"><a href="#cb72-571"></a></span>
<span id="cb72-572"><a href="#cb72-572"></a>scales also control the x and y axes, specifically continuous scales. We can use a <span class="in">`scale`</span> function to set the limits or breaks for the axes. In our case, this allows us to demonstrate how much larger the gender disparity appears to be for unpaid work rather than for any of the other (measured) uses of time.</span>
<span id="cb72-573"><a href="#cb72-573"></a></span>
<span id="cb72-576"><a href="#cb72-576"></a><span class="in">```{r}</span></span>
<span id="cb72-577"><a href="#cb72-577"></a>p <span class="sc">+</span> </span>
<span id="cb72-578"><a href="#cb72-578"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">7</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">3.5</span>, <span class="dv">7</span>))</span>
<span id="cb72-579"><a href="#cb72-579"></a><span class="in">```</span></span>
<span id="cb72-580"><a href="#cb72-580"></a></span>
<span id="cb72-581"><a href="#cb72-581"></a>we can use scale functions to add transformations, as well. There are functions like <span class="in">`scale_x_sqrt`</span> and <span class="in">`scale_x_log10`</span> that put the data on square root or log axes. Our time use data is not a great example of the utility of these types of axes. Instead, look at this data about coffee production:</span>
<span id="cb72-582"><a href="#cb72-582"></a></span>
<span id="cb72-585"><a href="#cb72-585"></a><span class="in">```{r}</span></span>
<span id="cb72-586"><a href="#cb72-586"></a>coffee_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> coffee,</span>
<span id="cb72-587"><a href="#cb72-587"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> pounds,</span>
<span id="cb72-588"><a href="#cb72-588"></a>                     <span class="at">y =</span> pop_2019)) <span class="sc">+</span></span>
<span id="cb72-589"><a href="#cb72-589"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> country)) <span class="sc">+</span></span>
<span id="cb72-590"><a href="#cb72-590"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"pounds of coffee produced in 2019"</span>,</span>
<span id="cb72-591"><a href="#cb72-591"></a>       <span class="at">y =</span> <span class="st">"population in 2019"</span>) <span class="sc">+</span></span>
<span id="cb72-592"><a href="#cb72-592"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span>
<span id="cb72-593"><a href="#cb72-593"></a></span>
<span id="cb72-594"><a href="#cb72-594"></a>coffee_plot</span>
<span id="cb72-595"><a href="#cb72-595"></a><span class="in">```</span></span>
<span id="cb72-596"><a href="#cb72-596"></a></span>
<span id="cb72-597"><a href="#cb72-597"></a>The coffee data is dominated by small producers - with many populations and productions below 10 million people and pounds. The relationship between the variables is obscured by the clumping of data, which is caused by the massive outliers of Brazil (massive production) and India (massive population). A log-log plot (with log axes on the x and y) reveals a different perspective on this data. You must be careful, however, because log axes are not incredibly easy for most people to read, and the essentially everyone (including those that can read log-log scales) expects the scales on a plot to be linear unless explicitly warned otherwise.</span>
<span id="cb72-598"><a href="#cb72-598"></a></span>
<span id="cb72-601"><a href="#cb72-601"></a><span class="in">```{r}</span></span>
<span id="cb72-602"><a href="#cb72-602"></a>coffee_plot <span class="sc">+</span> </span>
<span id="cb72-603"><a href="#cb72-603"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb72-604"><a href="#cb72-604"></a>  <span class="fu">scale_y_log10</span>()</span>
<span id="cb72-605"><a href="#cb72-605"></a><span class="in">```</span></span>
<span id="cb72-606"><a href="#cb72-606"></a></span>
<span id="cb72-607"><a href="#cb72-607"></a>There are many more transformations the <span class="in">`scale`</span> functions can perform (like a boxcox, or logit transform), and you can see a fuller list in the documentation of the <span class="in">`scale_x_continuous`</span> function (or any of the continuous scale functions). Okay; bye, coffee data!</span>
<span id="cb72-608"><a href="#cb72-608"></a></span>
<span id="cb72-609"><a href="#cb72-609"></a>We can finally use <span class="in">`scales`</span> functions to control the labels on the axes. I find this is particularly helpful if you have percentages on one axis. We have a proportion, which can be represented as a percentage.</span>
<span id="cb72-610"><a href="#cb72-610"></a></span>
<span id="cb72-613"><a href="#cb72-613"></a><span class="in">```{r}</span></span>
<span id="cb72-614"><a href="#cb72-614"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>())</span>
<span id="cb72-615"><a href="#cb72-615"></a></span>
<span id="cb72-616"><a href="#cb72-616"></a>p</span>
<span id="cb72-617"><a href="#cb72-617"></a><span class="in">```</span></span>
<span id="cb72-618"><a href="#cb72-618"></a></span>
<span id="cb72-619"><a href="#cb72-619"></a><span class="fu">### Themes</span></span>
<span id="cb72-620"><a href="#cb72-620"></a></span>
<span id="cb72-621"><a href="#cb72-621"></a>The plot we have still doesn't look quite like the reference plot we aimed toward. This can be explained by a difference in theme. The reference plot uses the minimal theme, whereas ours uses the default theme. We can "fix" that by using the <span class="in">`theme_minimal`</span> function.</span>
<span id="cb72-622"><a href="#cb72-622"></a></span>
<span id="cb72-625"><a href="#cb72-625"></a><span class="in">```{r}</span></span>
<span id="cb72-626"><a href="#cb72-626"></a>p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span>
<span id="cb72-627"><a href="#cb72-627"></a><span class="in">```</span></span>
<span id="cb72-628"><a href="#cb72-628"></a></span>
<span id="cb72-629"><a href="#cb72-629"></a>You can see the other default themes by seeing the help page for <span class="in">`theme_minimal`</span> (i.e., <span class="in">`?theme_minimal`</span>, which is also the help page for the other built-in ggplot themes). My other favorite is <span class="in">`theme_classic`</span>.</span>
<span id="cb72-630"><a href="#cb72-630"></a></span>
<span id="cb72-633"><a href="#cb72-633"></a><span class="in">```{r}</span></span>
<span id="cb72-634"><a href="#cb72-634"></a>p <span class="sc">+</span> <span class="fu">theme_classic</span>()</span>
<span id="cb72-635"><a href="#cb72-635"></a><span class="in">```</span></span>
<span id="cb72-636"><a href="#cb72-636"></a></span>
<span id="cb72-637"><a href="#cb72-637"></a>I also use <span class="in">`theme_void`</span>, but typically only when making pie charts. <span class="in">`theme_void`</span> removes most of the elements in the plot, including the x and y axes and gridlines.</span>
<span id="cb72-638"><a href="#cb72-638"></a></span>
<span id="cb72-641"><a href="#cb72-641"></a><span class="in">```{r}</span></span>
<span id="cb72-642"><a href="#cb72-642"></a>p <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb72-643"><a href="#cb72-643"></a></span>
<span id="cb72-644"><a href="#cb72-644"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span>
<span id="cb72-645"><a href="#cb72-645"></a><span class="in">```</span></span>
<span id="cb72-646"><a href="#cb72-646"></a></span>
<span id="cb72-647"><a href="#cb72-647"></a><span class="fu">### Guides, Legends, and Text</span></span>
<span id="cb72-648"><a href="#cb72-648"></a></span>
<span id="cb72-649"><a href="#cb72-649"></a>Although it makes no sense not to have it in this case, there are some cases in which you would like to remove the legend, which appears to the right of the plot by default. There are two ways to do this, using <span class="in">`guides`</span> or using <span class="in">`theme`</span>.</span>
<span id="cb72-650"><a href="#cb72-650"></a></span>
<span id="cb72-651"><a href="#cb72-651"></a><span class="in">`guides`</span> is a function that is occasionally helpful for specifying which type of scale variables should be mapped to. You could set the guide to the color and/or shape arguments to "none" to remove one or both aspects of the legend.</span>
<span id="cb72-652"><a href="#cb72-652"></a></span>
<span id="cb72-655"><a href="#cb72-655"></a><span class="in">```{r}</span></span>
<span id="cb72-656"><a href="#cb72-656"></a>p <span class="sc">+</span> <span class="fu">guides</span>(</span>
<span id="cb72-657"><a href="#cb72-657"></a>  <span class="at">color =</span> <span class="st">"none"</span></span>
<span id="cb72-658"><a href="#cb72-658"></a>)</span>
<span id="cb72-659"><a href="#cb72-659"></a><span class="in">```</span></span>
<span id="cb72-660"><a href="#cb72-660"></a></span>
<span id="cb72-661"><a href="#cb72-661"></a>You could also remove the legend, instead of removing variables from the legend. You would do this using the <span class="in">`legend.position`</span> argument in the <span class="in">`theme`</span> function.</span>
<span id="cb72-662"><a href="#cb72-662"></a></span>
<span id="cb72-665"><a href="#cb72-665"></a><span class="in">```{r}</span></span>
<span id="cb72-666"><a href="#cb72-666"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb72-667"><a href="#cb72-667"></a><span class="in">```</span></span>
<span id="cb72-668"><a href="#cb72-668"></a></span>
<span id="cb72-669"><a href="#cb72-669"></a>You could also move the legend around using the <span class="in">`legend.position`</span> argument.</span>
<span id="cb72-670"><a href="#cb72-670"></a></span>
<span id="cb72-673"><a href="#cb72-673"></a><span class="in">```{r}</span></span>
<span id="cb72-674"><a href="#cb72-674"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb72-675"><a href="#cb72-675"></a></span>
<span id="cb72-676"><a href="#cb72-676"></a>p</span>
<span id="cb72-677"><a href="#cb72-677"></a><span class="in">```</span></span>
<span id="cb72-678"><a href="#cb72-678"></a></span>
<span id="cb72-679"><a href="#cb72-679"></a>Finally, you can use the <span class="in">`theme`</span> function to make really specific changes to the plot, like changing the angle of the numbers of the y-axis</span>
<span id="cb72-680"><a href="#cb72-680"></a></span>
<span id="cb72-683"><a href="#cb72-683"></a><span class="in">```{r}</span></span>
<span id="cb72-684"><a href="#cb72-684"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">30</span>),</span>
<span id="cb72-685"><a href="#cb72-685"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">30</span>))</span>
<span id="cb72-686"><a href="#cb72-686"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/huntervooys/hunterr_2024/edit/main/04_visualization.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/huntervooys/hunterr_2024/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>