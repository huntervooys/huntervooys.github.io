<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>hunterr_2024 - 3&nbsp; R 101</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04_visualization.html" rel="next">
<link href="./02_r_and_friends.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "/"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R 101</span></h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">hunterr_2024</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/huntervooys/hunterr_2024" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">R and Friends</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_lore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">The Lore</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_r_and_friends.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Modern R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_r_101.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R 101</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualization</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Statistics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Probability Primer</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0R_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0A_resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Getting Help</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">on this page</h2>
   
  <ul>
  <li><a href="#names-and-assignment" id="toc-names-and-assignment" class="nav-link active" data-scroll-target="#names-and-assignment"><span class="header-section-number">3.1</span> Names and Assignment</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types"><span class="header-section-number">3.2</span> data types</a>
  <ul class="collapse">
  <li><a href="#numbers" id="toc-numbers" class="nav-link" data-scroll-target="#numbers"><span class="header-section-number">3.2.1</span> Numbers</a></li>
  <li><a href="#characters" id="toc-characters" class="nav-link" data-scroll-target="#characters"><span class="header-section-number">3.2.2</span> Characters</a></li>
  <li><a href="#logical-data" id="toc-logical-data" class="nav-link" data-scroll-target="#logical-data"><span class="header-section-number">3.2.3</span> Logical Data</a></li>
  <li><a href="#factors" id="toc-factors" class="nav-link" data-scroll-target="#factors"><span class="header-section-number">3.2.4</span> Factors</a></li>
  <li><a href="#coersion-and-checking" id="toc-coersion-and-checking" class="nav-link" data-scroll-target="#coersion-and-checking"><span class="header-section-number">3.2.5</span> Coersion and Checking</a></li>
  </ul></li>
  <li><a href="#data-structures" id="toc-data-structures" class="nav-link" data-scroll-target="#data-structures"><span class="header-section-number">3.3</span> Data Structures</a>
  <ul class="collapse">
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors"><span class="header-section-number">3.3.1</span> Vectors</a></li>
  <li><a href="#lists" id="toc-lists" class="nav-link" data-scroll-target="#lists"><span class="header-section-number">3.3.2</span> Lists</a></li>
  <li><a href="#data-frames-and-tibbles" id="toc-data-frames-and-tibbles" class="nav-link" data-scroll-target="#data-frames-and-tibbles"><span class="header-section-number">3.3.3</span> Data Frames and Tibbles</a></li>
  <li><a href="#other-data-structures" id="toc-other-data-structures" class="nav-link" data-scroll-target="#other-data-structures"><span class="header-section-number">3.3.4</span> Other Data Structures</a></li>
  </ul></li>
  <li><a href="#programming-basics" id="toc-programming-basics" class="nav-link" data-scroll-target="#programming-basics"><span class="header-section-number">3.4</span> Programming Basics</a>
  <ul class="collapse">
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">3.4.1</span> Functions</a></li>
  <li><a href="#control-flow" id="toc-control-flow" class="nav-link" data-scroll-target="#control-flow"><span class="header-section-number">3.4.2</span> Control Flow</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/huntervooys/hunterr_2024/edit/main/03_r_101.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/huntervooys/hunterr_2024/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R 101</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<blockquote class="blockquote">
<ul>
<li>R competence: read R expressions written by others (allowing the language to serve a communicative purpose), and write R expressions that are readable and align with best practices within the open source R community.</li>
<li>describe R’s data types and the use of each: strings, numerics (floating point “doubles”, integers, and complex numbers), logicals, datetimes, and factors</li>
<li>describe R’s data structures and the use of each: including, vectors (1-dimensional arrays), matrices (2-dimensional arrays), arrays (more than 2-dimensional arrays), lists (key-value pairs), data frames, and tibbles</li>
</ul>
</blockquote>
<p>This tutorial is adapted from a fabulous <a href="https://www.youtube.com/watch?v=QJCt9GNCD1M">youtube video by Very Normal</a>, which you should definitely watch.</p>
<section id="names-and-assignment" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="names-and-assignment"><span class="header-section-number">3.1</span> Names and Assignment</h2>
<p>By far the most common thing you will do in R is assigning values to names. This is done with the assignment operator <code>&lt;-</code>. You can also use <code>=</code> for assignment, but it is less common in R. The <code>&lt;-</code> operator assigns the value on the right to the name on the left. Whenever you want to retrieve the value, you can use the name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>the_name <span class="ot">&lt;-</span> <span class="dv">10</span>L</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">print</span>(the_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<p>There are restrictions to the names that objects can have in R. Names cannot start with a number. Names are case-sensitive, meaning that <code>X</code> is not the same thing as <code>x</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>X <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<p>Names can contain letters, numbers, periods, and underscores. They cannot contain spaces.</p>
<ul>
<li><code>2020_data</code> is not a valid name because it starts with a number</li>
<li><code>data 2020</code> is not a valid name because it contains a space</li>
<li><code>x2020_data</code> is a valid name</li>
<li><code>data.2020</code> and <code>data_2020</code> are valid names.</li>
</ul>
<p>To the greatest extent possible, you should try to use names that are informative and short. This makes your code easier to write (because of the short name) and easier to read (because of the informative name).</p>
<p>That is what you need to write R code that will run. But what about writing R code that is readable? This is where the <a href="https://style.tidyverse.org/index.html">tidyverse style guide</a> comes in. The tidyverse style guide is a set of conventions that the tidyverse team has developed to make R code more readable. The style guide is not a set of rules that you must follow, but it is a set of conventions that you should follow if you want your code to be readable by others.</p>
<p>The tidyverse style guide has a lot of rules, but here are a few of the most important naming conventions:</p>
<ul>
<li>names should only contain lowercase letters, numbers, and underscores</li>
<li>variable names should generally be nominal</li>
<li>function names should generally be verbal</li>
</ul>
<p>Finally, the last thing you want to avoid is overwriting the name of a function. If you assign a value to <code>T</code>, you will no longer be able to use it as a shortcut for <code>TRUE</code>. If you assign a value to <code>mean</code>, you will no longer be able to use that function to calculate the mean of a vector. You really need to be cautious about this, which I understand may be difficult as you learn. It’s a good habit to develop, and it will save you from having to debug this sort of error, which is often a difficult and time-consuming process.</p>
</section>
<section id="data-types" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="data-types"><span class="header-section-number">3.2</span> data types</h2>
<p><code>class</code>: the function that you use when you want to know what type of data is stored in an R object.</p>
<section id="numbers" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="numbers"><span class="header-section-number">3.2.1</span> Numbers</h3>
<p><strong>Integers</strong> are specified with an <code>L</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>int <span class="ot">&lt;-</span> <span class="dv">5</span>L</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">class</span>(int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">print</span>(int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p>without the <code>L</code>, the integer will be interpreted as <strong>numeric.</strong> Numeric data are numbers that have a decimal point (in this case <code>.0</code>, which R does not print):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>num <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="fu">class</span>(num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">print</span>(num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p>Numeric is a super-ordinate category that contains <strong>doubles</strong> and <strong>integers</strong>. Numeric data is stored as <strong>doubles</strong> (i.e., numbers that have decimal points). You can see how a value is stored on the machine (i.e., to see that numeric values are stored as doubles, always) using the <code>typeof</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">typeof</span>(int)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">typeof</span>(num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<p>As you can see, the class <code>numeric</code> are stored as doubles (i.e, using 64 bits), whether the value being stored is an integer or not. Values with the class <code>integer</code> are stored as integers (i.e., using only 32 bits).</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Double Precision?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Computers store numbers in sequences of <code>0</code>s and <code>1</code>s. A single position in this sequence, which could be occupied by either a <code>0</code> or a <code>1</code> is called a <strong>bit</strong>. A number stored in this way is called a <strong>binary number</strong>. Here is an example of an 8-bit binary number:</p>
<p><code>00101101</code></p>
<p>Decoding this number is a straightforward matter. Each position in the sequence represents a power of 2. The rightmost position represents <span class="math inline">\(2^0\)</span>, and the leftmost position (in an 8 bit number) represents <span class="math inline">\(2^7\)</span>. The number encoded is a weighted sum of the powers of 2. <code>00101101</code> is decoded as:</p>
<p><span class="math display">\[
\text{number} = \sum_{i=0}^{7} \text{bit}_i \times 2^i
\]</span></p>
<p>Omitting the <code>0</code>s, <code>00101101</code> works out to be:</p>
<p><span class="math display">\[
(1 \times 2^2) + (1 \times 2^4) + (1 \times 2^5) + (1 \times 2^7) = 4 + 16 + 32 + 128 = 180
\]</span></p>
<p>You might notice a couple of things about this scheme of an <strong>8-bit number</strong> that I have put forth. This scheme can only represent integers (a result of using integer multiplication with powers of 2, which are always integers). You may also have noticed that one could represent 0 in this format, but never -1. All of the integers decoded in this manner will be positive.</p>
<p>You might use a <strong>sign bit</strong> at the beginning of the sequence to fix this second problem. When the sign bit is <code>1</code>, the integer is negative; when it is <code>0</code>, the integer is positive. The new decoding scheme using a sign bit would be represented like this:</p>
<p><span class="math display">\[
\text{number} = (-1)^{bit_0} + \sum_{i=0}^6 bit_{i+1} \times 2^i
\]</span></p>
<p>Again ignoring the <code>0</code>s (except for the sign bit), <code>00101101</code> works out to be:</p>
<p><span class="math display">\[
(-1)^0 + (1 \times 2^1) + (1 \times 2^3) + (1 \times 2^4) + (1 \times 2^6) = 1 + 2 + 8 + 16 + 64 = 91
\]</span></p>
<p>We could now easily represent -91 by changing the sign bit: <code>10101101</code>.</p>
<p>This scheme still can’t represent non-integers, and our 8-bits are quite limiting. The largest and smallest numbers we can represent are positive and negative 127 (<code>01111111</code> and <code>11111111</code>, respectively). The limiting factor is, of course, the limited number of bits we have (only 8), and the limited amount of information those 8 bits can encode (see information theory for a formalized, quantitative way to think about information in bits - developed by Claude Shannon at Bell Labs).</p>
<p>For historical reasons, a 32 bit number is called a <strong>single precision</strong> number. A 32 bit number encoded as described above is a 32 bit integer. <strong>In R, integers are stored as 32 bit numbers</strong>. This means that the range of integers R can store goes from -2,147,483,647 (-2.1 billion; <code>11111111111111111111111111111111</code>) to 2,147,483,647 (2.1 billion; <code>01111111111111111111111111111111</code>)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p><strong>Double precision floating point numbers</strong> (doubles) are 64 bit numbers with decimal points. The two schemes I outline can only encode integers. Encoding decimal values requires a more complicated scheme that I have no intention of fully explaining (as I have for 8 and 32 bit integers). Here is a <a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format">Wikipedia page</a> if you care all that much.</p>
<p>Briefly, the leftmost bit is still a <strong>sign bit</strong>, interpreted in the same we we interpreted it above. The next 11 bits represent an exponent (encoded in binary). 11 bits can encode integers from 0 to 2047. To achieve negative exponents (needed for numbers between 0 and 1 and therefore numbers between -1 and 0), the exponent is subtracted from 1023. Therefore, the range of values the exponent can take covers all the integers from -1023 to 1024. The rightmost 52 bits represent a sum of fractions that is computed as a weighted sum, very similarly to how the integers were calculated from 7 bits above. The only difference is that each bit represents multiplication by a <strong>negative power of 2</strong>. This results in a weighted sum of fractions, where only the negative powers of 2 corresponding to positions with <code>1</code>s in them are included in this sum.</p>
<p>In any case, the real referent of <strong>double precision floating point number</strong> is the number of bits the computer uses to store the number. Single precision floating point numbers (i.e., numbers with decimals) are stored according to a similar sign bit, exponent, fraction scheme, only with 32 bits. The benefit to having more bits is having more precision. There are, however, computational costs, and in many cases (especially if you are only using a 64 bit computer, as you are), using more than 64 bits exponentially increases the amount of time the computer will take to complete a single computation.</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Complex Numbers
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The other type of numeric data in R is complex numbers, which are so very cool and beautiful, but which you are never realistically going to use and which I will not, therefore, bore you with the details of. However, complex numbers are numbers with a real part (which is multiplied by <span class="math inline">\(1\)</span>) and an imaginary part (which is multiplied by <span class="math inline">\(i = \sqrt{-1}\)</span>). The value of the complex number is the sum of the real and imaginary parts. You can store a complex number like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>z <span class="ot">&lt;-</span> <span class="fl">0.8</span> <span class="sc">+</span> <span class="dv">1</span>i</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">class</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "complex"</code></pre>
</div>
</div>
<p>I’ll just quickly show you the <code>seq</code> function so you can see the effect of complex exponentiation. We can use the <code>seq</code> function to get a sequence of numbers from <code>from</code> to <code>to</code>, by increments of <code>by</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>exps <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">12</span>, <span class="at">by =</span> <span class="fl">0.2</span>)</span>
<span id="cb19-2"><a href="#cb19-2"></a>exps</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1.0  1.2  1.4  1.6  1.8  2.0  2.2  2.4  2.6  2.8  3.0  3.2  3.4  3.6  3.8
[16]  4.0  4.2  4.4  4.6  4.8  5.0  5.2  5.4  5.6  5.8  6.0  6.2  6.4  6.6  6.8
[31]  7.0  7.2  7.4  7.6  7.8  8.0  8.2  8.4  8.6  8.8  9.0  9.2  9.4  9.6  9.8
[46] 10.0 10.2 10.4 10.6 10.8 11.0 11.2 11.4 11.6 11.8 12.0</code></pre>
</div>
</div>
<p>We can then raise the complex number <code>z</code> to each of these exponents to see the effect of complex exponentiation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>zs <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">exp =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, </span>
<span id="cb21-2"><a href="#cb21-2"></a>                       <span class="at">to =</span> <span class="fl">17.5</span>, </span>
<span id="cb21-3"><a href="#cb21-3"></a>                       <span class="at">by =</span> <span class="fl">0.1</span>),</span>
<span id="cb21-4"><a href="#cb21-4"></a>             <span class="at">z =</span> z <span class="sc">**</span> exp)</span>
<span id="cb21-5"><a href="#cb21-5"></a>zs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["exp"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[2],"type":["cpl"],"align":["right"]}],"data":[{"1":"1.0","2":"0.800000+ 1.000000i"},{"1":"1.1","2":"0.725018+ 1.094312i"},{"1":"1.2","2":"0.639816+ 1.183721i"},{"1":"1.3","2":"0.544629+ 1.267185i"},{"1":"1.4","2":"0.439794+ 1.343666i"},{"1":"1.5","2":"0.325749+ 1.412130i"},{"1":"1.6","2":"0.203037+ 1.471567i"},{"1":"1.7","2":"0.072305+ 1.520993i"},{"1":"1.8","2":"-0.065697+ 1.559461i"},{"1":"1.9","2":"-0.210117+ 1.586075i"},{"1":"2.0","2":"-0.360000+ 1.600000i"},{"1":"2.1","2":"-0.514298+ 1.600468i"},{"1":"2.2","2":"-0.671868+ 1.586792i"},{"1":"2.3","2":"-0.831482+ 1.558377i"},{"1":"2.4","2":"-0.991831+ 1.514726i"},{"1":"2.5","2":"-1.151531+ 1.455453i"},{"1":"2.6","2":"-1.309138+ 1.380291i"},{"1":"2.7","2":"-1.463149+ 1.289099i"},{"1":"2.8","2":"-1.612019+ 1.181871i"},{"1":"2.9","2":"-1.754169+ 1.058744i"},{"1":"3.0","2":"-1.888000+ 0.920000i"},{"1":"3.1","2":"-2.011906+ 0.766076i"},{"1":"3.2","2":"-2.124287+ 0.597566i"},{"1":"3.3","2":"-2.223563+ 0.415219i"},{"1":"3.4","2":"-2.308191+ 0.219950i"},{"1":"3.5","2":"-2.376678+ 0.012831i"},{"1":"3.6","2":"-2.427601- 0.204905i"},{"1":"3.7","2":"-2.459618- 0.431870i"},{"1":"3.8","2":"-2.471486- 0.666522i"},{"1":"3.9","2":"-2.462079- 0.907174i"},{"1":"4.0","2":"-2.430400- 1.152000i"},{"1":"4.1","2":"-2.375601- 1.399045i"},{"1":"4.2","2":"-2.296995- 1.646234i"},{"1":"4.3","2":"-2.194070- 1.891387i"},{"1":"4.4","2":"-2.066503- 2.132230i"},{"1":"4.5","2":"-1.914174- 2.366413i"},{"1":"4.6","2":"-1.737176- 2.591525i"},{"1":"4.7","2":"-1.535825- 2.805114i"},{"1":"4.8","2":"-1.310667- 3.004703i"},{"1":"4.9","2":"-1.062489- 3.187818i"},{"1":"5.0","2":"-0.792320- 3.352000i"},{"1":"5.1","2":"-0.501436- 3.494837i"},{"1":"5.2","2":"-0.191362- 3.613982i"},{"1":"5.3","2":"0.136132- 3.707179i"},{"1":"5.4","2":"0.479028- 3.772287i"},{"1":"5.5","2":"0.835074- 3.807305i"},{"1":"5.6","2":"1.201784- 3.810396i"},{"1":"5.7","2":"1.576454- 3.779916i"},{"1":"5.8","2":"1.956170- 3.714430i"},{"1":"5.9","2":"2.337826- 3.612743i"},{"1":"6.0","2":"2.718144- 3.473920i"},{"1":"6.1","2":"3.093688- 3.297306i"},{"1":"6.2","2":"3.460893- 3.082548i"},{"1":"6.3","2":"3.816084- 2.829612i"},{"1":"6.4","2":"4.155509- 2.538801i"},{"1":"6.5","2":"4.475364- 2.210770i"},{"1":"6.6","2":"4.771824- 1.846533i"},{"1":"6.7","2":"5.041079- 1.447479i"},{"1":"6.8","2":"5.279365- 1.015374i"},{"1":"6.9","2":"5.483004- 0.552368i"},{"1":"7.0","2":"5.648435- 0.060992i"},{"1":"7.1","2":"5.772257+ 0.455844i"},{"1":"7.2","2":"5.851262+ 0.994855i"},{"1":"7.3","2":"5.882479+ 1.552395i"},{"1":"7.4","2":"5.863209+ 2.124468i"},{"1":"7.5","2":"5.791061+ 2.706748i"},{"1":"7.6","2":"5.663992+ 3.294598i"},{"1":"7.7","2":"5.480342+ 3.883096i"},{"1":"7.8","2":"5.238867+ 4.467066i"},{"1":"7.9","2":"4.938772+ 5.041110i"},{"1":"8.0","2":"4.579740+ 5.599642i"},{"1":"8.1","2":"4.161962+ 6.136932i"},{"1":"8.2","2":"3.686155+ 6.647146i"},{"1":"8.3","2":"3.153589+ 7.124395i"},{"1":"8.4","2":"2.566099+ 7.562784i"},{"1":"8.5","2":"1.926100+ 7.956459i"},{"1":"8.6","2":"1.236596+ 8.299670i"},{"1":"8.7","2":"0.501178+ 8.586818i"},{"1":"8.8","2":"-0.275973+ 8.812519i"},{"1":"8.9","2":"-1.090092+ 8.971659i"},{"1":"9.0","2":"-1.935849+ 9.059453i"},{"1":"9.1","2":"-2.807362+ 9.071507i"},{"1":"9.2","2":"-3.698222+ 9.003872i"},{"1":"9.3","2":"-4.601525+ 8.853105i"},{"1":"9.4","2":"-5.509905+ 8.616326i"},{"1":"9.5","2":"-6.415579+ 8.291268i"},{"1":"9.6","2":"-7.310393+ 7.876332i"},{"1":"9.7","2":"-8.185876+ 7.370632i"},{"1":"9.8","2":"-9.033297+ 6.774043i"},{"1":"9.9","2":"-9.843733+ 6.087235i"},{"1":"10.0","2":"-10.608133+ 5.311713i"},{"1":"10.1","2":"-11.317397+ 4.449843i"},{"1":"10.2","2":"-11.962449+ 3.504875i"},{"1":"10.3","2":"-12.534325+ 2.480959i"},{"1":"10.4","2":"-13.024249+ 1.383156i"},{"1":"10.5","2":"-13.423731+ 0.217435i"},{"1":"10.6","2":"-13.724646- 1.009328i"},{"1":"10.7","2":"-13.919333- 2.289370i"},{"1":"10.8","2":"-14.000681- 3.614063i"},{"1":"10.9","2":"-13.962221- 4.973945i"},{"1":"11.0","2":"-13.798220- 6.358762i"},{"1":"11.1","2":"-13.503761- 7.757522i"},{"1":"11.2","2":"-13.074835- 9.158549i"},{"1":"11.3","2":"-12.508419-10.549557i"},{"1":"11.4","2":"-11.802556-11.917725i"},{"1":"11.5","2":"-10.956420-13.249783i"},{"1":"11.6","2":"-9.970389-14.532108i"},{"1":"11.7","2":"-8.846096-15.750829i"},{"1":"11.8","2":"-7.586481-16.891931i"},{"1":"11.9","2":"-6.195832-17.941377i"},{"1":"12.0","2":"-4.679813-18.885230i"},{"1":"12.1","2":"-3.045486-19.709778i"},{"1":"12.2","2":"-1.301318-20.401674i"},{"1":"12.3","2":"0.542822-20.948065i"},{"1":"12.4","2":"2.475680-21.336735i"},{"1":"12.5","2":"4.484646-21.556246i"},{"1":"12.6","2":"6.555797-21.596076i"},{"1":"12.7","2":"8.673952-21.446759i"},{"1":"12.8","2":"10.822746-21.100026i"},{"1":"12.9","2":"12.984712-20.548934i"},{"1":"13.0","2":"15.141379-19.787997i"},{"1":"13.1","2":"17.273389-18.813309i"},{"1":"13.2","2":"19.360619-17.622658i"},{"1":"13.3","2":"21.382322-16.215630i"},{"1":"13.4","2":"23.317279-14.593708i"},{"1":"13.5","2":"25.143963-12.760351i"},{"1":"13.6","2":"26.840714-10.721064i"},{"1":"13.7","2":"28.385921- 8.483455i"},{"1":"13.8","2":"29.758223- 6.057275i"},{"1":"13.9","2":"30.936703- 3.454436i"},{"1":"14.0","2":"31.901100- 0.689019i"},{"1":"14.1","2":"32.632020+ 2.222742i"},{"1":"14.2","2":"33.111153+ 5.262493i"},{"1":"14.3","2":"33.321488+ 8.409818i"},{"1":"14.4","2":"33.247531+11.642313i"},{"1":"14.5","2":"32.875521+14.935683i"},{"1":"14.6","2":"32.193634+18.263863i"},{"1":"14.7","2":"31.192192+21.599157i"},{"1":"14.8","2":"29.863854+24.912404i"},{"1":"14.9","2":"28.203798+28.173155i"},{"1":"15.0","2":"26.209899+31.349885i"},{"1":"15.1","2":"23.882874+34.410214i"},{"1":"15.2","2":"21.226429+37.321147i"},{"1":"15.3","2":"18.247372+40.049342i"},{"1":"15.4","2":"14.955712+42.561382i"},{"1":"15.5","2":"11.364734+44.824067i"},{"1":"15.6","2":"7.491045+46.804725i"},{"1":"15.7","2":"3.354597+48.471518i"},{"1":"15.8","2":"-1.021321+49.793776i"},{"1":"15.9","2":"-5.610116+50.742322i"},{"1":"16.0","2":"-10.381966+51.289807i"},{"1":"16.1","2":"-15.303914+51.411045i"},{"1":"16.2","2":"-20.340004+51.083347i"},{"1":"16.3","2":"-25.451445+50.286846i"},{"1":"16.4","2":"-30.596812+49.004818i"},{"1":"16.5","2":"-35.732280+47.223988i"},{"1":"16.6","2":"-40.811889+44.934824i"},{"1":"16.7","2":"-45.787841+42.131811i"},{"1":"16.8","2":"-50.610833+38.813700i"},{"1":"16.9","2":"-55.230415+34.983742i"},{"1":"17.0","2":"-59.595380+30.649880i"},{"1":"17.1","2":"-63.654176+25.824922i"},{"1":"17.2","2":"-67.355350+20.526674i"},{"1":"17.3","2":"-70.648001+14.778032i"},{"1":"17.4","2":"-73.482267+ 8.607042i"},{"1":"17.5","2":"-75.809812+ 2.046910i"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Now we can look at the pretty spiral that complex exponentiation results in:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_r_101_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Isn’t that just gorgeous? Complex numbers can also spiral inwards:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>z <span class="ot">&lt;-</span> <span class="fl">0.15</span> <span class="sc">+</span> <span class="fl">0.85</span>i</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_r_101_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I drew a unit circle in that plot for a reason. As you can see in the plot below, the first complex number we used (<span class="math inline">\(0.8 + 1i\)</span>) corresponds to a point outside of the unit circle on the complex plane. The point corresponding to <span class="math inline">\(z = 0.15 + 0.85i\)</span>, by contrast, lies within the unit circle. This is why the the first complex number spirals outwards, while the spiral of the second complex number spirals inwards. The unit circle is the boundary between the two types of spirals.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_r_101_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="arithmetic" class="level4" data-number="3.2.1.1">
<h4 data-number="3.2.1.1" class="anchored" data-anchor-id="arithmetic"><span class="header-section-number">3.2.1.1</span> Arithmetic</h4>
<p>R has a number of arithmetic operators, many of which you will be familiar with.</p>
<p>The unary operators are <code>-</code> and <code>+</code>, which negate and do nothing, respectively. You would use <code>-</code> when saving a negative number.</p>
<p>These are five binary operators that are used frequently in the arithmetic common in public schools:</p>
<ul>
<li><code>+</code>: addition</li>
<li><code>-</code>: subtraction</li>
<li><code>*</code>: multiplication</li>
<li><code>/</code>: division</li>
<li><code>^</code>: exponentiation<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></li>
</ul>
<p>Exponentiation and division offer two useful examples to demonstrate <code>Inf</code> and <code>-Inf</code> values. Anything divided by infinity is zero, which is more of a convention in mathematics than a thing that you calculate out (which would take a log time). This division by infinity resulting in zero rule is coded into R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="dv">10</span> <span class="sc">/</span> <span class="cn">Inf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>R also recognizes that anything to a negative infinite power is zero, and that anything (including an infinite value) to the zeroth power is equal to 1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="dv">10</span> <span class="sc">^</span> <span class="sc">-</span><span class="cn">Inf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="cn">Inf</span> <span class="sc">^</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>In addition to addition, subtraction, multiplication, division, and exponentiation, R has a few other arithmetic operators that you may not be as familiar with:</p>
<ul>
<li><code>%%</code>: modulus (remainder of division)</li>
<li><code>%/%</code>: integer division (division that rounds down to the nearest whole number)</li>
</ul>
<p>These functions revolve around division. Take the number 73. When you divide 73 by 10, you get 7 with a remainder of 3. In this case, 7 is the integer divisor of 73 divided by 10, and 3 is the modulus of 73 divided by 10.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="dv">73</span> <span class="sc">%/%</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="dv">73</span> <span class="sc">%%</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>These functions are part of <strong>modular arithmetic</strong>, which winds up being incredibly important to computer science and cryptography, as well as to many fields of mathematics (like number theory).</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rounding, Truncation, etc.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>R has 5 function used to round numbers:</p>
<ul>
<li><code>ceiling()</code>: rounds to greatest and nearest integer (will increase absolute value of a positive number and decrease the absolute value of a negative number)</li>
<li><code>floor()</code>: rounds to least and nearest integer (will decrease the absolute value of a positive number and increase the absolute value of a negative number)</li>
<li><code>trunc()</code>: truncates the decimal part of a number</li>
<li><code>round()</code>: rounds to the nearest integer (or to a specified number of decimal places)</li>
<li><code>signif()</code>: rounds to a specified number of significant digits<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>x <span class="ot">&lt;-</span> <span class="fl">5.7</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">5.7</span></span>
<span id="cb33-3"><a href="#cb33-3"></a></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="fu">ceiling</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">ceiling</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">floor</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">floor</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="fu">trunc</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>x <span class="ot">&lt;-</span> <span class="fl">13950.28738</span></span>
<span id="cb43-2"><a href="#cb43-2"></a><span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13950.29</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="fu">signif</span>(x, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14000</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Relational Logic
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p><strong>Relational logic</strong> is used to compare two values. The result of a relational logic operation is a logical value, either <code>TRUE</code> or <code>FALSE</code>. The relational operators in R are:</p>
<ul>
<li>“==”: is the thing on the left <strong>identical</strong> to the thing on the right?</li>
<li>“!=”: not identical</li>
<li>“&lt;”: less than</li>
<li>“&lt;=”: less than or equal to</li>
<li>“&gt;”: greater than</li>
<li>“&gt;=”: greater than or equal to</li>
</ul>
<p>That might seem relatively straightforward. I raise you the following complication:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>a <span class="ot">&lt;-</span> <span class="fl">0.1</span></span>
<span id="cb47-2"><a href="#cb47-2"></a>b <span class="ot">&lt;-</span> <span class="fl">0.3</span> <span class="sc">-</span> <span class="fl">0.2</span></span>
<span id="cb47-3"><a href="#cb47-3"></a><span class="fu">print</span>(<span class="fu">c</span>(a, b))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1 0.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>a <span class="sc">==</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>That’s really odd, isn’t it? The way R stores the two numbers (see the first callout about double precision) means that these two numbers are different by a very small amount. How much, you ask?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>a <span class="sc">-</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.775558e-17</code></pre>
</div>
</div>
<p>As I said, a very small amount. This is why you should never use <code>==</code> to compare floating point numbers. Instead, you should use the <code>all.equal()</code> function, which will compare two numbers to a specified tolerance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="fu">all.equal</span>(a, b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="characters" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="characters"><span class="header-section-number">3.2.2</span> Characters</h3>
<p>Characters are fairly self explanatory. You can tell R that something is a character by putting it in quotes.</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>a <span class="ot">&lt;-</span> <span class="st">"Good morning!"</span></span>
<span id="cb55-2"><a href="#cb55-2"></a><span class="fu">class</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="fu">print</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Good morning!"</code></pre>
</div>
</div>
<p>You can also convert something from another class to a string. When you do so, R will begin to print it in quotes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>x <span class="ot">&lt;-</span> <span class="dv">124</span>L</span>
<span id="cb59-2"><a href="#cb59-2"></a><span class="fu">class</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 124</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.character</span>(x)</span>
<span id="cb63-2"><a href="#cb63-2"></a><span class="fu">class</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "124"</code></pre>
</div>
</div>
<p>See another example of the quotes with logical data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>x <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb67-2"><a href="#cb67-2"></a><span class="fu">class</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="fu">print</span>(<span class="fu">as.character</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "TRUE"</code></pre>
</div>
</div>
<p>There is one type of data that does not encapsulate in quotes when it is converted to a character. This is the <code>NA</code> or missing value, which R will essentially always represent as <code>NA</code>, regardless of it’s class.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>y <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="fu">class</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.double</span>(y)</span>
<span id="cb73-2"><a href="#cb73-2"></a><span class="fu">class</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a><span class="fu">print</span>(<span class="fu">as.character</span>(y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</section>
<section id="logical-data" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="logical-data"><span class="header-section-number">3.2.3</span> Logical Data</h3>
<p>Logical data is also simple to understand. Neither <code>TRUE</code> nor <code>FALSE</code> are unfamiliar to the reader.</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>It’s useful to note what happens when you turn logical data into numeric data. <code>TRUE</code> becomes <code>1</code> and <code>FALSE</code> becomes <code>0</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a>vals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb81-2"><a href="#cb81-2"></a><span class="fu">print</span>(<span class="fu">as.numeric</span>(vals))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0</code></pre>
</div>
</div>
<p>You can also write <code>TRUE</code> as simply <code>T</code> and <code>FALSE</code> as <code>F</code>.</p>
<div id="tip-logical_arithmetic" class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;3.1: Logical Arithmetic
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The <code>:</code> operator is used to create a sequence of numbers, starting at the number on the right, and continuing by adding 1 until the number on the left is reached.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="fl">0.1</span><span class="sc">:</span><span class="fl">5.75</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1 1.1 2.1 3.1 4.1 5.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we wanted to find only the numbers that are less than or equal to 4, we could use the <code>&lt;</code> operator (remember this list includes 0 at the beginning).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a>x <span class="sc">&lt;=</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>If we wanted to see how many of the numbers are less than or equal to 4, we could use the <code>sum()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="fu">sum</span>(x <span class="sc">&lt;=</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p>If you just wanted to see if any or all of the numbers are less than four, you could use the <code>any()</code> or <code>all()</code> functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a><span class="fu">any</span>(x <span class="sc">&lt;=</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a><span class="fu">all</span>(x <span class="sc">&lt;=</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="factors" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="factors"><span class="header-section-number">3.2.4</span> Factors</h3>
<p>There is an excellent <a href="https://r4ds.had.co.nz/factors.html">chapter about factors</a> in R for Data Science.</p>
<p>Factors combine integers and strings, and they are useful for categorical data (which is exceptionally common in psychology research). One categorical variable is the day of the week. I am going to store all of the days of the week in a vector called <code>days</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a>days <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"monday"</span>, </span>
<span id="cb94-2"><a href="#cb94-2"></a>          <span class="st">"tuesday"</span>, </span>
<span id="cb94-3"><a href="#cb94-3"></a>          <span class="st">"wednesday"</span>, </span>
<span id="cb94-4"><a href="#cb94-4"></a>          <span class="st">"thursday"</span>, </span>
<span id="cb94-5"><a href="#cb94-5"></a>          <span class="st">"friday"</span>, </span>
<span id="cb94-6"><a href="#cb94-6"></a>          <span class="st">"saturday"</span>, </span>
<span id="cb94-7"><a href="#cb94-7"></a>          <span class="st">"sunday"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is a vector of days of the week. We’ll use it as our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a><span class="co"># draw a random sample of 100 days of the week</span></span>
<span id="cb95-2"><a href="#cb95-2"></a>data <span class="ot">&lt;-</span> <span class="fu">sample</span>(days, <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb95-3"><a href="#cb95-3"></a><span class="co"># print the first 15 days</span></span>
<span id="cb95-4"><a href="#cb95-4"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "sunday"    "thursday"  "wednesday" "monday"    "saturday"  "saturday" 
 [7] "saturday"  "saturday"  "monday"    "wednesday" "saturday"  "saturday" 
[13] "thursday"  "monday"    "tuesday"  </code></pre>
</div>
</div>
<p>Using a factor, rather than a character, is useful for sorting purposes. Sorting our character days results in a list that is in the wrong order.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a><span class="fu">sort</span>(days)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "friday"    "monday"    "saturday"  "sunday"    "thursday"  "tuesday"  
[7] "wednesday"</code></pre>
</div>
</div>
<p>Days of the week is a good candidate for a factor because there are a fixed number of known days of the week. We can convert the vector <code>days</code> to a factor by using the <code>factor()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(data)</span>
<span id="cb99-2"><a href="#cb99-2"></a><span class="fu">head</span>(y, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] sunday    thursday  wednesday monday    saturday  saturday  saturday 
 [8] saturday  monday    wednesday saturday  saturday  thursday  monday   
[15] tuesday  
Levels: friday monday saturday sunday thursday tuesday wednesday</code></pre>
</div>
</div>
<p>As you can see, failing to supply factor levels results in the levels being sorted in the same meaningless way as before. We can fix this by supplying the levels in the order we want them to appear.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a>data <span class="ot">&lt;-</span> <span class="fu">factor</span>(data, <span class="at">levels =</span> days)</span>
<span id="cb101-2"><a href="#cb101-2"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] sunday    thursday  wednesday monday    saturday  saturday  saturday 
 [8] saturday  monday    wednesday saturday  saturday  thursday  monday   
[15] tuesday  
Levels: monday tuesday wednesday thursday friday saturday sunday</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a><span class="fu">nlevels</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a><span class="fu">levels</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "monday"    "tuesday"   "wednesday" "thursday"  "friday"    "saturday" 
[7] "sunday"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a><span class="co"># if you want to see the numeric backbone of the factor</span></span>
<span id="cb107-2"><a href="#cb107-2"></a><span class="fu">as.vector</span>(<span class="fu">unclass</span>(data)) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 7 4 3 1 6 6 6 6 1 3 6 6 4 1 2</code></pre>
</div>
</div>
<p>You may want sunday to be the first day of the week. You can do this by releveling the factor</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a>data <span class="ot">&lt;-</span> <span class="fu">fct_relevel</span>(data, <span class="st">"sunday"</span>)</span>
<span id="cb109-2"><a href="#cb109-2"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] sunday    thursday  wednesday monday    saturday  saturday  saturday 
 [8] saturday  monday    wednesday saturday  saturday  thursday  monday   
[15] tuesday  
Levels: sunday monday tuesday wednesday thursday friday saturday</code></pre>
</div>
</div>
<p>You can also reverse factors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1"></a>data <span class="ot">&lt;-</span> <span class="fu">fct_rev</span>(data)</span>
<span id="cb111-2"><a href="#cb111-2"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] sunday    thursday  wednesday monday    saturday  saturday  saturday 
 [8] saturday  monday    wednesday saturday  saturday  thursday  monday   
[15] tuesday  
Levels: saturday friday thursday wednesday tuesday monday sunday</code></pre>
</div>
</div>
<p>Sometimes you will want to change the labels for a factor. You can accomplish this with <code>fct_recode</code>. The new labels are on the left, and the old labels are on the right. Notice that the order of the labels in <code>fct_recode</code> does not change the ordering of the factors levels.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1"></a>data <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(data,</span>
<span id="cb113-2"><a href="#cb113-2"></a>                  <span class="st">"mon"</span> <span class="ot">=</span> <span class="st">"monday"</span>,</span>
<span id="cb113-3"><a href="#cb113-3"></a>                  <span class="st">"tue"</span> <span class="ot">=</span> <span class="st">"tuesday"</span>,</span>
<span id="cb113-4"><a href="#cb113-4"></a>                  <span class="st">"wed"</span> <span class="ot">=</span> <span class="st">"wednesday"</span>,</span>
<span id="cb113-5"><a href="#cb113-5"></a>                  <span class="st">"thu"</span> <span class="ot">=</span> <span class="st">"thursday"</span>,</span>
<span id="cb113-6"><a href="#cb113-6"></a>                  <span class="st">"fri"</span> <span class="ot">=</span> <span class="st">"friday"</span>,</span>
<span id="cb113-7"><a href="#cb113-7"></a>                  <span class="st">"sat"</span> <span class="ot">=</span> <span class="st">"saturday"</span>,</span>
<span id="cb113-8"><a href="#cb113-8"></a>                  <span class="st">"sun"</span> <span class="ot">=</span> <span class="st">"sunday"</span>,)</span>
<span id="cb113-9"><a href="#cb113-9"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] sun thu wed mon sat sat sat sat mon wed sat sat thu mon tue
Levels: sat fri thu wed tue mon sun</code></pre>
</div>
</div>
<p>You might also want to collapse the levels of a factor into a set of super-ordinate labels, like “workday” and “weekend”. You can do this with <code>fct_collapse</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">fct_collapse</span>(data,</span>
<span id="cb115-2"><a href="#cb115-2"></a>                    <span class="at">workday =</span> <span class="fu">c</span>(<span class="st">"mon"</span>, <span class="st">"tue"</span>, <span class="st">"wed"</span>, <span class="st">"thu"</span>, <span class="st">"fri"</span>),</span>
<span id="cb115-3"><a href="#cb115-3"></a>                    <span class="at">weekend =</span> <span class="fu">c</span>(<span class="st">"sat"</span>, <span class="st">"sun"</span>))</span>
<span id="cb115-4"><a href="#cb115-4"></a><span class="fu">head</span>(data1, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] weekend workday workday workday weekend weekend weekend weekend workday
[10] workday weekend weekend workday workday workday
Levels: weekend workday</code></pre>
</div>
</div>
<p>The <code>fct_lump</code> function will keep the most common <code>n</code> levels and lump the others into a new level called “Other”. This is particularly helpful if you have categorical data with a lot of very small categories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">fct_lump</span>(data, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb117-2"><a href="#cb117-2"></a><span class="fu">head</span>(data1, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] sun   thu   Other mon   sat   sat   sat   sat   mon   Other sat   sat  
[13] thu   mon   tue  
Levels: sat thu tue mon sun Other</code></pre>
</div>
</div>
<p>“Other” looks strange here because its the only level with an upper case letter. As with any of the functions I show you, you can look at the help page for the function to see what arguments it takes. The <code>fct_lump</code> function takes an argument (<code>other_level</code>) that allows you to specify the name of the new level.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">fct_lump</span>(data, <span class="at">n =</span> <span class="dv">3</span>, <span class="at">other_level =</span> <span class="st">"???"</span>)</span>
<span id="cb119-2"><a href="#cb119-2"></a><span class="fu">head</span>(data1, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] sun thu ??? mon sat sat sat sat mon ??? sat sat thu mon tue
Levels: sat thu tue mon sun ???</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Generating Levels
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Sometimes you need to generate repetative factor levels (e.g., for a repeated measures design, or for a truth table). Our truth table will have 4 propositions: R, P, D, and R. Therefore our truth table will have 81 rows (because each proposition can either be true, false, or gay and we have four propositions; <span class="math inline">\(3 ^4 = 81\)</span>).</p>
<p>The <code>gl</code> function generates a factor with up to <code>n</code> levels, each repeated <code>k</code> times.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a><span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 2 2 3 3
Levels: 1 2 3</code></pre>
</div>
</div>
<p>The real clincher comes in the form of the <code>labels</code> argument. This allows you to specify the labels for each level.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1"></a>outcomes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"true"</span>, <span class="st">"false"</span>, <span class="st">"gay"</span>)</span>
<span id="cb123-2"><a href="#cb123-2"></a><span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">3</span>, <span class="at">labels =</span> outcomes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] true  true  true  false false false gay   gay   gay  
Levels: true false gay</code></pre>
</div>
</div>
<p>We can also (for our truth table) use the <code>length</code> argument to make sure that all of our vectors are the 81 elements long that we need them to be. This is what I need for my truth table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a>R <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">27</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb125-2"><a href="#cb125-2"></a>p <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">9</span>, <span class="at">length =</span> <span class="dv">81</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb125-3"><a href="#cb125-3"></a>d <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">3</span>, <span class="at">length =</span> <span class="dv">81</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb125-4"><a href="#cb125-4"></a>r <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">81</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb125-5"><a href="#cb125-5"></a></span>
<span id="cb125-6"><a href="#cb125-6"></a><span class="fu">tibble</span>(R, p, d, r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["R"],"name":[1],"type":["fct"],"align":["left"]},{"label":["p"],"name":[2],"type":["fct"],"align":["left"]},{"label":["d"],"name":[3],"type":["fct"],"align":["left"]},{"label":["r"],"name":[4],"type":["fct"],"align":["left"]}],"data":[{"1":"true","2":"true","3":"true","4":"true"},{"1":"true","2":"true","3":"true","4":"false"},{"1":"true","2":"true","3":"true","4":"gay"},{"1":"true","2":"true","3":"false","4":"true"},{"1":"true","2":"true","3":"false","4":"false"},{"1":"true","2":"true","3":"false","4":"gay"},{"1":"true","2":"true","3":"gay","4":"true"},{"1":"true","2":"true","3":"gay","4":"false"},{"1":"true","2":"true","3":"gay","4":"gay"},{"1":"true","2":"false","3":"true","4":"true"},{"1":"true","2":"false","3":"true","4":"false"},{"1":"true","2":"false","3":"true","4":"gay"},{"1":"true","2":"false","3":"false","4":"true"},{"1":"true","2":"false","3":"false","4":"false"},{"1":"true","2":"false","3":"false","4":"gay"},{"1":"true","2":"false","3":"gay","4":"true"},{"1":"true","2":"false","3":"gay","4":"false"},{"1":"true","2":"false","3":"gay","4":"gay"},{"1":"true","2":"gay","3":"true","4":"true"},{"1":"true","2":"gay","3":"true","4":"false"},{"1":"true","2":"gay","3":"true","4":"gay"},{"1":"true","2":"gay","3":"false","4":"true"},{"1":"true","2":"gay","3":"false","4":"false"},{"1":"true","2":"gay","3":"false","4":"gay"},{"1":"true","2":"gay","3":"gay","4":"true"},{"1":"true","2":"gay","3":"gay","4":"false"},{"1":"true","2":"gay","3":"gay","4":"gay"},{"1":"false","2":"true","3":"true","4":"true"},{"1":"false","2":"true","3":"true","4":"false"},{"1":"false","2":"true","3":"true","4":"gay"},{"1":"false","2":"true","3":"false","4":"true"},{"1":"false","2":"true","3":"false","4":"false"},{"1":"false","2":"true","3":"false","4":"gay"},{"1":"false","2":"true","3":"gay","4":"true"},{"1":"false","2":"true","3":"gay","4":"false"},{"1":"false","2":"true","3":"gay","4":"gay"},{"1":"false","2":"false","3":"true","4":"true"},{"1":"false","2":"false","3":"true","4":"false"},{"1":"false","2":"false","3":"true","4":"gay"},{"1":"false","2":"false","3":"false","4":"true"},{"1":"false","2":"false","3":"false","4":"false"},{"1":"false","2":"false","3":"false","4":"gay"},{"1":"false","2":"false","3":"gay","4":"true"},{"1":"false","2":"false","3":"gay","4":"false"},{"1":"false","2":"false","3":"gay","4":"gay"},{"1":"false","2":"gay","3":"true","4":"true"},{"1":"false","2":"gay","3":"true","4":"false"},{"1":"false","2":"gay","3":"true","4":"gay"},{"1":"false","2":"gay","3":"false","4":"true"},{"1":"false","2":"gay","3":"false","4":"false"},{"1":"false","2":"gay","3":"false","4":"gay"},{"1":"false","2":"gay","3":"gay","4":"true"},{"1":"false","2":"gay","3":"gay","4":"false"},{"1":"false","2":"gay","3":"gay","4":"gay"},{"1":"gay","2":"true","3":"true","4":"true"},{"1":"gay","2":"true","3":"true","4":"false"},{"1":"gay","2":"true","3":"true","4":"gay"},{"1":"gay","2":"true","3":"false","4":"true"},{"1":"gay","2":"true","3":"false","4":"false"},{"1":"gay","2":"true","3":"false","4":"gay"},{"1":"gay","2":"true","3":"gay","4":"true"},{"1":"gay","2":"true","3":"gay","4":"false"},{"1":"gay","2":"true","3":"gay","4":"gay"},{"1":"gay","2":"false","3":"true","4":"true"},{"1":"gay","2":"false","3":"true","4":"false"},{"1":"gay","2":"false","3":"true","4":"gay"},{"1":"gay","2":"false","3":"false","4":"true"},{"1":"gay","2":"false","3":"false","4":"false"},{"1":"gay","2":"false","3":"false","4":"gay"},{"1":"gay","2":"false","3":"gay","4":"true"},{"1":"gay","2":"false","3":"gay","4":"false"},{"1":"gay","2":"false","3":"gay","4":"gay"},{"1":"gay","2":"gay","3":"true","4":"true"},{"1":"gay","2":"gay","3":"true","4":"false"},{"1":"gay","2":"gay","3":"true","4":"gay"},{"1":"gay","2":"gay","3":"false","4":"true"},{"1":"gay","2":"gay","3":"false","4":"false"},{"1":"gay","2":"gay","3":"false","4":"gay"},{"1":"gay","2":"gay","3":"gay","4":"true"},{"1":"gay","2":"gay","3":"gay","4":"false"},{"1":"gay","2":"gay","3":"gay","4":"gay"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="coersion-and-checking" class="level3" data-number="3.2.5">
<h3 data-number="3.2.5" class="anchored" data-anchor-id="coersion-and-checking"><span class="header-section-number">3.2.5</span> Coersion and Checking</h3>
<p>Here is a list of the data types you’ve seen thus far:</p>
<ul>
<li>integer</li>
<li>numeric</li>
<li>complex</li>
<li>character</li>
<li>logical</li>
<li>factor</li>
</ul>
<p>Sometimes you want to check that the class of a variable is what you expect if to be (especially before you try to do something that only one type can do, like division). You can use the <code>is.*</code> functions to check the class of a variable (replacing <code>*</code> with the appropriate type).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1"></a>x <span class="ot">&lt;-</span> <span class="st">"zzz"</span></span>
<span id="cb126-2"><a href="#cb126-2"></a><span class="fu">is.integer</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1"></a><span class="fu">is.character</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>You can also coerce one type of data into another, although this is sometimes risky. Coercing something into a character is usually safe, but coercing something into a type like numeric or logical can cause errors. Often R will create NA values and produce a warning, as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1"></a>x <span class="ot">&lt;-</span> <span class="st">"zzz"</span></span>
<span id="cb130-2"><a href="#cb130-2"></a><span class="fu">as.numeric</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1"></a>x <span class="ot">&lt;-</span> <span class="st">"123"</span></span>
<span id="cb133-2"><a href="#cb133-2"></a><span class="fu">as.numeric</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 123</code></pre>
</div>
</div>
</section>
</section>
<section id="data-structures" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="data-structures"><span class="header-section-number">3.3</span> Data Structures</h2>
<section id="vectors" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="vectors"><span class="header-section-number">3.3.1</span> Vectors</h3>
<p>A vector is a one dimensional array of elements of the same type (e.g., all characters, all numerics). In R, essentially everything is a vector if you analyze it at a fine enough level of detail. You can create a vector with the <code>c()</code> function<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-important callout-titled" data-colapse="false">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Generating Sequences
</div>
</div>
<div class="callout-body-container callout-body">
<p>A far easier way to generate the vector above would be to use the <code>:</code> operator, which is described in <a href="#tip-logical_arithmetic" class="quarto-xref">Tip&nbsp;<span>3.1</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<p>Look at the help page of the <code>seq()</code> function by typing <code>?seq</code> in the console. <code>seq</code> takes arguments <code>from</code>, <code>to</code>, <code>by</code>, and <code>along</code>, which I will highlight here. We could recreate our vector with the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<p>You could provide only a <code>from</code> and a <code>by</code> and a <code>length</code> to get the same sequence</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<p>You could also go backwards:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">10</span>, <span class="at">to =</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 10  9  8  7  6  5  4  3  2  1</code></pre>
</div>
</div>
<p>If you want a sequence that is the same length as another vector, you could use the <code>along</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">198</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">13</span>, <span class="dv">0</span>, <span class="dv">178</span>, <span class="dv">20</span>)</span>
<span id="cb145-2"><a href="#cb145-2"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">1</span>, <span class="at">along =</span> x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0 0.2 0.4 0.6 0.8 1.0</code></pre>
</div>
</div>
<p>The <code>rep()</code> function is used to repeat a value a certain number of times.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1"></a><span class="fu">rep</span>(<span class="dv">1</span>, <span class="at">times =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
</div>
<p>You don’t just have to repeat single values. You can repeat vectors as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 1 2 3 1 2 3</code></pre>
</div>
</div>
<p>The <code>each</code> argument determines how many time each element in the vector is repeated each <code>time</code> there is a repetition.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 1 2 2 2 3 3 3</code></pre>
</div>
</div>
<p>There is no reason not to use the <code>each</code> and <code>times</code> arguments at the same time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each =</span> <span class="dv">2</span>, <span class="at">times =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4</code></pre>
</div>
</div>
<p>You can also specify how many times each element is repeated in each repetition. I specify cat to repeat five times, dog once, and fish twice.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1"></a>pets <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"fish"</span>)</span>
<span id="cb155-2"><a href="#cb155-2"></a><span class="fu">rep</span>(pets, <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cat"  "cat"  "cat"  "cat"  "cat"  "dog"  "fish" "fish"</code></pre>
</div>
</div>
</div>
</div>
<p>You can name elements in a vector by using the <code>names()</code> function. This is particularly useful for counts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1"></a>counts <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">101</span>, <span class="dv">28</span>, <span class="dv">57</span>, <span class="dv">4</span>, <span class="dv">2</span>)</span>
<span id="cb157-2"><a href="#cb157-2"></a><span class="fu">names</span>(counts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"F"</span>)</span>
<span id="cb157-3"><a href="#cb157-3"></a></span>
<span id="cb157-4"><a href="#cb157-4"></a>counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A   B   C   D   F 
101  28  57   4   2 </code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-important callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Subscripting
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>You can subset a vector by using square brackets. You can subset by index, with the index starting at 1 (not 0).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb159-2"><a href="#cb159-2"></a>x[<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>We can also subset based on another vector, selecting whichever indexes you like.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1"></a>x[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 8</code></pre>
</div>
</div>
<p>You can use negative indexes to exclude certain elements.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1"></a>x[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1"></a>x[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">1</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5  6  7  9 10</code></pre>
</div>
</div>
<p>You can also subset based on logicals. This is particularly useful for filtering data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6  7  8  9 10</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>vectors are very typical in data science and statistics. Take, for example, the heights of all the characters in Star Wars (in cm).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1"></a>heights <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>starwars<span class="sc">$</span>height</span>
<span id="cb169-2"><a href="#cb169-2"></a><span class="fu">names</span>(heights) <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>starwars<span class="sc">$</span>name</span>
<span id="cb169-3"><a href="#cb169-3"></a><span class="fu">head</span>(heights, <span class="at">n =</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Luke Skywalker                 C-3PO                 R2-D2 
                  172                   167                    96 
          Darth Vader           Leia Organa             Owen Lars 
                  202                   150                   178 
   Beru Whitesun Lars                 R5-D4     Biggs Darklighter 
                  165                    97                   183 
       Obi-Wan Kenobi      Anakin Skywalker        Wilhuff Tarkin 
                  182                   188                   180 
            Chewbacca              Han Solo                Greedo 
                  228                   180                   173 
Jabba Desilijic Tiure        Wedge Antilles      Jek Tono Porkins 
                  175                   170                   180 
                 Yoda             Palpatine             Boba Fett 
                   66                   170                   183 
                IG-88                 Bossk      Lando Calrissian 
                  200                   190                   177 
                Lobot                Ackbar            Mon Mothma 
                  175                   180                   150 
         Arvel Crynyd Wicket Systri Warrick             Nien Nunb 
                   NA                    88                   160 </code></pre>
</div>
</div>
<p>Where in the vector is the greatest height and where is the lowest? Let’s sort the vector and then view the first 3 and last 3 elements in the sorted version.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1"></a><span class="co"># sort the vector</span></span>
<span id="cb171-2"><a href="#cb171-2"></a>heights2 <span class="ot">&lt;-</span> <span class="fu">sort</span>(heights,</span>
<span id="cb171-3"><a href="#cb171-3"></a>                <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There is a problem here, even if it’s not immediately apparent. Sorting, by default, will remove all the <code>NA</code> values from the vector. We can check that elements were removed by comparing the length of the sorted and the unsorted vectors; the sorted vector is smaller.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1"></a><span class="co"># prints number of elements in vector (number of characters)</span></span>
<span id="cb172-2"><a href="#cb172-2"></a><span class="fu">length</span>(heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 87</code></pre>
</div>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1"></a><span class="fu">length</span>(heights2) <span class="sc">&lt;</span> <span class="fu">length</span>(heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Let’s try sorting again, but this time we will tell R what to do with the NA values using the <code>na.last</code> argument. By setting it to <code>TRUE</code>, we put all the NAs at the end of the vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1"></a>heights2 <span class="ot">&lt;-</span> <span class="fu">sort</span>(heights,</span>
<span id="cb176-2"><a href="#cb176-2"></a>                  <span class="at">decreasing =</span> <span class="cn">TRUE</span>,</span>
<span id="cb176-3"><a href="#cb176-3"></a>                  <span class="at">na.last =</span> <span class="cn">TRUE</span>)</span>
<span id="cb176-4"><a href="#cb176-4"></a></span>
<span id="cb176-5"><a href="#cb176-5"></a><span class="co"># verify that heights2 is the same length as the original data</span></span>
<span id="cb176-6"><a href="#cb176-6"></a><span class="fu">length</span>(heights2) <span class="sc">==</span> <span class="fu">length</span>(heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1"></a><span class="co"># print first 5 heights</span></span>
<span id="cb178-2"><a href="#cb178-2"></a><span class="fu">head</span>(heights2,</span>
<span id="cb178-3"><a href="#cb178-3"></a>     <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Yarael Poof     Tarfful     Lama Su 
        264         234         229 </code></pre>
</div>
</div>
<p>The tallest character is Yarael Poof (with a height of 264 cm), and</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1"></a><span class="co"># should be all NA values (which we put at the end)</span></span>
<span id="cb180-2"><a href="#cb180-2"></a><span class="fu">tail</span>(heights2,</span>
<span id="cb180-3"><a href="#cb180-3"></a>     <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Poe Dameron            BB8 Captain Phasma 
            NA             NA             NA </code></pre>
</div>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1"></a><span class="co"># we can use subscriptting to filter out NAs</span></span>
<span id="cb182-2"><a href="#cb182-2"></a><span class="fu">tail</span>(heights2[<span class="sc">!</span><span class="fu">is.na</span>(heights2)],</span>
<span id="cb182-3"><a href="#cb182-3"></a>     <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Wicket Systri Warrick          Ratts Tyerel                  Yoda 
                   88                    79                    66 </code></pre>
</div>
</div>
<p>Yoda has the smallest height (66 cm). We could also have achieved these conclusions using the <code>min</code> or <code>max</code> functions, but there’s a problem. The result we get is not Yoda and Yarael Poof; it’s <code>NA</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1"></a><span class="fu">max</span>(heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1"></a><span class="fu">max</span>(heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p><strong>Many vector functions have a <code>na.rm</code> argument which tells R to do the computation while ignoring all missing values</strong>. Setting this argument to <code>TRUE</code> is typically required to produce a numerical result (e.g., R won’t compute a mean for a vector with an <code>NA</code> value). In the case of min and max</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1"></a><span class="fu">max</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 264</code></pre>
</div>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1"></a><span class="fu">min</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 66</code></pre>
</div>
</div>
<p>A large range of descriptive statistics are available with built-in functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1"></a><span class="do">### centrality statistics</span></span>
<span id="cb192-2"><a href="#cb192-2"></a><span class="fu">sum</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14143</code></pre>
</div>
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1"></a><span class="fu">mean</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 174.6049</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1"></a><span class="fu">median</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 180</code></pre>
</div>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1"></a><span class="co"># get the first, second (median), and third quartiles</span></span>
<span id="cb198-2"><a href="#cb198-2"></a><span class="fu">quantile</span>(heights, </span>
<span id="cb198-3"><a href="#cb198-3"></a>         <span class="at">probs =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fl">0.25</span>,</span>
<span id="cb198-4"><a href="#cb198-4"></a>                     <span class="at">to =</span> <span class="fl">0.75</span>,</span>
<span id="cb198-5"><a href="#cb198-5"></a>                     <span class="at">by =</span> <span class="fl">0.25</span>),</span>
<span id="cb198-6"><a href="#cb198-6"></a>         <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>25% 50% 75% 
167 180 191 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1"></a><span class="do">### spread statistics</span></span>
<span id="cb200-2"><a href="#cb200-2"></a><span class="co"># range</span></span>
<span id="cb200-3"><a href="#cb200-3"></a><span class="fu">range</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  66 264</code></pre>
</div>
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1"></a><span class="co"># variance</span></span>
<span id="cb202-2"><a href="#cb202-2"></a><span class="fu">var</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1209.242</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1"></a><span class="co"># standard deviation</span></span>
<span id="cb204-2"><a href="#cb204-2"></a><span class="fu">sd</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 34.77416</code></pre>
</div>
</div>
<section id="correlation-variance-and-covariance" class="level4" data-number="3.3.1.1">
<h4 data-number="3.3.1.1" class="anchored" data-anchor-id="correlation-variance-and-covariance"><span class="header-section-number">3.3.1.1</span> Correlation, Variance, and Covariance</h4>
<p>These functions are incredibly important (at least in principle) to a lot of frequentist statistics. They take 2 numeric vectors, an <code>x</code> and <code>y</code>; or just a single matrix or data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1"></a><span class="co"># x and y are perfectly negatively correlated (r=-1)</span></span>
<span id="cb206-2"><a href="#cb206-2"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb206-3"><a href="#cb206-3"></a>y <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">1</span></span>
<span id="cb206-4"><a href="#cb206-4"></a></span>
<span id="cb206-5"><a href="#cb206-5"></a><span class="co"># computing the covariance, removing na values</span></span>
<span id="cb206-6"><a href="#cb206-6"></a><span class="fu">var</span>(x,</span>
<span id="cb206-7"><a href="#cb206-7"></a>    y,</span>
<span id="cb206-8"><a href="#cb206-8"></a>    <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -2.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1"></a><span class="co"># this is an equivalent computation of covariance</span></span>
<span id="cb208-2"><a href="#cb208-2"></a><span class="fu">cov</span>(x,</span>
<span id="cb208-3"><a href="#cb208-3"></a>    y,</span>
<span id="cb208-4"><a href="#cb208-4"></a>    <span class="at">use =</span> <span class="st">"na.or.complete"</span>,</span>
<span id="cb208-5"><a href="#cb208-5"></a>    <span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -2.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1"></a><span class="co"># you could also use a different method</span></span>
<span id="cb210-2"><a href="#cb210-2"></a><span class="fu">cov</span>(x,</span>
<span id="cb210-3"><a href="#cb210-3"></a>    y,</span>
<span id="cb210-4"><a href="#cb210-4"></a>    <span class="at">use =</span> <span class="st">"na.or.complete"</span>,</span>
<span id="cb210-5"><a href="#cb210-5"></a>    <span class="at">method =</span> <span class="st">"kendall"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -20</code></pre>
</div>
</div>
<p>Co-variances are typically standardized into correlations before they are interpreted. You can use the <code>cor</code> function to get a correlation coefficient calculated according to the methods outlined by <code>"pearson"</code>, <code>"kendall"</code>, and <code>"spearman"</code>. We will calculate Pearson’s <span class="math inline">\(r\)</span>, which is standardized number (between -1, indicating perfect negative correlation, and 1, indicating perfect positive correlation).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1"></a><span class="fu">cor</span>(x,</span>
<span id="cb212-2"><a href="#cb212-2"></a>    y,</span>
<span id="cb212-3"><a href="#cb212-3"></a>    <span class="at">use =</span> <span class="st">"na.or.complete"</span>,</span>
<span id="cb212-4"><a href="#cb212-4"></a>    <span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1</code></pre>
</div>
</div>
</section>
<section id="random-sampling" class="level4" data-number="3.3.1.2">
<h4 data-number="3.3.1.2" class="anchored" data-anchor-id="random-sampling"><span class="header-section-number">3.3.1.2</span> Random Sampling</h4>
<p>R has a function called <code>sample</code> that is useful for generating a random sample of data, provided with some probabilities. For example, if you wanted to simulate the roll of a die, you could take a random sample (of size 1) from the sequence of numbers from 1 to 6:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>Often you will want a sample with a size larger than 1. You can use the <code>replace</code> argument to allow for repeated sampling, as would be the case in 3 repeated rolls of a die.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 3 3</code></pre>
</div>
</div>
<p>You can also use the <code>prob</code> argument to specify the probability of each outcome. For example, if you wanted to simulate a weighted die, you could use the following probabilities:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 6</code></pre>
</div>
</div>
<p>R also allows you to generate random numbers from a variety of distributions - this is the <code>r*</code> series of functions (where <code>*</code> is the name of a distribution - see <code>?distributions</code> for more information). For example, to generate 5 random numbers from a normal distribution with a mean of 0 and a standard deviation of 1, you could use the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1"></a><span class="fu">rnorm</span>(<span class="dv">5</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.7731497 -1.0539902  0.7413780 -1.1913741 -0.3632255</code></pre>
</div>
</div>
<p>Each distribution also has an associated <code>d</code>, <code>p</code>, and <code>q</code> function. The <code>d</code> function gives the density of the distribution at a given point, the <code>p</code> function gives the cumulative distribution function of the distribution at a given point, and the <code>q</code> function gives the quantile of the distribution at a given probability.</p>
<p>The difference between <code>d</code> and <code>p</code> is easiest to show graphically.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_r_101_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_r_101_files/figure-html/unnamed-chunk-75-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I showed the <code>quantile</code> function above. the <code>q</code> series distribution functions are used to calculate quantiles. For example, to calculate the 0.95 quantile of the standard normal distribution, you could use the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1"></a><span class="fu">qnorm</span>(<span class="fl">0.95</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.644854</code></pre>
</div>
</div>
<p>If we wanted specific quantiles, we should specify them as the first argument. Here I select a variety of probabilities that show the empirical rule - about 68% of the data should be within 1 standard deviation of the mean, 95% within 2, and 99.7% within 3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1"></a><span class="fu">tibble</span>(<span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.0015</span>, <span class="fl">0.025</span>, <span class="fl">0.05</span>, <span class="fl">0.16</span>, <span class="fl">0.84</span>, <span class="fl">0.95</span>, <span class="fl">0.975</span>, <span class="fl">0.9985</span>),</span>
<span id="cb224-2"><a href="#cb224-2"></a>       <span class="at">z =</span> <span class="fu">qnorm</span>(quantile, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["quantile"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.0015","2":"-2.9677379"},{"1":"0.0250","2":"-1.9599640"},{"1":"0.0500","2":"-1.6448536"},{"1":"0.1600","2":"-0.9944579"},{"1":"0.8400","2":"0.9944579"},{"1":"0.9500","2":"1.6448536"},{"1":"0.9750","2":"1.9599640"},{"1":"0.9985","2":"2.9677379"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="lists" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="lists"><span class="header-section-number">3.3.2</span> Lists</h3>
<p>Lists are a very flexible data structure in R. The most simple lists can be though of as vectors with obligatorily named elements (elements in vectors can be named, but not obligatorily so). You can create a list with the <code>list</code> function, and access elements with the <code>$</code> operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1"></a><span class="co"># creating a list</span></span>
<span id="cb225-2"><a href="#cb225-2"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb225-3"><a href="#cb225-3"></a>my_list<span class="sc">$</span>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>What’s neat about lists, compared to vectors, is that they can store multiple types of data (which vectors cannot). For example, you could store a vector, a matrix, and a data frame in a single list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1"></a><span class="co"># creating a list with a string, a vector, a matrix, and a list</span></span>
<span id="cb227-2"><a href="#cb227-2"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="st">"hello"</span>, <span class="at">b =</span> <span class="dv">2</span><span class="sc">:-</span><span class="dv">1</span>, <span class="at">c =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">nrow =</span> <span class="dv">2</span>), <span class="at">d =</span> my_list)</span>
<span id="cb227-3"><a href="#cb227-3"></a>my_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] "hello"

$b
[1]  2  1  0 -1

$c
     [,1] [,2]
[1,]    1    3
[2,]    2    4

$d
$d$a
[1] 1

$d$b
[1] 2

$d$c
[1] 3</code></pre>
</div>
</div>
<p>You can access elements of a list with the <code>$</code> operator, or with double square brackets <code>[[ ]]</code>. The double square brackets are useful when you want to access elements programmatically.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1"></a><span class="co"># accessing elements of a list</span></span>
<span id="cb229-2"><a href="#cb229-2"></a>my_list<span class="sc">$</span>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1"></a>my_list[[<span class="st">"a"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello"</code></pre>
</div>
</div>
</section>
<section id="data-frames-and-tibbles" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="data-frames-and-tibbles"><span class="header-section-number">3.3.3</span> Data Frames and Tibbles</h3>
<p>Data frames are the most common data structure in R. A data frame is nothing more than a collection of vectors of the same length. This might initially seem quite a strange definition I have just provided, but stay with me. The data.frame is the closest correspondent to a spreadsheet. It stores data in rectangular form (i.e., in a table with rows and columns). The tidy data framework tells us that each of the columns in the table must represent a single variable and each row a single observation. The variables are each represented by a vector of values. The entire data frame is constructed by putting the vector for each variable side-by-side. Like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1"></a>a  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb233-2"><a href="#cb233-2"></a>b  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)</span>
<span id="cb233-3"><a href="#cb233-3"></a><span class="fu">data.frame</span>(<span class="at">col_one =</span> a, <span class="at">col_two =</span> b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["col_one"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["col_two"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"a"},{"1":"2","2":"b"},{"1":"3","2":"c"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Hadley Wickham’s response to the data.frame is the tibble, which essentially the same exact data structure. The biggest difference between a data.frame and a tibble is the way that they print in an R console - tibbles are more human-readable (unfortunately, I cannot demonstrate this difference here). Similarly to above, we could create a tibble using the <code>tibble</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1"></a><span class="fu">tibble</span>(<span class="at">col_one =</span> a, <span class="at">col_two =</span> b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["col_one"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["col_two"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"a"},{"1":"2","2":"b"},{"1":"3","2":"c"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="other-data-structures" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="other-data-structures"><span class="header-section-number">3.3.4</span> Other Data Structures</h3>
<p>There are two more base R data structures that I want to show you, but we will make much less use of them. For our purposes, we will primarily be using tibbles.</p>
<p>The first is a matrix. A matrix is a two-dimensional array that stores data of the same type (almost always numeric). You can create a matrix with the <code>matrix</code> function. Matrices are frequently used in linear algebra, and we will be using them for that purpose later (when and if we get to latent semantic analysis, which heavily employs matrices as a data structure). Tibbles are more flexible than matrices because they can store data of different types. For lots of reasons, however, computers are really fast at doing linear algebra, so matrix operations can often be more efficient than tibble operations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1"></a><span class="co"># numeric matrix</span></span>
<span id="cb235-2"><a href="#cb235-2"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1"></a><span class="co"># character matrix</span></span>
<span id="cb237-2"><a href="#cb237-2"></a><span class="fu">matrix</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>], <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,] "a"  "d"  "g" 
[2,] "b"  "e"  "h" 
[3,] "c"  "f"  "i" </code></pre>
</div>
</div>
<p>Finally, and this is the worst, there is a data type in R that is just called an array. You may think: wait a minute, didn’t I just describe a vector as a one-dimensional array and a matrix as an array with two-dimensions? Of course, you are correct. Someone made the bat shit decision to name a data structure <code>array</code> even though there are two other data structures that are also arrays and which are used a thousand times more. So, then, what is an array?</p>
<p>An array is a three-or-more dimensional array that stores data of the same type. I very seldom make use of arrays, but occasionally they are helpful (like matrices, operations on arrays tend to be optimized to shit). This is a three dimensional array. As you can see, R prints each layer of the 3x3x3 array separately in a sequence of 2-dimensional matrices. This is because it is not possible to print all three dimensions at the same time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1"></a><span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">27</span>, <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , 1

     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9

, , 2

     [,1] [,2] [,3]
[1,]   10   13   16
[2,]   11   14   17
[3,]   12   15   18

, , 3

     [,1] [,2] [,3]
[1,]   19   22   25
[2,]   20   23   26
[3,]   21   24   27</code></pre>
</div>
</div>
</section>
</section>
<section id="programming-basics" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="programming-basics"><span class="header-section-number">3.4</span> Programming Basics</h2>
<section id="functions" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="functions"><span class="header-section-number">3.4.1</span> Functions</h3>
<p>I just showed you a lot of functions, but you can (and surely at some point will) make your own. This is a super simple doubling function that highlights the syntax. In the first line, I name the function (<code>double_me</code>), then I tell R that it is a function and that it takes one argument, <code>number</code>. When you call it, the function returns the result of the last line of code in the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1"></a>double_me <span class="ot">&lt;-</span> <span class="cf">function</span>(number) {</span>
<span id="cb241-2"><a href="#cb241-2"></a>  number <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb241-3"><a href="#cb241-3"></a>}</span>
<span id="cb241-4"><a href="#cb241-4"></a><span class="fu">double_me</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>Functions can also take optional arguments, which must always come after the obligatory arguments.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1"></a>greet_me <span class="ot">&lt;-</span> <span class="cf">function</span>(name, <span class="at">time =</span> <span class="st">"morning"</span>) {</span>
<span id="cb243-2"><a href="#cb243-2"></a>  <span class="fu">paste0</span>(<span class="st">"Good "</span>, time, <span class="st">", "</span>, name, <span class="st">"!"</span>)</span>
<span id="cb243-3"><a href="#cb243-3"></a>}</span>
<span id="cb243-4"><a href="#cb243-4"></a><span class="fu">greet_me</span>(<span class="at">name =</span> <span class="st">"Hunter"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Good morning, Hunter!"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1"></a><span class="fu">greet_me</span>(<span class="at">name =</span> <span class="st">"Hunter"</span>, <span class="at">time =</span> <span class="st">"evening"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Good evening, Hunter!"</code></pre>
</div>
</div>
<p>I’ll show you one more function that computes a factorial. A factorial is the product of all positive integers up to a given number. For example, the factorial of 5 is <span class="math inline">\(5 * 4 * 3 * 2 * 1 = 120\)</span>. The best and easiest way to approach this function is with <strong>recursion</strong>. This means that you write a function that calls itself. The idea with the factorial works like this: if <span class="math inline">\(5! = 5 * 4 * 3 * 2 * 1\)</span> and <span class="math inline">\(4! = 4 * 3 * 2 * 1\)</span>, then <span class="math inline">\(5! = 5 * 4!\)</span>, or-more generally-<span class="math inline">\(n! = n * (n-1)!\)</span>. This is the recursive part; there is a factorial on both sides of the equation. Recursion can be tricky. You must always remember to include a <strong>base case</strong> (in this instance, when n = 1) that tells the function to stop calling itself. If you don’t, the function will call itself infinitely, which is less than ideal and unlikely to result in a correct computation. This function features <code>return</code> statements which explicitly tell R what value to return. This is needed because the return value is not the last line of code in the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1"></a>factorial <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb247-2"><a href="#cb247-2"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"calculating factorial of"</span>, n))</span>
<span id="cb247-3"><a href="#cb247-3"></a>  <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb247-4"><a href="#cb247-4"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb247-5"><a href="#cb247-5"></a>  } <span class="cf">else</span> {</span>
<span id="cb247-6"><a href="#cb247-6"></a>    <span class="fu">return</span>(n <span class="sc">*</span> <span class="fu">factorial</span>(n <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb247-7"><a href="#cb247-7"></a>  }</span>
<span id="cb247-8"><a href="#cb247-8"></a>}</span>
<span id="cb247-9"><a href="#cb247-9"></a><span class="fu">factorial</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "calculating factorial of 5"
[1] "calculating factorial of 4"
[1] "calculating factorial of 3"
[1] "calculating factorial of 2"
[1] "calculating factorial of 1"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 120</code></pre>
</div>
</div>
</section>
<section id="control-flow" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="control-flow"><span class="header-section-number">3.4.2</span> Control Flow</h3>
<p>Control flow is the order in which the code is executed. As we saw in the first chapter, programming relies on the ability to repeatedly run the same code and also to conditionally run some code. R has a few control flow structures that I’m going to review: the <code>for</code> loop, the <code>while</code> loop, the <code>repeat</code> loop, and the <code>if</code> statement.</p>
<p>Let’s do the loops, first. A for loop is useful when you want to run the same code a certain number of times. In the for loop, we have to give R a variable (<code>i</code> in this case) as well as a sequence (the vector <code>1:5</code> in this case). The code inside the curly braces will be run for each value of <code>i</code> in the sequence.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb250-2"><a href="#cb250-2"></a>  <span class="fu">print</span>(i)</span>
<span id="cb250-3"><a href="#cb250-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
<p>While loops run a certain portion of code repeatedly until a condition is no longer met. The condition is what goes in the parentheses. Typically while loops will change the value of a variable inside the loop, so that the condition is eventually no longer met. This is performed by the line <code>i &lt;- i + 1</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb252-2"><a href="#cb252-2"></a><span class="cf">while</span>(i <span class="sc">&lt;=</span> <span class="dv">5</span>) {</span>
<span id="cb252-3"><a href="#cb252-3"></a>  <span class="fu">print</span>(i)</span>
<span id="cb252-4"><a href="#cb252-4"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb252-5"><a href="#cb252-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
<p>Repeat loops are a little trickier and less common than for or while loops. They run a portion of code indefinitely until a <code>break</code> statement is encountered. It is far too easy, if you’re not careful, to create an infinite loop if you forget the <code>break</code> statement. The <code>break</code> statment ends the loop. In this case, the loop will run until <code>i</code> is greater than 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb254-2"><a href="#cb254-2"></a><span class="cf">repeat</span> {</span>
<span id="cb254-3"><a href="#cb254-3"></a>  <span class="fu">print</span>(i)</span>
<span id="cb254-4"><a href="#cb254-4"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb254-5"><a href="#cb254-5"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">5</span>) {</span>
<span id="cb254-6"><a href="#cb254-6"></a>    <span class="cf">break</span></span>
<span id="cb254-7"><a href="#cb254-7"></a>  }</span>
<span id="cb254-8"><a href="#cb254-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
<p>The <code>if</code> statement is used to conditionally run code. If the condition in the parentheses is met, the code inside the curly braces will run. If the condition is not met, the code will not run. One example of an if statement in located in the above <code>repeat</code> loop. The condition there is <code>i &gt; 5</code>, and when the condition is met, the <code>break</code> statement is executed, stopping the loop.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1"></a><span class="cf">if</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb256-2"><a href="#cb256-2"></a>  <span class="fu">print</span>(<span class="st">"This will print"</span>)</span>
<span id="cb256-3"><a href="#cb256-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This will print"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1"></a><span class="cf">if</span> (<span class="cn">FALSE</span>) {</span>
<span id="cb258-2"><a href="#cb258-2"></a>  <span class="fu">print</span>(<span class="st">"This will not print"</span>)</span>
<span id="cb258-3"><a href="#cb258-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also add an <code>else</code> statement to an <code>if</code> statement. This code will run if the condition is not met.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1"></a>i <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb259-2"><a href="#cb259-2"></a><span class="cf">if</span> (i <span class="sc">&lt;=</span> <span class="dv">5</span>) {</span>
<span id="cb259-3"><a href="#cb259-3"></a>  <span class="fu">print</span>(<span class="st">"i is less than or equal to 5"</span>)</span>
<span id="cb259-4"><a href="#cb259-4"></a>} <span class="cf">else</span> {</span>
<span id="cb259-5"><a href="#cb259-5"></a>  <span class="fu">print</span>(<span class="st">"i is greater than 5"</span>)</span>
<span id="cb259-6"><a href="#cb259-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "i is greater than 5"</code></pre>
</div>
</div>


<!-- -->

</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Editors note: This is a simplified telling of how R stores integers in memory. For simplicity, the binary digit is interpreted as if the first (leftmost) bit corresponded to <span class="math inline">\(2^0\)</span>. IRL, R most likely reads the bits backwards such that the last (rightmost) bit corresponds to <span class="math inline">\(2^0\)</span>. This is just one example, but there are numerous complications that I simply do not mention.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>You can use the operator <code>**</code> in place of <code>^</code>, and I frequently do. R translates <code>**</code> into <code>^</code> before evaluating any expression.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>mostly a science/engineering thing; see <a href="https://en.wikipedia.org/wiki/Significant_figures">Wikipedia page</a> for review.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><code>c()</code> stands for concatenate.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02_r_and_friends.html" class="pagination-link" aria-label="Modern R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Modern R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04_visualization.html" class="pagination-link" aria-label="Visualization">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualization</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb261" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb261-1"><a href="#cb261-1"></a><span class="fu"># R 101</span></span>
<span id="cb261-2"><a href="#cb261-2"></a></span>
<span id="cb261-3"><a href="#cb261-3"></a><span class="at">&gt; -   R competence: read R expressions written by others (allowing the language to serve a communicative purpose), and write R expressions that are readable and align with best practices within the open source R community.</span></span>
<span id="cb261-4"><a href="#cb261-4"></a><span class="at">&gt; -   describe R's data types and the use of each: strings, numerics (floating point "doubles", integers, and complex numbers), logicals, datetimes, and factors</span></span>
<span id="cb261-5"><a href="#cb261-5"></a><span class="at">&gt; -   describe R's data structures and the use of each: including, vectors (1-dimensional arrays), matrices (2-dimensional arrays), arrays (more than 2-dimensional arrays), lists (key-value pairs), data frames, and tibbles</span></span>
<span id="cb261-6"><a href="#cb261-6"></a></span>
<span id="cb261-7"><a href="#cb261-7"></a><span class="in">```{r setup, echo=FALSE, include=FALSE}</span></span>
<span id="cb261-8"><a href="#cb261-8"></a><span class="in">library(tidyverse)</span></span>
<span id="cb261-9"><a href="#cb261-9"></a></span>
<span id="cb261-10"><a href="#cb261-10"></a><span class="in">```</span></span>
<span id="cb261-11"><a href="#cb261-11"></a></span>
<span id="cb261-12"><a href="#cb261-12"></a>This tutorial is adapted from a fabulous <span class="co">[</span><span class="ot">youtube video by Very Normal</span><span class="co">](https://www.youtube.com/watch?v=QJCt9GNCD1M)</span>, which you should definitely watch.</span>
<span id="cb261-13"><a href="#cb261-13"></a></span>
<span id="cb261-14"><a href="#cb261-14"></a><span class="fu">## Names and Assignment</span></span>
<span id="cb261-15"><a href="#cb261-15"></a></span>
<span id="cb261-16"><a href="#cb261-16"></a>By far the most common thing you will do in R is assigning values to names. This is done with the assignment operator <span class="in">`&lt;-`</span>. You can also use <span class="in">`=`</span> for assignment, but it is less common in R. The <span class="in">`&lt;-`</span> operator assigns the value on the right to the name on the left. Whenever you want to retrieve the value, you can use the name.</span>
<span id="cb261-17"><a href="#cb261-17"></a></span>
<span id="cb261-20"><a href="#cb261-20"></a><span class="in">```{r}</span></span>
<span id="cb261-21"><a href="#cb261-21"></a>the_name <span class="ot">&lt;-</span> <span class="dv">10</span>L</span>
<span id="cb261-22"><a href="#cb261-22"></a><span class="fu">print</span>(the_name)</span>
<span id="cb261-23"><a href="#cb261-23"></a><span class="in">```</span></span>
<span id="cb261-24"><a href="#cb261-24"></a></span>
<span id="cb261-25"><a href="#cb261-25"></a>There are restrictions to the names that objects can have in R. Names cannot start with a number. Names are case-sensitive, meaning that <span class="in">`X`</span> is not the same thing as <span class="in">`x`</span>.</span>
<span id="cb261-26"><a href="#cb261-26"></a></span>
<span id="cb261-29"><a href="#cb261-29"></a><span class="in">```{r}</span></span>
<span id="cb261-30"><a href="#cb261-30"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb261-31"><a href="#cb261-31"></a>X <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb261-32"><a href="#cb261-32"></a><span class="fu">print</span>(x)</span>
<span id="cb261-33"><a href="#cb261-33"></a><span class="in">```</span></span>
<span id="cb261-34"><a href="#cb261-34"></a></span>
<span id="cb261-35"><a href="#cb261-35"></a>Names can contain letters, numbers, periods, and underscores. They cannot contain spaces.</span>
<span id="cb261-36"><a href="#cb261-36"></a></span>
<span id="cb261-37"><a href="#cb261-37"></a><span class="ss">* </span><span class="in">`2020_data`</span> is not a valid name because it starts with a number</span>
<span id="cb261-38"><a href="#cb261-38"></a><span class="ss">* </span><span class="in">`data 2020`</span> is not a valid name because it contains a space</span>
<span id="cb261-39"><a href="#cb261-39"></a><span class="ss">* </span><span class="in">`x2020_data`</span> is a valid name</span>
<span id="cb261-40"><a href="#cb261-40"></a><span class="ss">* </span><span class="in">`data.2020`</span> and <span class="in">`data_2020`</span> are valid names. </span>
<span id="cb261-41"><a href="#cb261-41"></a></span>
<span id="cb261-42"><a href="#cb261-42"></a>To the greatest extent possible, you should try to use names that are informative and short. This makes your code easier to write (because of the short name) and easier to read (because of the informative name). </span>
<span id="cb261-43"><a href="#cb261-43"></a></span>
<span id="cb261-44"><a href="#cb261-44"></a>That is what you need to write R code that will run. But what about writing R code that is readable? This is where the <span class="co">[</span><span class="ot">tidyverse style guide</span><span class="co">](https://style.tidyverse.org/index.html)</span> comes in. The tidyverse style guide is a set of conventions that the tidyverse team has developed to make R code more readable. The style guide is not a set of rules that you must follow, but it is a set of conventions that you should follow if you want your code to be readable by others.</span>
<span id="cb261-45"><a href="#cb261-45"></a></span>
<span id="cb261-46"><a href="#cb261-46"></a>The tidyverse style guide has a lot of rules, but here are a few of the most important naming conventions:</span>
<span id="cb261-47"><a href="#cb261-47"></a></span>
<span id="cb261-48"><a href="#cb261-48"></a><span class="ss">* </span>names should only contain lowercase letters, numbers, and underscores</span>
<span id="cb261-49"><a href="#cb261-49"></a><span class="ss">* </span>variable names should generally be nominal</span>
<span id="cb261-50"><a href="#cb261-50"></a><span class="ss">* </span>function names should generally be verbal</span>
<span id="cb261-51"><a href="#cb261-51"></a></span>
<span id="cb261-52"><a href="#cb261-52"></a>Finally, the last thing you want to avoid is overwriting the name of a function. If you assign a value to <span class="in">`T`</span>, you will no longer be able to use it as a shortcut for <span class="in">`TRUE`</span>. If you assign a value to <span class="in">`mean`</span>, you will no longer be able to use that function to calculate the mean of a vector. You really need to be cautious about this, which I understand may be difficult as you learn. It's a good habit to develop, and it will save you from having to debug this sort of error, which is often a difficult and time-consuming process.</span>
<span id="cb261-53"><a href="#cb261-53"></a></span>
<span id="cb261-54"><a href="#cb261-54"></a><span class="fu">## data types</span></span>
<span id="cb261-55"><a href="#cb261-55"></a></span>
<span id="cb261-56"><a href="#cb261-56"></a><span class="in">`class`</span>: the function that you use when you want to know what type of data is stored in an R object.</span>
<span id="cb261-57"><a href="#cb261-57"></a></span>
<span id="cb261-58"><a href="#cb261-58"></a><span class="fu">### Numbers</span></span>
<span id="cb261-59"><a href="#cb261-59"></a></span>
<span id="cb261-60"><a href="#cb261-60"></a>**Integers** are specified with an <span class="in">`L`</span>:</span>
<span id="cb261-61"><a href="#cb261-61"></a></span>
<span id="cb261-64"><a href="#cb261-64"></a><span class="in">```{r}</span></span>
<span id="cb261-65"><a href="#cb261-65"></a>int <span class="ot">&lt;-</span> <span class="dv">5</span>L</span>
<span id="cb261-66"><a href="#cb261-66"></a><span class="fu">class</span>(int)</span>
<span id="cb261-67"><a href="#cb261-67"></a><span class="fu">print</span>(int)</span>
<span id="cb261-68"><a href="#cb261-68"></a><span class="in">```</span></span>
<span id="cb261-69"><a href="#cb261-69"></a></span>
<span id="cb261-70"><a href="#cb261-70"></a>without the <span class="in">`L`</span>, the integer will be interpreted as **numeric.** Numeric data are numbers that have a decimal point (in this case <span class="in">`.0`</span>, which R does not print):</span>
<span id="cb261-71"><a href="#cb261-71"></a></span>
<span id="cb261-74"><a href="#cb261-74"></a><span class="in">```{r}</span></span>
<span id="cb261-75"><a href="#cb261-75"></a>num <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb261-76"><a href="#cb261-76"></a><span class="fu">class</span>(num)</span>
<span id="cb261-77"><a href="#cb261-77"></a><span class="fu">print</span>(num)</span>
<span id="cb261-78"><a href="#cb261-78"></a><span class="in">```</span></span>
<span id="cb261-79"><a href="#cb261-79"></a></span>
<span id="cb261-80"><a href="#cb261-80"></a>Numeric is a super-ordinate category that contains **doubles** and **integers**. Numeric data is stored as **doubles** (i.e., numbers that have decimal points). You can see how a value is stored on the machine (i.e., to see that numeric values are stored as doubles, always) using the <span class="in">`typeof`</span> function.</span>
<span id="cb261-81"><a href="#cb261-81"></a></span>
<span id="cb261-84"><a href="#cb261-84"></a><span class="in">```{r}</span></span>
<span id="cb261-85"><a href="#cb261-85"></a><span class="fu">typeof</span>(int)</span>
<span id="cb261-86"><a href="#cb261-86"></a><span class="fu">typeof</span>(num)</span>
<span id="cb261-87"><a href="#cb261-87"></a><span class="in">```</span></span>
<span id="cb261-88"><a href="#cb261-88"></a></span>
<span id="cb261-89"><a href="#cb261-89"></a>As you can see, the class <span class="in">`numeric`</span> are stored as doubles (i.e, using 64 bits), whether the value being stored is an integer or not. Values with the class <span class="in">`integer`</span> are stored as integers (i.e., using only 32 bits).</span>
<span id="cb261-90"><a href="#cb261-90"></a></span>
<span id="cb261-91"><a href="#cb261-91"></a>::: {.callout-note collapse="true"}</span>
<span id="cb261-92"><a href="#cb261-92"></a><span class="fu">#### Double Precision?</span></span>
<span id="cb261-93"><a href="#cb261-93"></a></span>
<span id="cb261-94"><a href="#cb261-94"></a>Computers store numbers in sequences of <span class="in">`0`</span>s and <span class="in">`1`</span>s. A single position in this sequence, which could be occupied by either a <span class="in">`0`</span> or a <span class="in">`1`</span> is called a **bit**. A number stored in this way is called a **binary number**. Here is an example of an 8-bit binary number:</span>
<span id="cb261-95"><a href="#cb261-95"></a></span>
<span id="cb261-96"><a href="#cb261-96"></a><span class="in">`00101101`</span></span>
<span id="cb261-97"><a href="#cb261-97"></a></span>
<span id="cb261-98"><a href="#cb261-98"></a>Decoding this number is a straightforward matter. Each position in the sequence represents a power of 2. The rightmost position represents $2^0$, and the leftmost position (in an 8 bit number) represents $2^7$. The number encoded is a weighted sum of the powers of 2. <span class="in">`00101101`</span> is decoded as:</span>
<span id="cb261-99"><a href="#cb261-99"></a></span>
<span id="cb261-100"><a href="#cb261-100"></a>$$</span>
<span id="cb261-101"><a href="#cb261-101"></a>\text{number} = \sum_{i=0}^{7} \text{bit}_i \times 2^i </span>
<span id="cb261-102"><a href="#cb261-102"></a>$$</span>
<span id="cb261-103"><a href="#cb261-103"></a></span>
<span id="cb261-104"><a href="#cb261-104"></a>Omitting the <span class="in">`0`</span>s, <span class="in">`00101101`</span> works out to be:</span>
<span id="cb261-105"><a href="#cb261-105"></a></span>
<span id="cb261-106"><a href="#cb261-106"></a>$$</span>
<span id="cb261-107"><a href="#cb261-107"></a>(1 \times 2^2) + (1 \times 2^4) + (1 \times 2^5) + (1 \times 2^7) = 4 + 16 + 32 + 128 = 180</span>
<span id="cb261-108"><a href="#cb261-108"></a>$$</span>
<span id="cb261-109"><a href="#cb261-109"></a></span>
<span id="cb261-110"><a href="#cb261-110"></a>You might notice a couple of things about this scheme of an **8-bit number** that I have put forth. This scheme can only represent integers (a result of using integer multiplication with powers of 2, which are always integers). You may also have noticed that one could represent 0 in this format, but never -1. All of the integers decoded in this manner will be positive.</span>
<span id="cb261-111"><a href="#cb261-111"></a></span>
<span id="cb261-112"><a href="#cb261-112"></a>You might use a **sign bit** at the beginning of the sequence to fix this second problem. When the sign bit is <span class="in">`1`</span>, the integer is negative; when it is <span class="in">`0`</span>, the integer is positive. The new decoding scheme using a sign bit would be represented like this:</span>
<span id="cb261-113"><a href="#cb261-113"></a></span>
<span id="cb261-114"><a href="#cb261-114"></a>$$</span>
<span id="cb261-115"><a href="#cb261-115"></a>\text{number} = (-1)^{bit_0} + \sum_{i=0}^6 bit_{i+1} \times 2^i</span>
<span id="cb261-116"><a href="#cb261-116"></a>$$</span>
<span id="cb261-117"><a href="#cb261-117"></a></span>
<span id="cb261-118"><a href="#cb261-118"></a>Again ignoring the <span class="in">`0`</span>s (except for the sign bit), <span class="in">`00101101`</span> works out to be:</span>
<span id="cb261-119"><a href="#cb261-119"></a></span>
<span id="cb261-120"><a href="#cb261-120"></a>$$</span>
<span id="cb261-121"><a href="#cb261-121"></a>(-1)^0 + (1 \times 2^1) + (1 \times 2^3) + (1 \times 2^4) + (1 \times 2^6) = 1 + 2 + 8 + 16 + 64 = 91</span>
<span id="cb261-122"><a href="#cb261-122"></a>$$</span>
<span id="cb261-123"><a href="#cb261-123"></a></span>
<span id="cb261-124"><a href="#cb261-124"></a>We could now easily represent -91 by changing the sign bit: <span class="in">`10101101`</span>.</span>
<span id="cb261-125"><a href="#cb261-125"></a></span>
<span id="cb261-126"><a href="#cb261-126"></a>This scheme still can't represent non-integers, and our 8-bits are quite limiting. The largest and smallest numbers we can represent are positive and negative 127 (<span class="in">`01111111`</span> and <span class="in">`11111111`</span>, respectively). The limiting factor is, of course, the limited number of bits we have (only 8), and the limited amount of information those 8 bits can encode (see information theory for a formalized, quantitative way to think about information in bits - developed by Claude Shannon at Bell Labs).</span>
<span id="cb261-127"><a href="#cb261-127"></a></span>
<span id="cb261-128"><a href="#cb261-128"></a>For historical reasons, a 32 bit number is called a **single precision** number. A 32 bit number encoded as described above is a 32 bit integer. **In R, integers are stored as 32 bit numbers**. This means that the range of integers R can store goes from -2,147,483,647 (-2.1 billion; <span class="in">`11111111111111111111111111111111`</span>) to 2,147,483,647 (2.1 billion; <span class="in">`01111111111111111111111111111111`</span>)<span class="ot">[^03_r_101-1]</span>.</span>
<span id="cb261-129"><a href="#cb261-129"></a></span>
<span id="cb261-130"><a href="#cb261-130"></a>**Double precision floating point numbers** (doubles) are 64 bit numbers with decimal points. The two schemes I outline can only encode integers. Encoding decimal values requires a more complicated scheme that I have no intention of fully explaining (as I have for 8 and 32 bit integers). Here is a <span class="co">[</span><span class="ot">Wikipedia page</span><span class="co">](https://en.wikipedia.org/wiki/Double-precision_floating-point_format)</span> if you care all that much.</span>
<span id="cb261-131"><a href="#cb261-131"></a></span>
<span id="cb261-132"><a href="#cb261-132"></a>Briefly, the leftmost bit is still a **sign bit**, interpreted in the same we we interpreted it above. The next 11 bits represent an exponent (encoded in binary). 11 bits can encode integers from 0 to 2047. To achieve negative exponents (needed for numbers between 0 and 1 and therefore numbers between -1 and 0), the exponent is subtracted from 1023. Therefore, the range of values the exponent can take covers all the integers from -1023 to 1024. The rightmost 52 bits represent a sum of fractions that is computed as a weighted sum, very similarly to how the integers were calculated from 7 bits above. The only difference is that each bit represents multiplication by a **negative power of 2**. This results in a weighted sum of fractions, where only the negative powers of 2 corresponding to positions with <span class="in">`1`</span>s in them are included in this sum.</span>
<span id="cb261-133"><a href="#cb261-133"></a></span>
<span id="cb261-134"><a href="#cb261-134"></a>In any case, the real referent of **double precision floating point number** is the number of bits the computer uses to store the number. Single precision floating point numbers (i.e., numbers with decimals) are stored according to a similar sign bit, exponent, fraction scheme, only with 32 bits. The benefit to having more bits is having more precision. There are, however, computational costs, and in many cases (especially if you are only using a 64 bit computer, as you are), using more than 64 bits exponentially increases the amount of time the computer will take to complete a single computation.</span>
<span id="cb261-135"><a href="#cb261-135"></a>:::</span>
<span id="cb261-136"><a href="#cb261-136"></a></span>
<span id="cb261-137"><a href="#cb261-137"></a><span class="ot">[^03_r_101-1]: </span>Editors note: This is a simplified telling of how R stores integers in memory. For simplicity, the binary digit is interpreted as if the first (leftmost) bit corresponded to $2^0$. IRL, R most likely reads the bits backwards such that the last (rightmost) bit corresponds to $2^0$. This is just one example, but there are numerous complications that I simply do not mention.</span>
<span id="cb261-138"><a href="#cb261-138"></a></span>
<span id="cb261-139"><a href="#cb261-139"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb261-140"><a href="#cb261-140"></a><span class="fu">#### Complex Numbers</span></span>
<span id="cb261-141"><a href="#cb261-141"></a></span>
<span id="cb261-142"><a href="#cb261-142"></a>The other type of numeric data in R is complex numbers, which are so very cool and beautiful, but which you are never realistically going to use and which I will not, therefore, bore you with the details of. However, complex numbers are numbers with a real part (which is multiplied by $1$) and an imaginary part (which is multiplied by $i = \sqrt{-1}$). The value of the complex number is the sum of the real and imaginary parts. You can store a complex number like this:</span>
<span id="cb261-143"><a href="#cb261-143"></a></span>
<span id="cb261-146"><a href="#cb261-146"></a><span class="in">```{r}</span></span>
<span id="cb261-147"><a href="#cb261-147"></a>z <span class="ot">&lt;-</span> <span class="fl">0.8</span> <span class="sc">+</span> <span class="dv">1</span>i</span>
<span id="cb261-148"><a href="#cb261-148"></a><span class="fu">class</span>(z)</span>
<span id="cb261-149"><a href="#cb261-149"></a><span class="in">```</span></span>
<span id="cb261-150"><a href="#cb261-150"></a></span>
<span id="cb261-151"><a href="#cb261-151"></a>I'll just quickly show you the <span class="in">`seq`</span> function so you can see the effect of complex exponentiation. We can use the <span class="in">`seq`</span> function to get a sequence of numbers from <span class="in">`from`</span> to <span class="in">`to`</span>, by increments of <span class="in">`by`</span>.</span>
<span id="cb261-152"><a href="#cb261-152"></a></span>
<span id="cb261-155"><a href="#cb261-155"></a><span class="in">```{r}</span></span>
<span id="cb261-156"><a href="#cb261-156"></a>exps <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">12</span>, <span class="at">by =</span> <span class="fl">0.2</span>)</span>
<span id="cb261-157"><a href="#cb261-157"></a>exps</span>
<span id="cb261-158"><a href="#cb261-158"></a><span class="in">```</span></span>
<span id="cb261-159"><a href="#cb261-159"></a></span>
<span id="cb261-160"><a href="#cb261-160"></a>We can then raise the complex number <span class="in">`z`</span> to each of these exponents to see the effect of complex exponentiation.</span>
<span id="cb261-161"><a href="#cb261-161"></a></span>
<span id="cb261-164"><a href="#cb261-164"></a><span class="in">```{r}</span></span>
<span id="cb261-165"><a href="#cb261-165"></a>zs <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">exp =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, </span>
<span id="cb261-166"><a href="#cb261-166"></a>                       <span class="at">to =</span> <span class="fl">17.5</span>, </span>
<span id="cb261-167"><a href="#cb261-167"></a>                       <span class="at">by =</span> <span class="fl">0.1</span>),</span>
<span id="cb261-168"><a href="#cb261-168"></a>             <span class="at">z =</span> z <span class="sc">**</span> exp)</span>
<span id="cb261-169"><a href="#cb261-169"></a>zs</span>
<span id="cb261-170"><a href="#cb261-170"></a><span class="in">```</span></span>
<span id="cb261-171"><a href="#cb261-171"></a></span>
<span id="cb261-172"><a href="#cb261-172"></a>Now we can look at the pretty spiral that complex exponentiation results in:</span>
<span id="cb261-173"><a href="#cb261-173"></a></span>
<span id="cb261-174"><a href="#cb261-174"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb261-175"><a href="#cb261-175"></a></span>
<span id="cb261-176"><a href="#cb261-176"></a><span class="in">zs %&gt;% </span></span>
<span id="cb261-177"><a href="#cb261-177"></a><span class="in">  ggplot(aes(x = Re(z), </span></span>
<span id="cb261-178"><a href="#cb261-178"></a><span class="in">             y = Im(z),</span></span>
<span id="cb261-179"><a href="#cb261-179"></a><span class="in">             color = exp)) +</span></span>
<span id="cb261-180"><a href="#cb261-180"></a></span>
<span id="cb261-181"><a href="#cb261-181"></a><span class="in">  # plot complex spiral</span></span>
<span id="cb261-182"><a href="#cb261-182"></a><span class="in">  geom_point() +</span></span>
<span id="cb261-183"><a href="#cb261-183"></a></span>
<span id="cb261-184"><a href="#cb261-184"></a><span class="in">  # highlight axes</span></span>
<span id="cb261-185"><a href="#cb261-185"></a><span class="in">  geom_hline(yintercept = 0, color = "black") +</span></span>
<span id="cb261-186"><a href="#cb261-186"></a><span class="in">  geom_vline(xintercept = 0, color = "black") +</span></span>
<span id="cb261-187"><a href="#cb261-187"></a></span>
<span id="cb261-188"><a href="#cb261-188"></a><span class="in">  # styling</span></span>
<span id="cb261-189"><a href="#cb261-189"></a><span class="in">  labs(title = "Complex Exponentiation",</span></span>
<span id="cb261-190"><a href="#cb261-190"></a><span class="in">       subtitle = "z = 0.8 + 1i",</span></span>
<span id="cb261-191"><a href="#cb261-191"></a><span class="in">       x = "Real Part",</span></span>
<span id="cb261-192"><a href="#cb261-192"></a><span class="in">       y = "Imaginary Part",</span></span>
<span id="cb261-193"><a href="#cb261-193"></a><span class="in">       color = "Exponent") +</span></span>
<span id="cb261-194"><a href="#cb261-194"></a><span class="in">  scale_color_viridis_c(option = "inferno") +</span></span>
<span id="cb261-195"><a href="#cb261-195"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb261-196"><a href="#cb261-196"></a></span>
<span id="cb261-197"><a href="#cb261-197"></a><span class="in">  # make sure the aspect ratio is correct (1 unit in x = 1 unit in y)</span></span>
<span id="cb261-198"><a href="#cb261-198"></a><span class="in">  coord_fixed()</span></span>
<span id="cb261-199"><a href="#cb261-199"></a></span>
<span id="cb261-200"><a href="#cb261-200"></a><span class="in">```</span></span>
<span id="cb261-201"><a href="#cb261-201"></a></span>
<span id="cb261-202"><a href="#cb261-202"></a>Isn't that just gorgeous? Complex numbers can also spiral inwards:</span>
<span id="cb261-203"><a href="#cb261-203"></a></span>
<span id="cb261-206"><a href="#cb261-206"></a><span class="in">```{r}</span></span>
<span id="cb261-207"><a href="#cb261-207"></a>z <span class="ot">&lt;-</span> <span class="fl">0.15</span> <span class="sc">+</span> <span class="fl">0.85</span>i</span>
<span id="cb261-208"><a href="#cb261-208"></a><span class="in">```</span></span>
<span id="cb261-209"><a href="#cb261-209"></a></span>
<span id="cb261-210"><a href="#cb261-210"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb261-211"><a href="#cb261-211"></a><span class="in"># z (point location) is a function of the complex number and exponent</span></span>
<span id="cb261-212"><a href="#cb261-212"></a><span class="in">tibble(exp = seq(from = 1, </span></span>
<span id="cb261-213"><a href="#cb261-213"></a><span class="in">                       to = 17.5, </span></span>
<span id="cb261-214"><a href="#cb261-214"></a><span class="in">                       by = 0.1),</span></span>
<span id="cb261-215"><a href="#cb261-215"></a><span class="in">             z = z ** exp) |&gt; </span></span>
<span id="cb261-216"><a href="#cb261-216"></a></span>
<span id="cb261-217"><a href="#cb261-217"></a><span class="in">  # map real part to x and imaginary part to y (according to convention)</span></span>
<span id="cb261-218"><a href="#cb261-218"></a><span class="in">  ggplot(aes(x = Re(z), </span></span>
<span id="cb261-219"><a href="#cb261-219"></a><span class="in">             y = Im(z),</span></span>
<span id="cb261-220"><a href="#cb261-220"></a><span class="in">             color = exp)) +</span></span>
<span id="cb261-221"><a href="#cb261-221"></a></span>
<span id="cb261-222"><a href="#cb261-222"></a><span class="in">  # plot the complex spiral</span></span>
<span id="cb261-223"><a href="#cb261-223"></a><span class="in">  geom_point() +</span></span>
<span id="cb261-224"><a href="#cb261-224"></a></span>
<span id="cb261-225"><a href="#cb261-225"></a><span class="in">  # highlight x and y axes</span></span>
<span id="cb261-226"><a href="#cb261-226"></a><span class="in">  geom_hline(yintercept = 0, color = "black") +</span></span>
<span id="cb261-227"><a href="#cb261-227"></a><span class="in">  geom_vline(xintercept = 0, color = "black") +</span></span>
<span id="cb261-228"><a href="#cb261-228"></a></span>
<span id="cb261-229"><a href="#cb261-229"></a><span class="in">  # make the unit circle with radius 1 </span></span>
<span id="cb261-230"><a href="#cb261-230"></a><span class="in">  # function in polar form: r(theta) = 1</span></span>
<span id="cb261-231"><a href="#cb261-231"></a><span class="in">  # conversion to cartesian form: x = r * cos(theta), y = r * sin(theta)</span></span>
<span id="cb261-232"><a href="#cb261-232"></a><span class="in">  # r = 1, so x = cos(theta), y = sin(theta)</span></span>
<span id="cb261-233"><a href="#cb261-233"></a><span class="in">  geom_point(</span></span>
<span id="cb261-234"><a href="#cb261-234"></a><span class="in">    data = tibble(theta = seq(from = 0, </span></span>
<span id="cb261-235"><a href="#cb261-235"></a><span class="in">                              to = 360, </span></span>
<span id="cb261-236"><a href="#cb261-236"></a><span class="in">                              by = 1),</span></span>
<span id="cb261-237"><a href="#cb261-237"></a><span class="in">                  x = cos(theta),</span></span>
<span id="cb261-238"><a href="#cb261-238"></a><span class="in">                  y = sin(theta)),</span></span>
<span id="cb261-239"><a href="#cb261-239"></a><span class="in">    aes(x = x, y = y),</span></span>
<span id="cb261-240"><a href="#cb261-240"></a><span class="in">    color = "grey",</span></span>
<span id="cb261-241"><a href="#cb261-241"></a><span class="in">    alpha = 0.5</span></span>
<span id="cb261-242"><a href="#cb261-242"></a><span class="in">  ) +</span></span>
<span id="cb261-243"><a href="#cb261-243"></a></span>
<span id="cb261-244"><a href="#cb261-244"></a><span class="in">  # styling</span></span>
<span id="cb261-245"><a href="#cb261-245"></a><span class="in">  labs(title = "Complex Exponentiation",</span></span>
<span id="cb261-246"><a href="#cb261-246"></a><span class="in">       subtitle = "z = 0.15 + 0.85i",</span></span>
<span id="cb261-247"><a href="#cb261-247"></a><span class="in">       caption = "unit circle in grey",</span></span>
<span id="cb261-248"><a href="#cb261-248"></a><span class="in">       x = "Real Part",</span></span>
<span id="cb261-249"><a href="#cb261-249"></a><span class="in">       y = "Imaginary Part",</span></span>
<span id="cb261-250"><a href="#cb261-250"></a><span class="in">       color = "Exponent") +</span></span>
<span id="cb261-251"><a href="#cb261-251"></a><span class="in">  scale_color_viridis_c(option = "inferno") +</span></span>
<span id="cb261-252"><a href="#cb261-252"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb261-253"><a href="#cb261-253"></a></span>
<span id="cb261-254"><a href="#cb261-254"></a><span class="in">  # make sure the aspect ratio is correct (1 unit in x = 1 unit in y)</span></span>
<span id="cb261-255"><a href="#cb261-255"></a><span class="in">  coord_fixed()</span></span>
<span id="cb261-256"><a href="#cb261-256"></a></span>
<span id="cb261-257"><a href="#cb261-257"></a><span class="in">```</span></span>
<span id="cb261-258"><a href="#cb261-258"></a></span>
<span id="cb261-259"><a href="#cb261-259"></a>I drew a unit circle in that plot for a reason. As you can see in the plot below, the first complex number we used ($0.8 + 1i$) corresponds to a point outside of the unit circle on the complex plane. The point corresponding to $z = 0.15 + 0.85i$, by contrast, lies within the unit circle. This is why the the first complex number spirals outwards, while the spiral of the second complex number spirals inwards. The unit circle is the boundary between the two types of spirals.</span>
<span id="cb261-260"><a href="#cb261-260"></a></span>
<span id="cb261-261"><a href="#cb261-261"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb261-262"><a href="#cb261-262"></a><span class="in">z &lt;- c(0.8 + 1i, 0.15 + 0.85i)</span></span>
<span id="cb261-263"><a href="#cb261-263"></a></span>
<span id="cb261-264"><a href="#cb261-264"></a><span class="in">tibble(z = z) %&gt;% </span></span>
<span id="cb261-265"><a href="#cb261-265"></a><span class="in">  ggplot(aes(x = Re(z), </span></span>
<span id="cb261-266"><a href="#cb261-266"></a><span class="in">             y = Im(z))) +</span></span>
<span id="cb261-267"><a href="#cb261-267"></a></span>
<span id="cb261-268"><a href="#cb261-268"></a><span class="in">  # plot the complex numbers</span></span>
<span id="cb261-269"><a href="#cb261-269"></a><span class="in">  geom_point(aes(color = as.factor(z))) +</span></span>
<span id="cb261-270"><a href="#cb261-270"></a></span>
<span id="cb261-271"><a href="#cb261-271"></a><span class="in">  # make the unit circle with radius 1 </span></span>
<span id="cb261-272"><a href="#cb261-272"></a><span class="in">  # function in polar form: r(theta) = 1</span></span>
<span id="cb261-273"><a href="#cb261-273"></a><span class="in">  # conversion to cartesian form: x = r * cos(theta), y = r * sin(theta)</span></span>
<span id="cb261-274"><a href="#cb261-274"></a><span class="in">  # r = 1, so x = cos(theta), y = sin(theta)</span></span>
<span id="cb261-275"><a href="#cb261-275"></a><span class="in">  geom_point(</span></span>
<span id="cb261-276"><a href="#cb261-276"></a><span class="in">    data = tibble(theta = seq(from = 0, </span></span>
<span id="cb261-277"><a href="#cb261-277"></a><span class="in">                              to = 360, </span></span>
<span id="cb261-278"><a href="#cb261-278"></a><span class="in">                              by = 1),</span></span>
<span id="cb261-279"><a href="#cb261-279"></a><span class="in">                  x = cos(theta),</span></span>
<span id="cb261-280"><a href="#cb261-280"></a><span class="in">                  y = sin(theta)),</span></span>
<span id="cb261-281"><a href="#cb261-281"></a><span class="in">    aes(x = x, y = y),</span></span>
<span id="cb261-282"><a href="#cb261-282"></a><span class="in">    color = "grey",</span></span>
<span id="cb261-283"><a href="#cb261-283"></a><span class="in">    alpha = 0.5</span></span>
<span id="cb261-284"><a href="#cb261-284"></a><span class="in">  ) +</span></span>
<span id="cb261-285"><a href="#cb261-285"></a></span>
<span id="cb261-286"><a href="#cb261-286"></a><span class="in">  # draw magnitude lines from origin</span></span>
<span id="cb261-287"><a href="#cb261-287"></a><span class="in">  geom_segment(aes(x = 0, y = 0, xend = Re(z), yend = Im(z)),</span></span>
<span id="cb261-288"><a href="#cb261-288"></a><span class="in">               color = "black",</span></span>
<span id="cb261-289"><a href="#cb261-289"></a><span class="in">               linetype = "dashed") +</span></span>
<span id="cb261-290"><a href="#cb261-290"></a></span>
<span id="cb261-291"><a href="#cb261-291"></a><span class="in">  # styling</span></span>
<span id="cb261-292"><a href="#cb261-292"></a><span class="in">  labs(title = "Complex Numbers",</span></span>
<span id="cb261-293"><a href="#cb261-293"></a><span class="in">       subtitle = "z = 0.8 + 1i and z = 0.15 + 0.85i",</span></span>
<span id="cb261-294"><a href="#cb261-294"></a><span class="in">       caption = "unit circle in grey",</span></span>
<span id="cb261-295"><a href="#cb261-295"></a><span class="in">       x = "Real Part",</span></span>
<span id="cb261-296"><a href="#cb261-296"></a><span class="in">       y = "Imaginary Part",</span></span>
<span id="cb261-297"><a href="#cb261-297"></a><span class="in">       color = "Complex Number") +</span></span>
<span id="cb261-298"><a href="#cb261-298"></a><span class="in">  scale_color_viridis_d(option = "cividis") +</span></span>
<span id="cb261-299"><a href="#cb261-299"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb261-300"><a href="#cb261-300"></a></span>
<span id="cb261-301"><a href="#cb261-301"></a><span class="in">  # make sure the aspect ratio is correct (1 unit in x = 1 unit in y)</span></span>
<span id="cb261-302"><a href="#cb261-302"></a><span class="in">  coord_fixed()</span></span>
<span id="cb261-303"><a href="#cb261-303"></a></span>
<span id="cb261-304"><a href="#cb261-304"></a><span class="in">```</span></span>
<span id="cb261-305"><a href="#cb261-305"></a>:::</span>
<span id="cb261-306"><a href="#cb261-306"></a></span>
<span id="cb261-307"><a href="#cb261-307"></a><span class="fu">#### Arithmetic</span></span>
<span id="cb261-308"><a href="#cb261-308"></a></span>
<span id="cb261-309"><a href="#cb261-309"></a>R has a number of arithmetic operators, many of which you will be familiar with.</span>
<span id="cb261-310"><a href="#cb261-310"></a></span>
<span id="cb261-311"><a href="#cb261-311"></a>The unary operators are <span class="in">`-`</span> and <span class="in">`+`</span>, which negate and do nothing, respectively. You would use <span class="in">`-`</span> when saving a negative number.</span>
<span id="cb261-312"><a href="#cb261-312"></a></span>
<span id="cb261-313"><a href="#cb261-313"></a>These are five binary operators that are used frequently in the arithmetic common in public schools:</span>
<span id="cb261-314"><a href="#cb261-314"></a></span>
<span id="cb261-315"><a href="#cb261-315"></a><span class="ss">-   </span><span class="in">`+`</span>: addition</span>
<span id="cb261-316"><a href="#cb261-316"></a><span class="ss">-   </span><span class="in">`-`</span>: subtraction</span>
<span id="cb261-317"><a href="#cb261-317"></a><span class="ss">-   </span><span class="in">`*`</span>: multiplication</span>
<span id="cb261-318"><a href="#cb261-318"></a><span class="ss">-   </span><span class="in">`/`</span>: division</span>
<span id="cb261-319"><a href="#cb261-319"></a><span class="ss">-   </span><span class="in">`^`</span>: exponentiation<span class="ot">[^03_r_101-2]</span></span>
<span id="cb261-320"><a href="#cb261-320"></a></span>
<span id="cb261-321"><a href="#cb261-321"></a><span class="ot">[^03_r_101-2]: </span>You can use the operator <span class="in">`**`</span> in place of <span class="in">`^`</span>, and I frequently do. R translates <span class="in">`**`</span> into <span class="in">`^`</span> before evaluating any expression.</span>
<span id="cb261-322"><a href="#cb261-322"></a></span>
<span id="cb261-323"><a href="#cb261-323"></a>Exponentiation and division offer two useful examples to demonstrate <span class="in">`Inf`</span> and <span class="in">`-Inf`</span> values. Anything divided by infinity is zero, which is more of a convention in mathematics than a thing that you calculate out (which would take a log time). This division by infinity resulting in zero rule is coded into R:</span>
<span id="cb261-324"><a href="#cb261-324"></a></span>
<span id="cb261-327"><a href="#cb261-327"></a><span class="in">```{r}</span></span>
<span id="cb261-328"><a href="#cb261-328"></a><span class="dv">10</span> <span class="sc">/</span> <span class="cn">Inf</span></span>
<span id="cb261-329"><a href="#cb261-329"></a><span class="in">```</span></span>
<span id="cb261-330"><a href="#cb261-330"></a></span>
<span id="cb261-331"><a href="#cb261-331"></a>R also recognizes that anything to a negative infinite power is zero, and that anything (including an infinite value) to the zeroth power is equal to 1.</span>
<span id="cb261-332"><a href="#cb261-332"></a></span>
<span id="cb261-335"><a href="#cb261-335"></a><span class="in">```{r}</span></span>
<span id="cb261-336"><a href="#cb261-336"></a><span class="dv">10</span> <span class="sc">^</span> <span class="sc">-</span><span class="cn">Inf</span></span>
<span id="cb261-337"><a href="#cb261-337"></a><span class="cn">Inf</span> <span class="sc">^</span> <span class="dv">0</span></span>
<span id="cb261-338"><a href="#cb261-338"></a><span class="in">```</span></span>
<span id="cb261-339"><a href="#cb261-339"></a></span>
<span id="cb261-340"><a href="#cb261-340"></a>In addition to addition, subtraction, multiplication, division, and exponentiation, R has a few other arithmetic operators that you may not be as familiar with:</span>
<span id="cb261-341"><a href="#cb261-341"></a></span>
<span id="cb261-342"><a href="#cb261-342"></a><span class="ss">-   </span><span class="in">`%%`</span>: modulus (remainder of division)</span>
<span id="cb261-343"><a href="#cb261-343"></a><span class="ss">-   </span><span class="in">`%/%`</span>: integer division (division that rounds down to the nearest whole number)</span>
<span id="cb261-344"><a href="#cb261-344"></a></span>
<span id="cb261-345"><a href="#cb261-345"></a>These functions revolve around division. Take the number 73. When you divide 73 by 10, you get 7 with a remainder of 3. In this case, 7 is the integer divisor of 73 divided by 10, and 3 is the modulus of 73 divided by 10.</span>
<span id="cb261-346"><a href="#cb261-346"></a></span>
<span id="cb261-349"><a href="#cb261-349"></a><span class="in">```{r}</span></span>
<span id="cb261-350"><a href="#cb261-350"></a><span class="dv">73</span> <span class="sc">%/%</span> <span class="dv">10</span></span>
<span id="cb261-351"><a href="#cb261-351"></a><span class="dv">73</span> <span class="sc">%%</span> <span class="dv">10</span></span>
<span id="cb261-352"><a href="#cb261-352"></a><span class="in">```</span></span>
<span id="cb261-353"><a href="#cb261-353"></a></span>
<span id="cb261-354"><a href="#cb261-354"></a>These functions are part of **modular arithmetic**, which winds up being incredibly important to computer science and cryptography, as well as to many fields of mathematics (like number theory).</span>
<span id="cb261-355"><a href="#cb261-355"></a></span>
<span id="cb261-356"><a href="#cb261-356"></a>::: {.callout-note collapse="false"}</span>
<span id="cb261-357"><a href="#cb261-357"></a><span class="fu">#### Rounding, Truncation, etc.</span></span>
<span id="cb261-358"><a href="#cb261-358"></a></span>
<span id="cb261-359"><a href="#cb261-359"></a>R has 5 function used to round numbers:</span>
<span id="cb261-360"><a href="#cb261-360"></a></span>
<span id="cb261-361"><a href="#cb261-361"></a><span class="ss">-   </span><span class="in">`ceiling()`</span>: rounds to greatest and nearest integer (will increase absolute value of a positive number and decrease the absolute value of a negative number)</span>
<span id="cb261-362"><a href="#cb261-362"></a><span class="ss">-   </span><span class="in">`floor()`</span>: rounds to least and nearest integer (will decrease the absolute value of a positive number and increase the absolute value of a negative number)</span>
<span id="cb261-363"><a href="#cb261-363"></a><span class="ss">-   </span><span class="in">`trunc()`</span>: truncates the decimal part of a number</span>
<span id="cb261-364"><a href="#cb261-364"></a><span class="ss">-   </span><span class="in">`round()`</span>: rounds to the nearest integer (or to a specified number of decimal places)</span>
<span id="cb261-365"><a href="#cb261-365"></a><span class="ss">-   </span><span class="in">`signif()`</span>: rounds to a specified number of significant digits<span class="ot">[^03_r_101-3]</span></span>
<span id="cb261-366"><a href="#cb261-366"></a></span>
<span id="cb261-369"><a href="#cb261-369"></a><span class="in">```{r}</span></span>
<span id="cb261-370"><a href="#cb261-370"></a>x <span class="ot">&lt;-</span> <span class="fl">5.7</span></span>
<span id="cb261-371"><a href="#cb261-371"></a>y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">5.7</span></span>
<span id="cb261-372"><a href="#cb261-372"></a></span>
<span id="cb261-373"><a href="#cb261-373"></a><span class="fu">ceiling</span>(x)</span>
<span id="cb261-374"><a href="#cb261-374"></a><span class="fu">ceiling</span>(y)</span>
<span id="cb261-375"><a href="#cb261-375"></a></span>
<span id="cb261-376"><a href="#cb261-376"></a><span class="fu">floor</span>(x)</span>
<span id="cb261-377"><a href="#cb261-377"></a><span class="fu">floor</span>(y)</span>
<span id="cb261-378"><a href="#cb261-378"></a></span>
<span id="cb261-379"><a href="#cb261-379"></a><span class="fu">trunc</span>(y)</span>
<span id="cb261-380"><a href="#cb261-380"></a></span>
<span id="cb261-381"><a href="#cb261-381"></a>x <span class="ot">&lt;-</span> <span class="fl">13950.28738</span></span>
<span id="cb261-382"><a href="#cb261-382"></a><span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb261-383"><a href="#cb261-383"></a><span class="fu">signif</span>(x, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb261-384"><a href="#cb261-384"></a><span class="in">```</span></span>
<span id="cb261-385"><a href="#cb261-385"></a>:::</span>
<span id="cb261-386"><a href="#cb261-386"></a></span>
<span id="cb261-387"><a href="#cb261-387"></a><span class="ot">[^03_r_101-3]: </span>mostly a science/engineering thing; see <span class="co">[</span><span class="ot">Wikipedia page</span><span class="co">](https://en.wikipedia.org/wiki/Significant_figures)</span> for review.</span>
<span id="cb261-388"><a href="#cb261-388"></a></span>
<span id="cb261-389"><a href="#cb261-389"></a>::: {.callout-note collapse="false"}</span>
<span id="cb261-390"><a href="#cb261-390"></a><span class="fu">#### Relational Logic</span></span>
<span id="cb261-391"><a href="#cb261-391"></a></span>
<span id="cb261-392"><a href="#cb261-392"></a>**Relational logic** is used to compare two values. The result of a relational logic operation is a logical value, either <span class="in">`TRUE`</span> or <span class="in">`FALSE`</span>. The relational operators in R are:</span>
<span id="cb261-393"><a href="#cb261-393"></a></span>
<span id="cb261-394"><a href="#cb261-394"></a><span class="ss">-   </span>"==": is the thing on the left **identical** to the thing on the right?</span>
<span id="cb261-395"><a href="#cb261-395"></a><span class="ss">-   </span>"!=": not identical</span>
<span id="cb261-396"><a href="#cb261-396"></a><span class="ss">-   </span>"<span class="sc">\&lt;</span>": less than</span>
<span id="cb261-397"><a href="#cb261-397"></a><span class="ss">-   </span>"<span class="sc">\&lt;</span>=": less than or equal to</span>
<span id="cb261-398"><a href="#cb261-398"></a><span class="ss">-   </span>"<span class="sc">\&gt;</span>": greater than</span>
<span id="cb261-399"><a href="#cb261-399"></a><span class="ss">-   </span>"<span class="sc">\&gt;</span>=": greater than or equal to</span>
<span id="cb261-400"><a href="#cb261-400"></a></span>
<span id="cb261-401"><a href="#cb261-401"></a>That might seem relatively straightforward. I raise you the following complication:</span>
<span id="cb261-402"><a href="#cb261-402"></a></span>
<span id="cb261-405"><a href="#cb261-405"></a><span class="in">```{r}</span></span>
<span id="cb261-406"><a href="#cb261-406"></a>a <span class="ot">&lt;-</span> <span class="fl">0.1</span></span>
<span id="cb261-407"><a href="#cb261-407"></a>b <span class="ot">&lt;-</span> <span class="fl">0.3</span> <span class="sc">-</span> <span class="fl">0.2</span></span>
<span id="cb261-408"><a href="#cb261-408"></a><span class="fu">print</span>(<span class="fu">c</span>(a, b))</span>
<span id="cb261-409"><a href="#cb261-409"></a>a <span class="sc">==</span> b</span>
<span id="cb261-410"><a href="#cb261-410"></a><span class="in">```</span></span>
<span id="cb261-411"><a href="#cb261-411"></a></span>
<span id="cb261-412"><a href="#cb261-412"></a>That's really odd, isn't it? The way R stores the two numbers (see the first callout about double precision) means that these two numbers are different by a very small amount. How much, you ask?</span>
<span id="cb261-413"><a href="#cb261-413"></a></span>
<span id="cb261-416"><a href="#cb261-416"></a><span class="in">```{r}</span></span>
<span id="cb261-417"><a href="#cb261-417"></a>a <span class="sc">-</span> b</span>
<span id="cb261-418"><a href="#cb261-418"></a><span class="in">```</span></span>
<span id="cb261-419"><a href="#cb261-419"></a></span>
<span id="cb261-420"><a href="#cb261-420"></a>As I said, a very small amount. This is why you should never use <span class="in">`==`</span> to compare floating point numbers. Instead, you should use the <span class="in">`all.equal()`</span> function, which will compare two numbers to a specified tolerance.</span>
<span id="cb261-421"><a href="#cb261-421"></a></span>
<span id="cb261-424"><a href="#cb261-424"></a><span class="in">```{r}</span></span>
<span id="cb261-425"><a href="#cb261-425"></a><span class="fu">all.equal</span>(a, b)</span>
<span id="cb261-426"><a href="#cb261-426"></a><span class="in">```</span></span>
<span id="cb261-427"><a href="#cb261-427"></a>:::</span>
<span id="cb261-428"><a href="#cb261-428"></a></span>
<span id="cb261-429"><a href="#cb261-429"></a><span class="fu">### Characters</span></span>
<span id="cb261-430"><a href="#cb261-430"></a></span>
<span id="cb261-431"><a href="#cb261-431"></a>Characters are fairly self explanatory. You can tell R that something is a character by putting it in quotes.</span>
<span id="cb261-432"><a href="#cb261-432"></a></span>
<span id="cb261-433"><a href="#cb261-433"></a><span class="in">```{r characters, exercise=TRUE}</span></span>
<span id="cb261-434"><a href="#cb261-434"></a><span class="in">a &lt;- "Good morning!"</span></span>
<span id="cb261-435"><a href="#cb261-435"></a><span class="in">class(a)</span></span>
<span id="cb261-436"><a href="#cb261-436"></a><span class="in">print(a)</span></span>
<span id="cb261-437"><a href="#cb261-437"></a><span class="in">```</span></span>
<span id="cb261-438"><a href="#cb261-438"></a></span>
<span id="cb261-439"><a href="#cb261-439"></a>You can also convert something from another class to a string. When you do so, R will begin to print it in quotes:</span>
<span id="cb261-440"><a href="#cb261-440"></a></span>
<span id="cb261-443"><a href="#cb261-443"></a><span class="in">```{r}</span></span>
<span id="cb261-444"><a href="#cb261-444"></a>x <span class="ot">&lt;-</span> <span class="dv">124</span>L</span>
<span id="cb261-445"><a href="#cb261-445"></a><span class="fu">class</span>(x)</span>
<span id="cb261-446"><a href="#cb261-446"></a><span class="fu">print</span>(x)</span>
<span id="cb261-447"><a href="#cb261-447"></a>x <span class="ot">&lt;-</span> <span class="fu">as.character</span>(x)</span>
<span id="cb261-448"><a href="#cb261-448"></a><span class="fu">class</span>(x)</span>
<span id="cb261-449"><a href="#cb261-449"></a><span class="fu">print</span>(x)</span>
<span id="cb261-450"><a href="#cb261-450"></a><span class="in">```</span></span>
<span id="cb261-451"><a href="#cb261-451"></a></span>
<span id="cb261-452"><a href="#cb261-452"></a>See another example of the quotes with logical data:</span>
<span id="cb261-453"><a href="#cb261-453"></a></span>
<span id="cb261-456"><a href="#cb261-456"></a><span class="in">```{r}</span></span>
<span id="cb261-457"><a href="#cb261-457"></a>x <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb261-458"><a href="#cb261-458"></a><span class="fu">class</span>(x)</span>
<span id="cb261-459"><a href="#cb261-459"></a><span class="fu">print</span>(<span class="fu">as.character</span>(x))</span>
<span id="cb261-460"><a href="#cb261-460"></a><span class="in">```</span></span>
<span id="cb261-461"><a href="#cb261-461"></a></span>
<span id="cb261-462"><a href="#cb261-462"></a>There is one type of data that does not encapsulate in quotes when it is converted to a character. This is the <span class="in">`NA`</span> or missing value, which R will essentially always represent as <span class="in">`NA`</span>, regardless of it's class.</span>
<span id="cb261-463"><a href="#cb261-463"></a></span>
<span id="cb261-466"><a href="#cb261-466"></a><span class="in">```{r}</span></span>
<span id="cb261-467"><a href="#cb261-467"></a>y <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb261-468"><a href="#cb261-468"></a><span class="fu">class</span>(y)</span>
<span id="cb261-469"><a href="#cb261-469"></a>y <span class="ot">&lt;-</span> <span class="fu">as.double</span>(y)</span>
<span id="cb261-470"><a href="#cb261-470"></a><span class="fu">class</span>(y)</span>
<span id="cb261-471"><a href="#cb261-471"></a><span class="fu">print</span>(<span class="fu">as.character</span>(y))</span>
<span id="cb261-472"><a href="#cb261-472"></a><span class="in">```</span></span>
<span id="cb261-473"><a href="#cb261-473"></a></span>
<span id="cb261-474"><a href="#cb261-474"></a><span class="fu">### Logical Data</span></span>
<span id="cb261-475"><a href="#cb261-475"></a></span>
<span id="cb261-476"><a href="#cb261-476"></a>Logical data is also simple to understand. Neither <span class="in">`TRUE`</span> nor <span class="in">`FALSE`</span> are unfamiliar to the reader.</span>
<span id="cb261-477"><a href="#cb261-477"></a></span>
<span id="cb261-478"><a href="#cb261-478"></a><span class="in">```{r logicals, exercise=TRUE}</span></span>
<span id="cb261-479"><a href="#cb261-479"></a><span class="in">TRUE &amp; FALSE</span></span>
<span id="cb261-480"><a href="#cb261-480"></a><span class="in">TRUE | FALSE</span></span>
<span id="cb261-481"><a href="#cb261-481"></a><span class="in">```</span></span>
<span id="cb261-482"><a href="#cb261-482"></a></span>
<span id="cb261-483"><a href="#cb261-483"></a>It's useful to note what happens when you turn logical data into numeric data. <span class="in">`TRUE`</span> becomes <span class="in">`1`</span> and <span class="in">`FALSE`</span> becomes <span class="in">`0`</span>.</span>
<span id="cb261-484"><a href="#cb261-484"></a></span>
<span id="cb261-487"><a href="#cb261-487"></a><span class="in">```{r}</span></span>
<span id="cb261-488"><a href="#cb261-488"></a>vals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb261-489"><a href="#cb261-489"></a><span class="fu">print</span>(<span class="fu">as.numeric</span>(vals))</span>
<span id="cb261-490"><a href="#cb261-490"></a><span class="in">```</span></span>
<span id="cb261-491"><a href="#cb261-491"></a></span>
<span id="cb261-492"><a href="#cb261-492"></a>You can also write <span class="in">`TRUE`</span> as simply <span class="in">`T`</span> and <span class="in">`FALSE`</span> as <span class="in">`F`</span>.</span>
<span id="cb261-493"><a href="#cb261-493"></a></span>
<span id="cb261-494"><a href="#cb261-494"></a>::: {#tip-logical_arithmetic .callout-note collapse="false"}</span>
<span id="cb261-495"><a href="#cb261-495"></a><span class="fu">#### Logical Arithmetic</span></span>
<span id="cb261-496"><a href="#cb261-496"></a></span>
<span id="cb261-497"><a href="#cb261-497"></a>The <span class="in">`:`</span> operator is used to create a sequence of numbers, starting at the number on the right, and continuing by adding 1 until the number on the left is reached.</span>
<span id="cb261-498"><a href="#cb261-498"></a></span>
<span id="cb261-501"><a href="#cb261-501"></a><span class="in">```{r}</span></span>
<span id="cb261-502"><a href="#cb261-502"></a><span class="fl">0.1</span><span class="sc">:</span><span class="fl">5.75</span></span>
<span id="cb261-503"><a href="#cb261-503"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb261-504"><a href="#cb261-504"></a><span class="in">```</span></span>
<span id="cb261-505"><a href="#cb261-505"></a></span>
<span id="cb261-506"><a href="#cb261-506"></a>If we wanted to find only the numbers that are less than or equal to 4, we could use the <span class="in">`&lt;`</span> operator (remember this list includes 0 at the beginning).</span>
<span id="cb261-507"><a href="#cb261-507"></a></span>
<span id="cb261-510"><a href="#cb261-510"></a><span class="in">```{r}</span></span>
<span id="cb261-511"><a href="#cb261-511"></a>x <span class="sc">&lt;=</span> <span class="dv">4</span></span>
<span id="cb261-512"><a href="#cb261-512"></a><span class="in">```</span></span>
<span id="cb261-513"><a href="#cb261-513"></a></span>
<span id="cb261-514"><a href="#cb261-514"></a>If we wanted to see how many of the numbers are less than or equal to 4, we could use the <span class="in">`sum()`</span> function.</span>
<span id="cb261-515"><a href="#cb261-515"></a></span>
<span id="cb261-518"><a href="#cb261-518"></a><span class="in">```{r}</span></span>
<span id="cb261-519"><a href="#cb261-519"></a><span class="fu">sum</span>(x <span class="sc">&lt;=</span> <span class="dv">4</span>)</span>
<span id="cb261-520"><a href="#cb261-520"></a><span class="in">```</span></span>
<span id="cb261-521"><a href="#cb261-521"></a></span>
<span id="cb261-522"><a href="#cb261-522"></a>If you just wanted to see if any or all of the numbers are less than four, you could use the <span class="in">`any()`</span> or <span class="in">`all()`</span> functions.</span>
<span id="cb261-523"><a href="#cb261-523"></a></span>
<span id="cb261-526"><a href="#cb261-526"></a><span class="in">```{r}</span></span>
<span id="cb261-527"><a href="#cb261-527"></a><span class="fu">any</span>(x <span class="sc">&lt;=</span> <span class="dv">4</span>)</span>
<span id="cb261-528"><a href="#cb261-528"></a><span class="fu">all</span>(x <span class="sc">&lt;=</span> <span class="dv">4</span>)</span>
<span id="cb261-529"><a href="#cb261-529"></a><span class="in">```</span></span>
<span id="cb261-530"><a href="#cb261-530"></a>:::</span>
<span id="cb261-531"><a href="#cb261-531"></a></span>
<span id="cb261-532"><a href="#cb261-532"></a><span class="fu">### Factors</span></span>
<span id="cb261-533"><a href="#cb261-533"></a></span>
<span id="cb261-534"><a href="#cb261-534"></a>There is an excellent <span class="co">[</span><span class="ot">chapter about factors</span><span class="co">](https://r4ds.had.co.nz/factors.html)</span> in R for Data Science.</span>
<span id="cb261-535"><a href="#cb261-535"></a></span>
<span id="cb261-536"><a href="#cb261-536"></a>Factors combine integers and strings, and they are useful for categorical data (which is exceptionally common in psychology research). One categorical variable is the day of the week. I am going to store all of the days of the week in a vector called <span class="in">`days`</span>.</span>
<span id="cb261-537"><a href="#cb261-537"></a></span>
<span id="cb261-540"><a href="#cb261-540"></a><span class="in">```{r}</span></span>
<span id="cb261-541"><a href="#cb261-541"></a>days <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"monday"</span>, </span>
<span id="cb261-542"><a href="#cb261-542"></a>          <span class="st">"tuesday"</span>, </span>
<span id="cb261-543"><a href="#cb261-543"></a>          <span class="st">"wednesday"</span>, </span>
<span id="cb261-544"><a href="#cb261-544"></a>          <span class="st">"thursday"</span>, </span>
<span id="cb261-545"><a href="#cb261-545"></a>          <span class="st">"friday"</span>, </span>
<span id="cb261-546"><a href="#cb261-546"></a>          <span class="st">"saturday"</span>, </span>
<span id="cb261-547"><a href="#cb261-547"></a>          <span class="st">"sunday"</span>)</span>
<span id="cb261-548"><a href="#cb261-548"></a><span class="in">```</span></span>
<span id="cb261-549"><a href="#cb261-549"></a></span>
<span id="cb261-550"><a href="#cb261-550"></a>Here is a vector of days of the week. We'll use it as our data.</span>
<span id="cb261-551"><a href="#cb261-551"></a></span>
<span id="cb261-554"><a href="#cb261-554"></a><span class="in">```{r}</span></span>
<span id="cb261-555"><a href="#cb261-555"></a><span class="co"># draw a random sample of 100 days of the week</span></span>
<span id="cb261-556"><a href="#cb261-556"></a>data <span class="ot">&lt;-</span> <span class="fu">sample</span>(days, <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-557"><a href="#cb261-557"></a><span class="co"># print the first 15 days</span></span>
<span id="cb261-558"><a href="#cb261-558"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-559"><a href="#cb261-559"></a><span class="in">```</span></span>
<span id="cb261-560"><a href="#cb261-560"></a></span>
<span id="cb261-561"><a href="#cb261-561"></a>Using a factor, rather than a character, is useful for sorting purposes. Sorting our character days results in a list that is in the wrong order.</span>
<span id="cb261-562"><a href="#cb261-562"></a></span>
<span id="cb261-565"><a href="#cb261-565"></a><span class="in">```{r}</span></span>
<span id="cb261-566"><a href="#cb261-566"></a><span class="fu">sort</span>(days)</span>
<span id="cb261-567"><a href="#cb261-567"></a><span class="in">```</span></span>
<span id="cb261-568"><a href="#cb261-568"></a></span>
<span id="cb261-569"><a href="#cb261-569"></a>Days of the week is a good candidate for a factor because there are a fixed number of known days of the week. We can convert the vector <span class="in">`days`</span> to a factor by using the <span class="in">`factor()`</span> function.</span>
<span id="cb261-570"><a href="#cb261-570"></a></span>
<span id="cb261-573"><a href="#cb261-573"></a><span class="in">```{r}</span></span>
<span id="cb261-574"><a href="#cb261-574"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(data)</span>
<span id="cb261-575"><a href="#cb261-575"></a><span class="fu">head</span>(y, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-576"><a href="#cb261-576"></a><span class="in">```</span></span>
<span id="cb261-577"><a href="#cb261-577"></a></span>
<span id="cb261-578"><a href="#cb261-578"></a>As you can see, failing to supply factor levels results in the levels being sorted in the same meaningless way as before. We can fix this by supplying the levels in the order we want them to appear.</span>
<span id="cb261-579"><a href="#cb261-579"></a></span>
<span id="cb261-582"><a href="#cb261-582"></a><span class="in">```{r}</span></span>
<span id="cb261-583"><a href="#cb261-583"></a>data <span class="ot">&lt;-</span> <span class="fu">factor</span>(data, <span class="at">levels =</span> days)</span>
<span id="cb261-584"><a href="#cb261-584"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-585"><a href="#cb261-585"></a><span class="in">```</span></span>
<span id="cb261-586"><a href="#cb261-586"></a></span>
<span id="cb261-589"><a href="#cb261-589"></a><span class="in">```{r}</span></span>
<span id="cb261-590"><a href="#cb261-590"></a><span class="fu">nlevels</span>(data)</span>
<span id="cb261-591"><a href="#cb261-591"></a><span class="fu">levels</span>(data)</span>
<span id="cb261-592"><a href="#cb261-592"></a><span class="co"># if you want to see the numeric backbone of the factor</span></span>
<span id="cb261-593"><a href="#cb261-593"></a><span class="fu">as.vector</span>(<span class="fu">unclass</span>(data)) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-594"><a href="#cb261-594"></a><span class="in">```</span></span>
<span id="cb261-595"><a href="#cb261-595"></a></span>
<span id="cb261-596"><a href="#cb261-596"></a>You may want sunday to be the first day of the week. You can do this by releveling the factor</span>
<span id="cb261-597"><a href="#cb261-597"></a></span>
<span id="cb261-600"><a href="#cb261-600"></a><span class="in">```{r}</span></span>
<span id="cb261-601"><a href="#cb261-601"></a>data <span class="ot">&lt;-</span> <span class="fu">fct_relevel</span>(data, <span class="st">"sunday"</span>)</span>
<span id="cb261-602"><a href="#cb261-602"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-603"><a href="#cb261-603"></a><span class="in">```</span></span>
<span id="cb261-604"><a href="#cb261-604"></a></span>
<span id="cb261-605"><a href="#cb261-605"></a>You can also reverse factors.</span>
<span id="cb261-606"><a href="#cb261-606"></a></span>
<span id="cb261-609"><a href="#cb261-609"></a><span class="in">```{r}</span></span>
<span id="cb261-610"><a href="#cb261-610"></a>data <span class="ot">&lt;-</span> <span class="fu">fct_rev</span>(data)</span>
<span id="cb261-611"><a href="#cb261-611"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-612"><a href="#cb261-612"></a><span class="in">```</span></span>
<span id="cb261-613"><a href="#cb261-613"></a></span>
<span id="cb261-614"><a href="#cb261-614"></a>Sometimes you will want to change the labels for a factor. You can accomplish this with <span class="in">`fct_recode`</span>. The new labels are on the left, and the old labels are on the right. Notice that the order of the labels in <span class="in">`fct_recode`</span> does not change the ordering of the factors levels.</span>
<span id="cb261-615"><a href="#cb261-615"></a></span>
<span id="cb261-618"><a href="#cb261-618"></a><span class="in">```{r}</span></span>
<span id="cb261-619"><a href="#cb261-619"></a>data <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(data,</span>
<span id="cb261-620"><a href="#cb261-620"></a>                  <span class="st">"mon"</span> <span class="ot">=</span> <span class="st">"monday"</span>,</span>
<span id="cb261-621"><a href="#cb261-621"></a>                  <span class="st">"tue"</span> <span class="ot">=</span> <span class="st">"tuesday"</span>,</span>
<span id="cb261-622"><a href="#cb261-622"></a>                  <span class="st">"wed"</span> <span class="ot">=</span> <span class="st">"wednesday"</span>,</span>
<span id="cb261-623"><a href="#cb261-623"></a>                  <span class="st">"thu"</span> <span class="ot">=</span> <span class="st">"thursday"</span>,</span>
<span id="cb261-624"><a href="#cb261-624"></a>                  <span class="st">"fri"</span> <span class="ot">=</span> <span class="st">"friday"</span>,</span>
<span id="cb261-625"><a href="#cb261-625"></a>                  <span class="st">"sat"</span> <span class="ot">=</span> <span class="st">"saturday"</span>,</span>
<span id="cb261-626"><a href="#cb261-626"></a>                  <span class="st">"sun"</span> <span class="ot">=</span> <span class="st">"sunday"</span>,)</span>
<span id="cb261-627"><a href="#cb261-627"></a><span class="fu">head</span>(data, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-628"><a href="#cb261-628"></a><span class="in">```</span></span>
<span id="cb261-629"><a href="#cb261-629"></a></span>
<span id="cb261-630"><a href="#cb261-630"></a>You might also want to collapse the levels of a factor into a set of super-ordinate labels, like "workday" and "weekend". You can do this with <span class="in">`fct_collapse`</span>.</span>
<span id="cb261-631"><a href="#cb261-631"></a></span>
<span id="cb261-634"><a href="#cb261-634"></a><span class="in">```{r}</span></span>
<span id="cb261-635"><a href="#cb261-635"></a>data1 <span class="ot">&lt;-</span> <span class="fu">fct_collapse</span>(data,</span>
<span id="cb261-636"><a href="#cb261-636"></a>                    <span class="at">workday =</span> <span class="fu">c</span>(<span class="st">"mon"</span>, <span class="st">"tue"</span>, <span class="st">"wed"</span>, <span class="st">"thu"</span>, <span class="st">"fri"</span>),</span>
<span id="cb261-637"><a href="#cb261-637"></a>                    <span class="at">weekend =</span> <span class="fu">c</span>(<span class="st">"sat"</span>, <span class="st">"sun"</span>))</span>
<span id="cb261-638"><a href="#cb261-638"></a><span class="fu">head</span>(data1, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-639"><a href="#cb261-639"></a><span class="in">```</span></span>
<span id="cb261-640"><a href="#cb261-640"></a></span>
<span id="cb261-641"><a href="#cb261-641"></a>The <span class="in">`fct_lump`</span> function will keep the most common <span class="in">`n`</span> levels and lump the others into a new level called "Other". This is particularly helpful if you have categorical data with a lot of very small categories.</span>
<span id="cb261-642"><a href="#cb261-642"></a></span>
<span id="cb261-645"><a href="#cb261-645"></a><span class="in">```{r}</span></span>
<span id="cb261-646"><a href="#cb261-646"></a>data1 <span class="ot">&lt;-</span> <span class="fu">fct_lump</span>(data, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb261-647"><a href="#cb261-647"></a><span class="fu">head</span>(data1, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-648"><a href="#cb261-648"></a><span class="in">```</span></span>
<span id="cb261-649"><a href="#cb261-649"></a></span>
<span id="cb261-650"><a href="#cb261-650"></a>"Other" looks strange here because its the only level with an upper case letter. As with any of the functions I show you, you can look at the help page for the function to see what arguments it takes. The <span class="in">`fct_lump`</span> function takes an argument (<span class="in">`other_level`</span>) that allows you to specify the name of the new level.</span>
<span id="cb261-651"><a href="#cb261-651"></a></span>
<span id="cb261-654"><a href="#cb261-654"></a><span class="in">```{r}</span></span>
<span id="cb261-655"><a href="#cb261-655"></a>data1 <span class="ot">&lt;-</span> <span class="fu">fct_lump</span>(data, <span class="at">n =</span> <span class="dv">3</span>, <span class="at">other_level =</span> <span class="st">"???"</span>)</span>
<span id="cb261-656"><a href="#cb261-656"></a><span class="fu">head</span>(data1, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb261-657"><a href="#cb261-657"></a><span class="in">```</span></span>
<span id="cb261-658"><a href="#cb261-658"></a></span>
<span id="cb261-659"><a href="#cb261-659"></a>::: {.callout-note collapse="true"}</span>
<span id="cb261-660"><a href="#cb261-660"></a><span class="fu">#### Generating Levels</span></span>
<span id="cb261-661"><a href="#cb261-661"></a></span>
<span id="cb261-662"><a href="#cb261-662"></a>Sometimes you need to generate repetative factor levels (e.g., for a repeated measures design, or for a truth table). Our truth table will have 4 propositions: R, P, D, and R. Therefore our truth table will have 81 rows (because each proposition can either be true, false, or gay and we have four propositions; $3 ^4 = 81$).</span>
<span id="cb261-663"><a href="#cb261-663"></a></span>
<span id="cb261-664"><a href="#cb261-664"></a>The <span class="in">`gl`</span> function generates a factor with up to <span class="in">`n`</span> levels, each repeated <span class="in">`k`</span> times.</span>
<span id="cb261-665"><a href="#cb261-665"></a></span>
<span id="cb261-668"><a href="#cb261-668"></a><span class="in">```{r}</span></span>
<span id="cb261-669"><a href="#cb261-669"></a><span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">2</span>)</span>
<span id="cb261-670"><a href="#cb261-670"></a><span class="in">```</span></span>
<span id="cb261-671"><a href="#cb261-671"></a></span>
<span id="cb261-672"><a href="#cb261-672"></a>The real clincher comes in the form of the <span class="in">`labels`</span> argument. This allows you to specify the labels for each level.</span>
<span id="cb261-673"><a href="#cb261-673"></a></span>
<span id="cb261-676"><a href="#cb261-676"></a><span class="in">```{r}</span></span>
<span id="cb261-677"><a href="#cb261-677"></a>outcomes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"true"</span>, <span class="st">"false"</span>, <span class="st">"gay"</span>)</span>
<span id="cb261-678"><a href="#cb261-678"></a><span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">3</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb261-679"><a href="#cb261-679"></a><span class="in">```</span></span>
<span id="cb261-680"><a href="#cb261-680"></a></span>
<span id="cb261-681"><a href="#cb261-681"></a>We can also (for our truth table) use the <span class="in">`length`</span> argument to make sure that all of our vectors are the 81 elements long that we need them to be. This is what I need for my truth table.</span>
<span id="cb261-682"><a href="#cb261-682"></a></span>
<span id="cb261-685"><a href="#cb261-685"></a><span class="in">```{r}</span></span>
<span id="cb261-686"><a href="#cb261-686"></a>R <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">27</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb261-687"><a href="#cb261-687"></a>p <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">9</span>, <span class="at">length =</span> <span class="dv">81</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb261-688"><a href="#cb261-688"></a>d <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">3</span>, <span class="at">length =</span> <span class="dv">81</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb261-689"><a href="#cb261-689"></a>r <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">k =</span> <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">81</span>, <span class="at">labels =</span> outcomes)</span>
<span id="cb261-690"><a href="#cb261-690"></a></span>
<span id="cb261-691"><a href="#cb261-691"></a><span class="fu">tibble</span>(R, p, d, r)</span>
<span id="cb261-692"><a href="#cb261-692"></a><span class="in">```</span></span>
<span id="cb261-693"><a href="#cb261-693"></a>:::</span>
<span id="cb261-694"><a href="#cb261-694"></a></span>
<span id="cb261-695"><a href="#cb261-695"></a><span class="fu">### Coersion and Checking</span></span>
<span id="cb261-696"><a href="#cb261-696"></a></span>
<span id="cb261-697"><a href="#cb261-697"></a>Here is a list of the data types you've seen thus far:</span>
<span id="cb261-698"><a href="#cb261-698"></a></span>
<span id="cb261-699"><a href="#cb261-699"></a><span class="ss">-   </span>integer</span>
<span id="cb261-700"><a href="#cb261-700"></a><span class="ss">-   </span>numeric</span>
<span id="cb261-701"><a href="#cb261-701"></a><span class="ss">-   </span>complex</span>
<span id="cb261-702"><a href="#cb261-702"></a><span class="ss">-   </span>character</span>
<span id="cb261-703"><a href="#cb261-703"></a><span class="ss">-   </span>logical</span>
<span id="cb261-704"><a href="#cb261-704"></a><span class="ss">-   </span>factor</span>
<span id="cb261-705"><a href="#cb261-705"></a></span>
<span id="cb261-706"><a href="#cb261-706"></a>Sometimes you want to check that the class of a variable is what you expect if to be (especially before you try to do something that only one type can do, like division). You can use the <span class="in">`is.*`</span> functions to check the class of a variable (replacing <span class="in">`*`</span> with the appropriate type).</span>
<span id="cb261-707"><a href="#cb261-707"></a></span>
<span id="cb261-710"><a href="#cb261-710"></a><span class="in">```{r}</span></span>
<span id="cb261-711"><a href="#cb261-711"></a>x <span class="ot">&lt;-</span> <span class="st">"zzz"</span></span>
<span id="cb261-712"><a href="#cb261-712"></a><span class="fu">is.integer</span>(x)</span>
<span id="cb261-713"><a href="#cb261-713"></a><span class="fu">is.character</span>(x)</span>
<span id="cb261-714"><a href="#cb261-714"></a><span class="in">```</span></span>
<span id="cb261-715"><a href="#cb261-715"></a></span>
<span id="cb261-716"><a href="#cb261-716"></a>You can also coerce one type of data into another, although this is sometimes risky. Coercing something into a character is usually safe, but coercing something into a type like numeric or logical can cause errors. Often R will create NA values and produce a warning, as shown below.</span>
<span id="cb261-717"><a href="#cb261-717"></a></span>
<span id="cb261-720"><a href="#cb261-720"></a><span class="in">```{r}</span></span>
<span id="cb261-721"><a href="#cb261-721"></a>x <span class="ot">&lt;-</span> <span class="st">"zzz"</span></span>
<span id="cb261-722"><a href="#cb261-722"></a><span class="fu">as.numeric</span>(x)</span>
<span id="cb261-723"><a href="#cb261-723"></a>x <span class="ot">&lt;-</span> <span class="st">"123"</span></span>
<span id="cb261-724"><a href="#cb261-724"></a><span class="fu">as.numeric</span>(x)</span>
<span id="cb261-725"><a href="#cb261-725"></a><span class="in">```</span></span>
<span id="cb261-726"><a href="#cb261-726"></a></span>
<span id="cb261-727"><a href="#cb261-727"></a><span class="fu">## Data Structures</span></span>
<span id="cb261-728"><a href="#cb261-728"></a></span>
<span id="cb261-729"><a href="#cb261-729"></a><span class="fu">### Vectors</span></span>
<span id="cb261-730"><a href="#cb261-730"></a></span>
<span id="cb261-731"><a href="#cb261-731"></a>A vector is a one dimensional array of elements of the same type (e.g., all characters, all numerics). In R, essentially everything is a vector if you analyze it at a fine enough level of detail. You can create a vector with the <span class="in">`c()`</span> function<span class="ot">[^03_r_101-4]</span>.</span>
<span id="cb261-732"><a href="#cb261-732"></a></span>
<span id="cb261-733"><a href="#cb261-733"></a><span class="ot">[^03_r_101-4]: </span><span class="in">`c()`</span> stands for concatenate.</span>
<span id="cb261-734"><a href="#cb261-734"></a></span>
<span id="cb261-737"><a href="#cb261-737"></a><span class="in">```{r}</span></span>
<span id="cb261-738"><a href="#cb261-738"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb261-739"><a href="#cb261-739"></a><span class="in">```</span></span>
<span id="cb261-740"><a href="#cb261-740"></a></span>
<span id="cb261-741"><a href="#cb261-741"></a>::: {.callout-important colapse="false"}</span>
<span id="cb261-742"><a href="#cb261-742"></a><span class="fu">#### Generating Sequences</span></span>
<span id="cb261-743"><a href="#cb261-743"></a></span>
<span id="cb261-744"><a href="#cb261-744"></a>A far easier way to generate the vector above would be to use the <span class="in">`:`</span> operator, which is described in @tip-logical_arithmetic.</span>
<span id="cb261-745"><a href="#cb261-745"></a></span>
<span id="cb261-748"><a href="#cb261-748"></a><span class="in">```{r}</span></span>
<span id="cb261-749"><a href="#cb261-749"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb261-750"><a href="#cb261-750"></a><span class="in">```</span></span>
<span id="cb261-751"><a href="#cb261-751"></a></span>
<span id="cb261-752"><a href="#cb261-752"></a>Look at the help page of the <span class="in">`seq()`</span> function by typing <span class="in">`?seq`</span> in the console. <span class="in">`seq`</span> takes arguments <span class="in">`from`</span>, <span class="in">`to`</span>, <span class="in">`by`</span>, and <span class="in">`along`</span>, which I will highlight here. We could recreate our vector with the following code:</span>
<span id="cb261-753"><a href="#cb261-753"></a></span>
<span id="cb261-756"><a href="#cb261-756"></a><span class="in">```{r}</span></span>
<span id="cb261-757"><a href="#cb261-757"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb261-758"><a href="#cb261-758"></a><span class="in">```</span></span>
<span id="cb261-759"><a href="#cb261-759"></a></span>
<span id="cb261-760"><a href="#cb261-760"></a>You could provide only a <span class="in">`from`</span> and a <span class="in">`by`</span> and a <span class="in">`length`</span> to get the same sequence</span>
<span id="cb261-761"><a href="#cb261-761"></a></span>
<span id="cb261-764"><a href="#cb261-764"></a><span class="in">```{r}</span></span>
<span id="cb261-765"><a href="#cb261-765"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">10</span>)</span>
<span id="cb261-766"><a href="#cb261-766"></a><span class="in">```</span></span>
<span id="cb261-767"><a href="#cb261-767"></a></span>
<span id="cb261-768"><a href="#cb261-768"></a>You could also go backwards:</span>
<span id="cb261-769"><a href="#cb261-769"></a></span>
<span id="cb261-772"><a href="#cb261-772"></a><span class="in">```{r}</span></span>
<span id="cb261-773"><a href="#cb261-773"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">10</span>, <span class="at">to =</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb261-774"><a href="#cb261-774"></a><span class="in">```</span></span>
<span id="cb261-775"><a href="#cb261-775"></a></span>
<span id="cb261-776"><a href="#cb261-776"></a>If you want a sequence that is the same length as another vector, you could use the <span class="in">`along`</span> argument.</span>
<span id="cb261-777"><a href="#cb261-777"></a></span>
<span id="cb261-780"><a href="#cb261-780"></a><span class="in">```{r}</span></span>
<span id="cb261-781"><a href="#cb261-781"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">198</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">13</span>, <span class="dv">0</span>, <span class="dv">178</span>, <span class="dv">20</span>)</span>
<span id="cb261-782"><a href="#cb261-782"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">1</span>, <span class="at">along =</span> x)</span>
<span id="cb261-783"><a href="#cb261-783"></a><span class="in">```</span></span>
<span id="cb261-784"><a href="#cb261-784"></a></span>
<span id="cb261-785"><a href="#cb261-785"></a>The <span class="in">`rep()`</span> function is used to repeat a value a certain number of times.</span>
<span id="cb261-786"><a href="#cb261-786"></a></span>
<span id="cb261-789"><a href="#cb261-789"></a><span class="in">```{r}</span></span>
<span id="cb261-790"><a href="#cb261-790"></a><span class="fu">rep</span>(<span class="dv">1</span>, <span class="at">times =</span> <span class="dv">10</span>)</span>
<span id="cb261-791"><a href="#cb261-791"></a><span class="in">```</span></span>
<span id="cb261-792"><a href="#cb261-792"></a></span>
<span id="cb261-793"><a href="#cb261-793"></a>You don't just have to repeat single values. You can repeat vectors as well.</span>
<span id="cb261-794"><a href="#cb261-794"></a></span>
<span id="cb261-797"><a href="#cb261-797"></a><span class="in">```{r}</span></span>
<span id="cb261-798"><a href="#cb261-798"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times =</span> <span class="dv">3</span>)</span>
<span id="cb261-799"><a href="#cb261-799"></a><span class="in">```</span></span>
<span id="cb261-800"><a href="#cb261-800"></a></span>
<span id="cb261-801"><a href="#cb261-801"></a>The <span class="in">`each`</span> argument determines how many time each element in the vector is repeated each <span class="in">`time`</span> there is a repetition.</span>
<span id="cb261-802"><a href="#cb261-802"></a></span>
<span id="cb261-805"><a href="#cb261-805"></a><span class="in">```{r}</span></span>
<span id="cb261-806"><a href="#cb261-806"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">3</span>)</span>
<span id="cb261-807"><a href="#cb261-807"></a><span class="in">```</span></span>
<span id="cb261-808"><a href="#cb261-808"></a></span>
<span id="cb261-809"><a href="#cb261-809"></a>There is no reason not to use the <span class="in">`each`</span> and <span class="in">`times`</span> arguments at the same time.</span>
<span id="cb261-810"><a href="#cb261-810"></a></span>
<span id="cb261-813"><a href="#cb261-813"></a><span class="in">```{r}</span></span>
<span id="cb261-814"><a href="#cb261-814"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each =</span> <span class="dv">2</span>, <span class="at">times =</span> <span class="dv">3</span>)</span>
<span id="cb261-815"><a href="#cb261-815"></a><span class="in">```</span></span>
<span id="cb261-816"><a href="#cb261-816"></a></span>
<span id="cb261-817"><a href="#cb261-817"></a>You can also specify how many times each element is repeated in each repetition. I specify cat to repeat five times, dog once, and fish twice.</span>
<span id="cb261-818"><a href="#cb261-818"></a></span>
<span id="cb261-821"><a href="#cb261-821"></a><span class="in">```{r}</span></span>
<span id="cb261-822"><a href="#cb261-822"></a>pets <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"fish"</span>)</span>
<span id="cb261-823"><a href="#cb261-823"></a><span class="fu">rep</span>(pets, <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb261-824"><a href="#cb261-824"></a><span class="in">```</span></span>
<span id="cb261-825"><a href="#cb261-825"></a>:::</span>
<span id="cb261-826"><a href="#cb261-826"></a></span>
<span id="cb261-827"><a href="#cb261-827"></a>You can name elements in a vector by using the <span class="in">`names()`</span> function. This is particularly useful for counts.</span>
<span id="cb261-828"><a href="#cb261-828"></a></span>
<span id="cb261-831"><a href="#cb261-831"></a><span class="in">```{r}</span></span>
<span id="cb261-832"><a href="#cb261-832"></a>counts <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">101</span>, <span class="dv">28</span>, <span class="dv">57</span>, <span class="dv">4</span>, <span class="dv">2</span>)</span>
<span id="cb261-833"><a href="#cb261-833"></a><span class="fu">names</span>(counts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"F"</span>)</span>
<span id="cb261-834"><a href="#cb261-834"></a></span>
<span id="cb261-835"><a href="#cb261-835"></a>counts</span>
<span id="cb261-836"><a href="#cb261-836"></a><span class="in">```</span></span>
<span id="cb261-837"><a href="#cb261-837"></a></span>
<span id="cb261-838"><a href="#cb261-838"></a>::: {.callout-important collapse="false"}</span>
<span id="cb261-839"><a href="#cb261-839"></a><span class="fu">#### Subscripting</span></span>
<span id="cb261-840"><a href="#cb261-840"></a></span>
<span id="cb261-841"><a href="#cb261-841"></a>You can subset a vector by using square brackets. You can subset by index, with the index starting at 1 (not 0).</span>
<span id="cb261-842"><a href="#cb261-842"></a></span>
<span id="cb261-845"><a href="#cb261-845"></a><span class="in">```{r}</span></span>
<span id="cb261-846"><a href="#cb261-846"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb261-847"><a href="#cb261-847"></a>x[<span class="dv">4</span>]</span>
<span id="cb261-848"><a href="#cb261-848"></a><span class="in">```</span></span>
<span id="cb261-849"><a href="#cb261-849"></a></span>
<span id="cb261-850"><a href="#cb261-850"></a>We can also subset based on another vector, selecting whichever indexes you like.</span>
<span id="cb261-851"><a href="#cb261-851"></a></span>
<span id="cb261-854"><a href="#cb261-854"></a><span class="in">```{r}</span></span>
<span id="cb261-855"><a href="#cb261-855"></a>x[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>)]</span>
<span id="cb261-856"><a href="#cb261-856"></a><span class="in">```</span></span>
<span id="cb261-857"><a href="#cb261-857"></a></span>
<span id="cb261-858"><a href="#cb261-858"></a>You can use negative indexes to exclude certain elements.</span>
<span id="cb261-859"><a href="#cb261-859"></a></span>
<span id="cb261-862"><a href="#cb261-862"></a><span class="in">```{r}</span></span>
<span id="cb261-863"><a href="#cb261-863"></a>x[<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb261-864"><a href="#cb261-864"></a>x[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">1</span>)]</span>
<span id="cb261-865"><a href="#cb261-865"></a><span class="in">```</span></span>
<span id="cb261-866"><a href="#cb261-866"></a></span>
<span id="cb261-867"><a href="#cb261-867"></a>You can also subset based on logicals. This is particularly useful for filtering data.</span>
<span id="cb261-868"><a href="#cb261-868"></a></span>
<span id="cb261-871"><a href="#cb261-871"></a><span class="in">```{r}</span></span>
<span id="cb261-872"><a href="#cb261-872"></a>x[x <span class="sc">&gt;</span> <span class="dv">5</span>]</span>
<span id="cb261-873"><a href="#cb261-873"></a><span class="in">```</span></span>
<span id="cb261-874"><a href="#cb261-874"></a>:::</span>
<span id="cb261-875"><a href="#cb261-875"></a></span>
<span id="cb261-876"><a href="#cb261-876"></a>vectors are very typical in data science and statistics. Take, for example, the heights of all the characters in Star Wars (in cm).</span>
<span id="cb261-877"><a href="#cb261-877"></a></span>
<span id="cb261-880"><a href="#cb261-880"></a><span class="in">```{r}</span></span>
<span id="cb261-881"><a href="#cb261-881"></a>heights <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>starwars<span class="sc">$</span>height</span>
<span id="cb261-882"><a href="#cb261-882"></a><span class="fu">names</span>(heights) <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>starwars<span class="sc">$</span>name</span>
<span id="cb261-883"><a href="#cb261-883"></a><span class="fu">head</span>(heights, <span class="at">n =</span> <span class="dv">30</span>)</span>
<span id="cb261-884"><a href="#cb261-884"></a><span class="in">```</span></span>
<span id="cb261-885"><a href="#cb261-885"></a></span>
<span id="cb261-886"><a href="#cb261-886"></a>Where in the vector is the greatest height and where is the lowest? Let's sort the vector and then view the first 3 and last 3 elements in the sorted version.</span>
<span id="cb261-887"><a href="#cb261-887"></a></span>
<span id="cb261-890"><a href="#cb261-890"></a><span class="in">```{r}</span></span>
<span id="cb261-891"><a href="#cb261-891"></a><span class="co"># sort the vector</span></span>
<span id="cb261-892"><a href="#cb261-892"></a>heights2 <span class="ot">&lt;-</span> <span class="fu">sort</span>(heights,</span>
<span id="cb261-893"><a href="#cb261-893"></a>                <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-894"><a href="#cb261-894"></a><span class="in">```</span></span>
<span id="cb261-895"><a href="#cb261-895"></a></span>
<span id="cb261-896"><a href="#cb261-896"></a>There is a problem here, even if it's not immediately apparent. Sorting, by default, will remove all the <span class="in">`NA`</span> values from the vector. We can check that elements were removed by comparing the length of the sorted and the unsorted vectors; the sorted vector is smaller.</span>
<span id="cb261-897"><a href="#cb261-897"></a></span>
<span id="cb261-900"><a href="#cb261-900"></a><span class="in">```{r}</span></span>
<span id="cb261-901"><a href="#cb261-901"></a><span class="co"># prints number of elements in vector (number of characters)</span></span>
<span id="cb261-902"><a href="#cb261-902"></a><span class="fu">length</span>(heights)</span>
<span id="cb261-903"><a href="#cb261-903"></a><span class="fu">length</span>(heights2) <span class="sc">&lt;</span> <span class="fu">length</span>(heights)</span>
<span id="cb261-904"><a href="#cb261-904"></a><span class="in">```</span></span>
<span id="cb261-905"><a href="#cb261-905"></a></span>
<span id="cb261-906"><a href="#cb261-906"></a>Let's try sorting again, but this time we will tell R what to do with the NA values using the <span class="in">`na.last`</span> argument. By setting it to <span class="in">`TRUE`</span>, we put all the NAs at the end of the vector.</span>
<span id="cb261-907"><a href="#cb261-907"></a></span>
<span id="cb261-910"><a href="#cb261-910"></a><span class="in">```{r}</span></span>
<span id="cb261-911"><a href="#cb261-911"></a>heights2 <span class="ot">&lt;-</span> <span class="fu">sort</span>(heights,</span>
<span id="cb261-912"><a href="#cb261-912"></a>                  <span class="at">decreasing =</span> <span class="cn">TRUE</span>,</span>
<span id="cb261-913"><a href="#cb261-913"></a>                  <span class="at">na.last =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-914"><a href="#cb261-914"></a></span>
<span id="cb261-915"><a href="#cb261-915"></a><span class="co"># verify that heights2 is the same length as the original data</span></span>
<span id="cb261-916"><a href="#cb261-916"></a><span class="fu">length</span>(heights2) <span class="sc">==</span> <span class="fu">length</span>(heights)</span>
<span id="cb261-917"><a href="#cb261-917"></a></span>
<span id="cb261-918"><a href="#cb261-918"></a><span class="co"># print first 5 heights</span></span>
<span id="cb261-919"><a href="#cb261-919"></a><span class="fu">head</span>(heights2,</span>
<span id="cb261-920"><a href="#cb261-920"></a>     <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb261-921"><a href="#cb261-921"></a><span class="in">```</span></span>
<span id="cb261-922"><a href="#cb261-922"></a></span>
<span id="cb261-923"><a href="#cb261-923"></a>The tallest character is Yarael Poof (with a height of 264 cm), and</span>
<span id="cb261-924"><a href="#cb261-924"></a></span>
<span id="cb261-927"><a href="#cb261-927"></a><span class="in">```{r}</span></span>
<span id="cb261-928"><a href="#cb261-928"></a><span class="co"># should be all NA values (which we put at the end)</span></span>
<span id="cb261-929"><a href="#cb261-929"></a><span class="fu">tail</span>(heights2,</span>
<span id="cb261-930"><a href="#cb261-930"></a>     <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb261-931"><a href="#cb261-931"></a></span>
<span id="cb261-932"><a href="#cb261-932"></a><span class="co"># we can use subscriptting to filter out NAs</span></span>
<span id="cb261-933"><a href="#cb261-933"></a><span class="fu">tail</span>(heights2[<span class="sc">!</span><span class="fu">is.na</span>(heights2)],</span>
<span id="cb261-934"><a href="#cb261-934"></a>     <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb261-935"><a href="#cb261-935"></a><span class="in">```</span></span>
<span id="cb261-936"><a href="#cb261-936"></a></span>
<span id="cb261-937"><a href="#cb261-937"></a>Yoda has the smallest height (66 cm). We could also have achieved these conclusions using the <span class="in">`min`</span> or <span class="in">`max`</span> functions, but there's a problem. The result we get is not Yoda and Yarael Poof; it's <span class="in">`NA`</span>.</span>
<span id="cb261-938"><a href="#cb261-938"></a></span>
<span id="cb261-941"><a href="#cb261-941"></a><span class="in">```{r}</span></span>
<span id="cb261-942"><a href="#cb261-942"></a><span class="fu">max</span>(heights)</span>
<span id="cb261-943"><a href="#cb261-943"></a><span class="fu">max</span>(heights)</span>
<span id="cb261-944"><a href="#cb261-944"></a><span class="in">```</span></span>
<span id="cb261-945"><a href="#cb261-945"></a></span>
<span id="cb261-946"><a href="#cb261-946"></a>**Many vector functions have a `na.rm` argument which tells R to do the computation while ignoring all missing values**. Setting this argument to <span class="in">`TRUE`</span> is typically required to produce a numerical result (e.g., R won't compute a mean for a vector with an <span class="in">`NA`</span> value). In the case of min and max</span>
<span id="cb261-947"><a href="#cb261-947"></a></span>
<span id="cb261-950"><a href="#cb261-950"></a><span class="in">```{r}</span></span>
<span id="cb261-951"><a href="#cb261-951"></a><span class="fu">max</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-952"><a href="#cb261-952"></a><span class="fu">min</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-953"><a href="#cb261-953"></a><span class="in">```</span></span>
<span id="cb261-954"><a href="#cb261-954"></a></span>
<span id="cb261-955"><a href="#cb261-955"></a>A large range of descriptive statistics are available with built-in functions.</span>
<span id="cb261-956"><a href="#cb261-956"></a></span>
<span id="cb261-959"><a href="#cb261-959"></a><span class="in">```{r}</span></span>
<span id="cb261-960"><a href="#cb261-960"></a><span class="do">### centrality statistics</span></span>
<span id="cb261-961"><a href="#cb261-961"></a><span class="fu">sum</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-962"><a href="#cb261-962"></a><span class="fu">mean</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-963"><a href="#cb261-963"></a><span class="fu">median</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-964"><a href="#cb261-964"></a><span class="co"># get the first, second (median), and third quartiles</span></span>
<span id="cb261-965"><a href="#cb261-965"></a><span class="fu">quantile</span>(heights, </span>
<span id="cb261-966"><a href="#cb261-966"></a>         <span class="at">probs =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fl">0.25</span>,</span>
<span id="cb261-967"><a href="#cb261-967"></a>                     <span class="at">to =</span> <span class="fl">0.75</span>,</span>
<span id="cb261-968"><a href="#cb261-968"></a>                     <span class="at">by =</span> <span class="fl">0.25</span>),</span>
<span id="cb261-969"><a href="#cb261-969"></a>         <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-970"><a href="#cb261-970"></a></span>
<span id="cb261-971"><a href="#cb261-971"></a><span class="do">### spread statistics</span></span>
<span id="cb261-972"><a href="#cb261-972"></a><span class="co"># range</span></span>
<span id="cb261-973"><a href="#cb261-973"></a><span class="fu">range</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-974"><a href="#cb261-974"></a><span class="co"># variance</span></span>
<span id="cb261-975"><a href="#cb261-975"></a><span class="fu">var</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-976"><a href="#cb261-976"></a><span class="co"># standard deviation</span></span>
<span id="cb261-977"><a href="#cb261-977"></a><span class="fu">sd</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-978"><a href="#cb261-978"></a><span class="in">```</span></span>
<span id="cb261-979"><a href="#cb261-979"></a></span>
<span id="cb261-980"><a href="#cb261-980"></a><span class="fu">#### Correlation, Variance, and Covariance</span></span>
<span id="cb261-981"><a href="#cb261-981"></a></span>
<span id="cb261-982"><a href="#cb261-982"></a>These functions are incredibly important (at least in principle) to a lot of frequentist statistics. They take 2 numeric vectors, an <span class="in">`x`</span> and <span class="in">`y`</span>; or just a single matrix or data frame.</span>
<span id="cb261-983"><a href="#cb261-983"></a></span>
<span id="cb261-986"><a href="#cb261-986"></a><span class="in">```{r}</span></span>
<span id="cb261-987"><a href="#cb261-987"></a><span class="co"># x and y are perfectly negatively correlated (r=-1)</span></span>
<span id="cb261-988"><a href="#cb261-988"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb261-989"><a href="#cb261-989"></a>y <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">1</span></span>
<span id="cb261-990"><a href="#cb261-990"></a></span>
<span id="cb261-991"><a href="#cb261-991"></a><span class="co"># computing the covariance, removing na values</span></span>
<span id="cb261-992"><a href="#cb261-992"></a><span class="fu">var</span>(x,</span>
<span id="cb261-993"><a href="#cb261-993"></a>    y,</span>
<span id="cb261-994"><a href="#cb261-994"></a>    <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-995"><a href="#cb261-995"></a></span>
<span id="cb261-996"><a href="#cb261-996"></a><span class="co"># this is an equivalent computation of covariance</span></span>
<span id="cb261-997"><a href="#cb261-997"></a><span class="fu">cov</span>(x,</span>
<span id="cb261-998"><a href="#cb261-998"></a>    y,</span>
<span id="cb261-999"><a href="#cb261-999"></a>    <span class="at">use =</span> <span class="st">"na.or.complete"</span>,</span>
<span id="cb261-1000"><a href="#cb261-1000"></a>    <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb261-1001"><a href="#cb261-1001"></a></span>
<span id="cb261-1002"><a href="#cb261-1002"></a><span class="co"># you could also use a different method</span></span>
<span id="cb261-1003"><a href="#cb261-1003"></a><span class="fu">cov</span>(x,</span>
<span id="cb261-1004"><a href="#cb261-1004"></a>    y,</span>
<span id="cb261-1005"><a href="#cb261-1005"></a>    <span class="at">use =</span> <span class="st">"na.or.complete"</span>,</span>
<span id="cb261-1006"><a href="#cb261-1006"></a>    <span class="at">method =</span> <span class="st">"kendall"</span>)</span>
<span id="cb261-1007"><a href="#cb261-1007"></a><span class="in">```</span></span>
<span id="cb261-1008"><a href="#cb261-1008"></a></span>
<span id="cb261-1009"><a href="#cb261-1009"></a>Co-variances are typically standardized into correlations before they are interpreted. You can use the <span class="in">`cor`</span> function to get a correlation coefficient calculated according to the methods outlined by <span class="in">`"pearson"`</span>, <span class="in">`"kendall"`</span>, and <span class="in">`"spearman"`</span>. We will calculate Pearson's $r$, which is standardized number (between -1, indicating perfect negative correlation, and 1, indicating perfect positive correlation).</span>
<span id="cb261-1010"><a href="#cb261-1010"></a></span>
<span id="cb261-1013"><a href="#cb261-1013"></a><span class="in">```{r}</span></span>
<span id="cb261-1014"><a href="#cb261-1014"></a><span class="fu">cor</span>(x,</span>
<span id="cb261-1015"><a href="#cb261-1015"></a>    y,</span>
<span id="cb261-1016"><a href="#cb261-1016"></a>    <span class="at">use =</span> <span class="st">"na.or.complete"</span>,</span>
<span id="cb261-1017"><a href="#cb261-1017"></a>    <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb261-1018"><a href="#cb261-1018"></a><span class="in">```</span></span>
<span id="cb261-1019"><a href="#cb261-1019"></a></span>
<span id="cb261-1020"><a href="#cb261-1020"></a><span class="fu">#### Random Sampling</span></span>
<span id="cb261-1021"><a href="#cb261-1021"></a></span>
<span id="cb261-1022"><a href="#cb261-1022"></a>R has a function called <span class="in">`sample`</span> that is useful for generating a random sample of data, provided with some probabilities. For example, if you wanted to simulate the roll of a die, you could take a random sample (of size 1) from the sequence of numbers from 1 to 6:</span>
<span id="cb261-1023"><a href="#cb261-1023"></a></span>
<span id="cb261-1026"><a href="#cb261-1026"></a><span class="in">```{r}</span></span>
<span id="cb261-1027"><a href="#cb261-1027"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb261-1028"><a href="#cb261-1028"></a><span class="in">```</span></span>
<span id="cb261-1029"><a href="#cb261-1029"></a></span>
<span id="cb261-1030"><a href="#cb261-1030"></a>Often you will want a sample with a size larger than 1. You can use the <span class="in">`replace`</span> argument to allow for repeated sampling, as would be the case in 3 repeated rolls of a die.</span>
<span id="cb261-1031"><a href="#cb261-1031"></a></span>
<span id="cb261-1034"><a href="#cb261-1034"></a><span class="in">```{r}</span></span>
<span id="cb261-1035"><a href="#cb261-1035"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-1036"><a href="#cb261-1036"></a><span class="in">```</span></span>
<span id="cb261-1037"><a href="#cb261-1037"></a></span>
<span id="cb261-1038"><a href="#cb261-1038"></a>You can also use the <span class="in">`prob`</span> argument to specify the probability of each outcome. For example, if you wanted to simulate a weighted die, you could use the following probabilities:</span>
<span id="cb261-1039"><a href="#cb261-1039"></a></span>
<span id="cb261-1042"><a href="#cb261-1042"></a><span class="in">```{r}</span></span>
<span id="cb261-1043"><a href="#cb261-1043"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span>))</span>
<span id="cb261-1044"><a href="#cb261-1044"></a><span class="in">```</span></span>
<span id="cb261-1045"><a href="#cb261-1045"></a></span>
<span id="cb261-1046"><a href="#cb261-1046"></a>R also allows you to generate random numbers from a variety of distributions - this is the <span class="in">`r*`</span> series of functions (where <span class="in">`*`</span> is the name of a distribution - see <span class="in">`?distributions`</span> for more information). For example, to generate 5 random numbers from a normal distribution with a mean of 0 and a standard deviation of 1, you could use the following code:</span>
<span id="cb261-1047"><a href="#cb261-1047"></a></span>
<span id="cb261-1050"><a href="#cb261-1050"></a><span class="in">```{r}</span></span>
<span id="cb261-1051"><a href="#cb261-1051"></a><span class="fu">rnorm</span>(<span class="dv">5</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb261-1052"><a href="#cb261-1052"></a><span class="in">```</span></span>
<span id="cb261-1053"><a href="#cb261-1053"></a></span>
<span id="cb261-1054"><a href="#cb261-1054"></a>Each distribution also has an associated <span class="in">`d`</span>, <span class="in">`p`</span>, and <span class="in">`q`</span> function. The <span class="in">`d`</span> function gives the density of the distribution at a given point, the <span class="in">`p`</span> function gives the cumulative distribution function of the distribution at a given point, and the <span class="in">`q`</span> function gives the quantile of the distribution at a given probability.</span>
<span id="cb261-1055"><a href="#cb261-1055"></a></span>
<span id="cb261-1056"><a href="#cb261-1056"></a>The difference between <span class="in">`d`</span> and <span class="in">`p`</span> is easiest to show graphically.</span>
<span id="cb261-1057"><a href="#cb261-1057"></a></span>
<span id="cb261-1058"><a href="#cb261-1058"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb261-1059"><a href="#cb261-1059"></a><span class="in">tibble(x = seq(from = -5, </span></span>
<span id="cb261-1060"><a href="#cb261-1060"></a><span class="in">               to = 5, </span></span>
<span id="cb261-1061"><a href="#cb261-1061"></a><span class="in">               by = 0.1),</span></span>
<span id="cb261-1062"><a href="#cb261-1062"></a><span class="in">       y = dnorm(x, mean = 0, sd = 1)) |&gt; </span></span>
<span id="cb261-1063"><a href="#cb261-1063"></a><span class="in">  ggplot(aes(x = x, y = y)) +</span></span>
<span id="cb261-1064"><a href="#cb261-1064"></a><span class="in">  geom_line() +</span></span>
<span id="cb261-1065"><a href="#cb261-1065"></a><span class="in">  labs(title = "Density of the Normal Distribution",</span></span>
<span id="cb261-1066"><a href="#cb261-1066"></a><span class="in">       subtitle = "using dnorm(mean = 0, sd = 1)",</span></span>
<span id="cb261-1067"><a href="#cb261-1067"></a><span class="in">       x = "x",</span></span>
<span id="cb261-1068"><a href="#cb261-1068"></a><span class="in">       y = "Probability Density") +</span></span>
<span id="cb261-1069"><a href="#cb261-1069"></a><span class="in">  theme_minimal()</span></span>
<span id="cb261-1070"><a href="#cb261-1070"></a></span>
<span id="cb261-1071"><a href="#cb261-1071"></a><span class="in">tibble(x = seq(from = -5, </span></span>
<span id="cb261-1072"><a href="#cb261-1072"></a><span class="in">               to = 5, </span></span>
<span id="cb261-1073"><a href="#cb261-1073"></a><span class="in">               by = 0.1),</span></span>
<span id="cb261-1074"><a href="#cb261-1074"></a><span class="in">       y = pnorm(x, mean = 0, sd = 1)) |&gt; </span></span>
<span id="cb261-1075"><a href="#cb261-1075"></a><span class="in">  ggplot(aes(x = x, y = y)) +</span></span>
<span id="cb261-1076"><a href="#cb261-1076"></a><span class="in">  geom_line() +</span></span>
<span id="cb261-1077"><a href="#cb261-1077"></a><span class="in">  labs(title = "Cumulative density of the Normal Distribution",</span></span>
<span id="cb261-1078"><a href="#cb261-1078"></a><span class="in">       subtitle = "using pnorm(mean = 0, sd = 1)",</span></span>
<span id="cb261-1079"><a href="#cb261-1079"></a><span class="in">       x = "x",</span></span>
<span id="cb261-1080"><a href="#cb261-1080"></a><span class="in">       y = "Probability Density") +</span></span>
<span id="cb261-1081"><a href="#cb261-1081"></a><span class="in">  theme_minimal()</span></span>
<span id="cb261-1082"><a href="#cb261-1082"></a><span class="in">```</span></span>
<span id="cb261-1083"><a href="#cb261-1083"></a></span>
<span id="cb261-1084"><a href="#cb261-1084"></a>I showed the <span class="in">`quantile`</span> function above. the <span class="in">`q`</span> series distribution functions are used to calculate quantiles. For example, to calculate the 0.95 quantile of the standard normal distribution, you could use the following code:</span>
<span id="cb261-1085"><a href="#cb261-1085"></a></span>
<span id="cb261-1088"><a href="#cb261-1088"></a><span class="in">```{r}</span></span>
<span id="cb261-1089"><a href="#cb261-1089"></a><span class="fu">qnorm</span>(<span class="fl">0.95</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb261-1090"><a href="#cb261-1090"></a><span class="in">```</span></span>
<span id="cb261-1091"><a href="#cb261-1091"></a></span>
<span id="cb261-1092"><a href="#cb261-1092"></a>If we wanted specific quantiles, we should specify them as the first argument. Here I select a variety of probabilities that show the empirical rule - about 68% of the data should be within 1 standard deviation of the mean, 95% within 2, and 99.7% within 3.</span>
<span id="cb261-1093"><a href="#cb261-1093"></a></span>
<span id="cb261-1096"><a href="#cb261-1096"></a><span class="in">```{r}</span></span>
<span id="cb261-1097"><a href="#cb261-1097"></a><span class="fu">tibble</span>(<span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.0015</span>, <span class="fl">0.025</span>, <span class="fl">0.05</span>, <span class="fl">0.16</span>, <span class="fl">0.84</span>, <span class="fl">0.95</span>, <span class="fl">0.975</span>, <span class="fl">0.9985</span>),</span>
<span id="cb261-1098"><a href="#cb261-1098"></a>       <span class="at">z =</span> <span class="fu">qnorm</span>(quantile, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>))</span>
<span id="cb261-1099"><a href="#cb261-1099"></a><span class="in">```</span></span>
<span id="cb261-1100"><a href="#cb261-1100"></a></span>
<span id="cb261-1101"><a href="#cb261-1101"></a><span class="fu">### Lists</span></span>
<span id="cb261-1102"><a href="#cb261-1102"></a></span>
<span id="cb261-1103"><a href="#cb261-1103"></a>Lists are a very flexible data structure in R. The most simple lists can be though of as vectors with obligatorily named elements (elements in vectors can be named, but not obligatorily so). You can create a list with the <span class="in">`list`</span> function, and access elements with the <span class="in">`$`</span> operator.</span>
<span id="cb261-1104"><a href="#cb261-1104"></a></span>
<span id="cb261-1107"><a href="#cb261-1107"></a><span class="in">```{r}</span></span>
<span id="cb261-1108"><a href="#cb261-1108"></a><span class="co"># creating a list</span></span>
<span id="cb261-1109"><a href="#cb261-1109"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb261-1110"><a href="#cb261-1110"></a>my_list<span class="sc">$</span>b</span>
<span id="cb261-1111"><a href="#cb261-1111"></a><span class="in">```</span></span>
<span id="cb261-1112"><a href="#cb261-1112"></a></span>
<span id="cb261-1113"><a href="#cb261-1113"></a>What's neat about lists, compared to vectors, is that they can store multiple types of data (which vectors cannot). For example, you could store a vector, a matrix, and a data frame in a single list.</span>
<span id="cb261-1114"><a href="#cb261-1114"></a></span>
<span id="cb261-1117"><a href="#cb261-1117"></a><span class="in">```{r}</span></span>
<span id="cb261-1118"><a href="#cb261-1118"></a><span class="co"># creating a list with a string, a vector, a matrix, and a list</span></span>
<span id="cb261-1119"><a href="#cb261-1119"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="st">"hello"</span>, <span class="at">b =</span> <span class="dv">2</span><span class="sc">:-</span><span class="dv">1</span>, <span class="at">c =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">nrow =</span> <span class="dv">2</span>), <span class="at">d =</span> my_list)</span>
<span id="cb261-1120"><a href="#cb261-1120"></a>my_list</span>
<span id="cb261-1121"><a href="#cb261-1121"></a><span class="in">```</span></span>
<span id="cb261-1122"><a href="#cb261-1122"></a></span>
<span id="cb261-1123"><a href="#cb261-1123"></a>You can access elements of a list with the <span class="in">`$`</span> operator, or with double square brackets <span class="in">`[[ ]]`</span>. The double square brackets are useful when you want to access elements programmatically.</span>
<span id="cb261-1124"><a href="#cb261-1124"></a></span>
<span id="cb261-1127"><a href="#cb261-1127"></a><span class="in">```{r}</span></span>
<span id="cb261-1128"><a href="#cb261-1128"></a><span class="co"># accessing elements of a list</span></span>
<span id="cb261-1129"><a href="#cb261-1129"></a>my_list<span class="sc">$</span>a</span>
<span id="cb261-1130"><a href="#cb261-1130"></a>my_list[[<span class="st">"a"</span>]]</span>
<span id="cb261-1131"><a href="#cb261-1131"></a><span class="in">```</span></span>
<span id="cb261-1132"><a href="#cb261-1132"></a></span>
<span id="cb261-1133"><a href="#cb261-1133"></a><span class="fu">### Data Frames and Tibbles</span></span>
<span id="cb261-1134"><a href="#cb261-1134"></a></span>
<span id="cb261-1135"><a href="#cb261-1135"></a>Data frames are the most common data structure in R. A data frame is nothing more than a collection of vectors of the same length. This might initially seem quite a strange definition I have just provided, but stay with me. The data.frame is the closest correspondent to a spreadsheet. It stores data in rectangular form (i.e., in a table with rows and columns). The tidy data framework tells us that each of the columns in the table must represent a single variable and each row a single observation. The variables are each represented by a vector of values. The entire data frame is constructed by putting the vector for each variable side-by-side. Like this:</span>
<span id="cb261-1136"><a href="#cb261-1136"></a></span>
<span id="cb261-1139"><a href="#cb261-1139"></a><span class="in">```{r}</span></span>
<span id="cb261-1140"><a href="#cb261-1140"></a>a  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb261-1141"><a href="#cb261-1141"></a>b  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)</span>
<span id="cb261-1142"><a href="#cb261-1142"></a><span class="fu">data.frame</span>(<span class="at">col_one =</span> a, <span class="at">col_two =</span> b)</span>
<span id="cb261-1143"><a href="#cb261-1143"></a><span class="in">```</span></span>
<span id="cb261-1144"><a href="#cb261-1144"></a></span>
<span id="cb261-1145"><a href="#cb261-1145"></a>Hadley Wickham's response to the data.frame is the tibble, which essentially the same exact data structure. The biggest difference between a data.frame and a tibble is the way that they print in an R console - tibbles are more human-readable (unfortunately, I cannot demonstrate this difference here). Similarly to above, we could create a tibble using the <span class="in">`tibble`</span> function.</span>
<span id="cb261-1146"><a href="#cb261-1146"></a></span>
<span id="cb261-1149"><a href="#cb261-1149"></a><span class="in">```{r}</span></span>
<span id="cb261-1150"><a href="#cb261-1150"></a><span class="fu">tibble</span>(<span class="at">col_one =</span> a, <span class="at">col_two =</span> b)</span>
<span id="cb261-1151"><a href="#cb261-1151"></a><span class="in">```</span></span>
<span id="cb261-1152"><a href="#cb261-1152"></a></span>
<span id="cb261-1153"><a href="#cb261-1153"></a><span class="fu">### Other Data Structures</span></span>
<span id="cb261-1154"><a href="#cb261-1154"></a></span>
<span id="cb261-1155"><a href="#cb261-1155"></a>There are two more base R data structures that I want to show you, but we will make much less use of them. For our purposes, we will primarily be using tibbles. </span>
<span id="cb261-1156"><a href="#cb261-1156"></a></span>
<span id="cb261-1157"><a href="#cb261-1157"></a>The first is a matrix. A matrix is a two-dimensional array that stores data of the same type (almost always numeric). You can create a matrix with the <span class="in">`matrix`</span> function. Matrices are frequently used in linear algebra, and we will be using them for that purpose later (when and if we get to latent semantic analysis, which heavily employs matrices as a data structure). Tibbles are more flexible than matrices because they can store data of different types. For lots of reasons, however, computers are really fast at doing linear algebra, so matrix operations can often be more efficient than tibble operations.</span>
<span id="cb261-1158"><a href="#cb261-1158"></a></span>
<span id="cb261-1161"><a href="#cb261-1161"></a><span class="in">```{r}</span></span>
<span id="cb261-1162"><a href="#cb261-1162"></a><span class="co"># numeric matrix</span></span>
<span id="cb261-1163"><a href="#cb261-1163"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb261-1164"><a href="#cb261-1164"></a><span class="co"># character matrix</span></span>
<span id="cb261-1165"><a href="#cb261-1165"></a><span class="fu">matrix</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>], <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb261-1166"><a href="#cb261-1166"></a><span class="in">```</span></span>
<span id="cb261-1167"><a href="#cb261-1167"></a></span>
<span id="cb261-1168"><a href="#cb261-1168"></a>Finally, and this is the worst, there is a data type in R that is just called an array. You may think: wait a minute, didn't I just describe a vector as a one-dimensional array and a matrix as an array with two-dimensions? Of course, you are correct. Someone made the bat shit decision to name a data structure <span class="in">`array`</span> even though there are two other data structures that are also arrays and which are used a thousand times more. So, then, what is an array? </span>
<span id="cb261-1169"><a href="#cb261-1169"></a></span>
<span id="cb261-1170"><a href="#cb261-1170"></a>An array is a three-or-more dimensional array that stores data of the same type. I very seldom make use of arrays, but occasionally they are helpful (like matrices, operations on arrays tend to be optimized to shit). This is a three dimensional array. As you can see, R prints each layer of the 3x3x3 array separately in a sequence of 2-dimensional matrices. This is because it is not possible to print all three dimensions at the same time. </span>
<span id="cb261-1171"><a href="#cb261-1171"></a></span>
<span id="cb261-1174"><a href="#cb261-1174"></a><span class="in">```{r}</span></span>
<span id="cb261-1175"><a href="#cb261-1175"></a><span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">27</span>, <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb261-1176"><a href="#cb261-1176"></a><span class="in">```</span></span>
<span id="cb261-1177"><a href="#cb261-1177"></a></span>
<span id="cb261-1178"><a href="#cb261-1178"></a><span class="fu">## Programming Basics</span></span>
<span id="cb261-1179"><a href="#cb261-1179"></a></span>
<span id="cb261-1180"><a href="#cb261-1180"></a><span class="fu">### Functions</span></span>
<span id="cb261-1181"><a href="#cb261-1181"></a></span>
<span id="cb261-1182"><a href="#cb261-1182"></a>I just showed you a lot of functions, but you can (and surely at some point will) make your own. This is a super simple doubling function that highlights the syntax. In the first line, I name the function (<span class="in">`double_me`</span>), then I tell R that it is a function and that it takes one argument, <span class="in">`number`</span>. When you call it, the function returns the result of the last line of code in the function. </span>
<span id="cb261-1183"><a href="#cb261-1183"></a></span>
<span id="cb261-1186"><a href="#cb261-1186"></a><span class="in">```{r}</span></span>
<span id="cb261-1187"><a href="#cb261-1187"></a>double_me <span class="ot">&lt;-</span> <span class="cf">function</span>(number) {</span>
<span id="cb261-1188"><a href="#cb261-1188"></a>  number <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb261-1189"><a href="#cb261-1189"></a>}</span>
<span id="cb261-1190"><a href="#cb261-1190"></a><span class="fu">double_me</span>(<span class="dv">4</span>)</span>
<span id="cb261-1191"><a href="#cb261-1191"></a><span class="in">```</span></span>
<span id="cb261-1192"><a href="#cb261-1192"></a></span>
<span id="cb261-1193"><a href="#cb261-1193"></a>Functions can also take optional arguments, which must always come after the obligatory arguments. </span>
<span id="cb261-1194"><a href="#cb261-1194"></a></span>
<span id="cb261-1197"><a href="#cb261-1197"></a><span class="in">```{r}</span></span>
<span id="cb261-1198"><a href="#cb261-1198"></a>greet_me <span class="ot">&lt;-</span> <span class="cf">function</span>(name, <span class="at">time =</span> <span class="st">"morning"</span>) {</span>
<span id="cb261-1199"><a href="#cb261-1199"></a>  <span class="fu">paste0</span>(<span class="st">"Good "</span>, time, <span class="st">", "</span>, name, <span class="st">"!"</span>)</span>
<span id="cb261-1200"><a href="#cb261-1200"></a>}</span>
<span id="cb261-1201"><a href="#cb261-1201"></a><span class="fu">greet_me</span>(<span class="at">name =</span> <span class="st">"Hunter"</span>)</span>
<span id="cb261-1202"><a href="#cb261-1202"></a><span class="fu">greet_me</span>(<span class="at">name =</span> <span class="st">"Hunter"</span>, <span class="at">time =</span> <span class="st">"evening"</span>)</span>
<span id="cb261-1203"><a href="#cb261-1203"></a><span class="in">```</span></span>
<span id="cb261-1204"><a href="#cb261-1204"></a></span>
<span id="cb261-1205"><a href="#cb261-1205"></a>I'll show you one more function that computes a factorial. A factorial is the product of all positive integers up to a given number. For example, the factorial of 5 is $5 * 4 * 3 * 2 * 1 = 120$. The best and easiest way to approach this function is with **recursion**. This means that you write a function that calls itself. The idea with the factorial works like this: if $5! = 5 * 4 * 3 * 2 * 1$ and $4! = 4 * 3 * 2 * 1$, then $5! = 5 * 4!$, or-more generally-$n! = n * (n-1)!$. This is the recursive part; there is a factorial on both sides of the equation. Recursion can be tricky. You must always remember to include a **base case** (in this instance, when n = 1) that tells the function to stop calling itself. If you don't, the function will call itself infinitely, which is less than ideal and unlikely to result in a correct computation. This function features <span class="in">`return`</span> statements which explicitly tell R what value to return. This is needed because the return value is not the last line of code in the function.</span>
<span id="cb261-1206"><a href="#cb261-1206"></a></span>
<span id="cb261-1209"><a href="#cb261-1209"></a><span class="in">```{r}</span></span>
<span id="cb261-1210"><a href="#cb261-1210"></a>factorial <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb261-1211"><a href="#cb261-1211"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"calculating factorial of"</span>, n))</span>
<span id="cb261-1212"><a href="#cb261-1212"></a>  <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb261-1213"><a href="#cb261-1213"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb261-1214"><a href="#cb261-1214"></a>  } <span class="cf">else</span> {</span>
<span id="cb261-1215"><a href="#cb261-1215"></a>    <span class="fu">return</span>(n <span class="sc">*</span> <span class="fu">factorial</span>(n <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb261-1216"><a href="#cb261-1216"></a>  }</span>
<span id="cb261-1217"><a href="#cb261-1217"></a>}</span>
<span id="cb261-1218"><a href="#cb261-1218"></a><span class="fu">factorial</span>(<span class="dv">5</span>)</span>
<span id="cb261-1219"><a href="#cb261-1219"></a><span class="in">```</span></span>
<span id="cb261-1220"><a href="#cb261-1220"></a></span>
<span id="cb261-1221"><a href="#cb261-1221"></a><span class="fu">### Control Flow</span></span>
<span id="cb261-1222"><a href="#cb261-1222"></a></span>
<span id="cb261-1223"><a href="#cb261-1223"></a>Control flow is the order in which the code is executed. As we saw in the first chapter, programming relies on the ability to repeatedly run the same code and also to conditionally run some code. R has a few control flow structures that I'm going to review: the <span class="in">`for`</span> loop, the <span class="in">`while`</span> loop, the <span class="in">`repeat`</span> loop, and the <span class="in">`if`</span> statement.</span>
<span id="cb261-1224"><a href="#cb261-1224"></a></span>
<span id="cb261-1225"><a href="#cb261-1225"></a>Let's do the loops, first. A for loop is useful when you want to run the same code a certain number of times. In the for loop, we have to give R a variable (<span class="in">`i`</span> in this case) as well as a sequence (the vector <span class="in">`1:5`</span> in this case). The code inside the curly braces will be run for each value of <span class="in">`i`</span> in the sequence. </span>
<span id="cb261-1226"><a href="#cb261-1226"></a></span>
<span id="cb261-1229"><a href="#cb261-1229"></a><span class="in">```{r}</span></span>
<span id="cb261-1230"><a href="#cb261-1230"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb261-1231"><a href="#cb261-1231"></a>  <span class="fu">print</span>(i)</span>
<span id="cb261-1232"><a href="#cb261-1232"></a>}</span>
<span id="cb261-1233"><a href="#cb261-1233"></a><span class="in">```</span></span>
<span id="cb261-1234"><a href="#cb261-1234"></a></span>
<span id="cb261-1235"><a href="#cb261-1235"></a>While loops run a certain portion of code repeatedly until a condition is no longer met. The condition is what goes in the parentheses. Typically while loops will change the value of a variable inside the loop, so that the condition is eventually no longer met. This is performed by the line <span class="in">`i &lt;- i + 1`</span></span>
<span id="cb261-1236"><a href="#cb261-1236"></a></span>
<span id="cb261-1239"><a href="#cb261-1239"></a><span class="in">```{r}</span></span>
<span id="cb261-1240"><a href="#cb261-1240"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb261-1241"><a href="#cb261-1241"></a><span class="cf">while</span>(i <span class="sc">&lt;=</span> <span class="dv">5</span>) {</span>
<span id="cb261-1242"><a href="#cb261-1242"></a>  <span class="fu">print</span>(i)</span>
<span id="cb261-1243"><a href="#cb261-1243"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb261-1244"><a href="#cb261-1244"></a>}</span>
<span id="cb261-1245"><a href="#cb261-1245"></a><span class="in">```</span></span>
<span id="cb261-1246"><a href="#cb261-1246"></a></span>
<span id="cb261-1247"><a href="#cb261-1247"></a>Repeat loops are a little trickier and less common than for or while loops. They run a portion of code indefinitely until a <span class="in">`break`</span> statement is encountered. It is far too easy, if you're not careful, to create an infinite loop if you forget the <span class="in">`break`</span> statement. The <span class="in">`break`</span> statment ends the loop. In this case, the loop will run until <span class="in">`i`</span> is greater than 5.</span>
<span id="cb261-1248"><a href="#cb261-1248"></a></span>
<span id="cb261-1251"><a href="#cb261-1251"></a><span class="in">```{r}</span></span>
<span id="cb261-1252"><a href="#cb261-1252"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb261-1253"><a href="#cb261-1253"></a><span class="cf">repeat</span> {</span>
<span id="cb261-1254"><a href="#cb261-1254"></a>  <span class="fu">print</span>(i)</span>
<span id="cb261-1255"><a href="#cb261-1255"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb261-1256"><a href="#cb261-1256"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">5</span>) {</span>
<span id="cb261-1257"><a href="#cb261-1257"></a>    <span class="cf">break</span></span>
<span id="cb261-1258"><a href="#cb261-1258"></a>  }</span>
<span id="cb261-1259"><a href="#cb261-1259"></a>}</span>
<span id="cb261-1260"><a href="#cb261-1260"></a><span class="in">```</span></span>
<span id="cb261-1261"><a href="#cb261-1261"></a></span>
<span id="cb261-1262"><a href="#cb261-1262"></a>The <span class="in">`if`</span> statement is used to conditionally run code. If the condition in the parentheses is met, the code inside the curly braces will run. If the condition is not met, the code will not run. One example of an if statement in located in the above <span class="in">`repeat`</span> loop. The condition there is <span class="in">`i &gt; 5`</span>, and when the condition is met, the <span class="in">`break`</span> statement is executed, stopping the loop.</span>
<span id="cb261-1263"><a href="#cb261-1263"></a></span>
<span id="cb261-1266"><a href="#cb261-1266"></a><span class="in">```{r}</span></span>
<span id="cb261-1267"><a href="#cb261-1267"></a><span class="cf">if</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb261-1268"><a href="#cb261-1268"></a>  <span class="fu">print</span>(<span class="st">"This will print"</span>)</span>
<span id="cb261-1269"><a href="#cb261-1269"></a>}</span>
<span id="cb261-1270"><a href="#cb261-1270"></a></span>
<span id="cb261-1271"><a href="#cb261-1271"></a><span class="cf">if</span> (<span class="cn">FALSE</span>) {</span>
<span id="cb261-1272"><a href="#cb261-1272"></a>  <span class="fu">print</span>(<span class="st">"This will not print"</span>)</span>
<span id="cb261-1273"><a href="#cb261-1273"></a>}</span>
<span id="cb261-1274"><a href="#cb261-1274"></a><span class="in">```</span></span>
<span id="cb261-1275"><a href="#cb261-1275"></a></span>
<span id="cb261-1276"><a href="#cb261-1276"></a>You can also add an <span class="in">`else`</span> statement to an <span class="in">`if`</span> statement. This code will run if the condition is not met. </span>
<span id="cb261-1277"><a href="#cb261-1277"></a></span>
<span id="cb261-1280"><a href="#cb261-1280"></a><span class="in">```{r}</span></span>
<span id="cb261-1281"><a href="#cb261-1281"></a>i <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb261-1282"><a href="#cb261-1282"></a><span class="cf">if</span> (i <span class="sc">&lt;=</span> <span class="dv">5</span>) {</span>
<span id="cb261-1283"><a href="#cb261-1283"></a>  <span class="fu">print</span>(<span class="st">"i is less than or equal to 5"</span>)</span>
<span id="cb261-1284"><a href="#cb261-1284"></a>} <span class="cf">else</span> {</span>
<span id="cb261-1285"><a href="#cb261-1285"></a>  <span class="fu">print</span>(<span class="st">"i is greater than 5"</span>)</span>
<span id="cb261-1286"><a href="#cb261-1286"></a>}</span>
<span id="cb261-1287"><a href="#cb261-1287"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/huntervooys/hunterr_2024/edit/main/03_r_101.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/huntervooys/hunterr_2024/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>